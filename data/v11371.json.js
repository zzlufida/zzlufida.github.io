window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v11371","name":"hr_v_tm_OriAndSignCard","subtype":"VIEW","is_user_defined":false,"description":null,"script":"CREATE VIEW [dbo].[hr_v_tm_OriAndSignCard]\r\nAS \r\n SELECT a.cPsn_Num, \r\n  d.jobnumber, \r\n  a.cPsn_Name, \r\n  isnull(qq.cDepCode,b.cDepCode) AS NewDeptCode, \r\n  pp.cDepName AS NewDeptName, \r\n  d.vCardNo, \r\n  s.dDate, \r\n  s.dTime, \r\n  g.cuser_name, \r\n  convert(varchar(16),convert(datetime,d.dSysTime),120) as dOptTime, \r\n  d.vRemark, \r\n  e.vName as vReason, \r\n  d.uRecordId, \r\n  Flag = '0', \r\n  d.cSource,\r\n   d.bEffect, \r\n   d.cMobileSiteCode,\r\n   m.cMobileSiteName, d.cMobileSiteAddress, d.cLongitude, d.cLatitude, \r\n  convert(varchar(16),convert(datetime,d.dOldDateTime),120) as dOldDateTime, \r\n   d.bAuditFlag, \r\n  d.cAuditorNum as cAuditorNum, \r\n  isnull(h.cuser_name,d.cAuditorNum) as cAuditor, \r\n  d.dAuditTime as dAuditTime, \r\n  d.nMachine_Num as nMachine_Num, \r\n  b.cDepCode, \r\n  c.cCode, \r\n  d.dDateTime, \r\n  a.btaketm, \r\n  a.rcheckinflag, \r\n  d.cOptPsn_Num, \r\n  d.vReason as vReasonCode, \r\n  a.jobnumber as perJobNumber, \r\n  isOricard = '1' ,\r\n  d.cCurrentAuditor, hr_ct099.vdescription as cStatusName,HR_CT277.vdescription as cExamineApproveTypeName,'' as cSubmitBy,null as dSubmitOn,'' AS VoucherID\r\n   FROM \r\n      ((((hr_hi_person a LEFT JOIN Department b on a.cDept_num = b.cDepCode)  \r\n      LEFT JOIN hr_tm_DutyClass c on a.cDutyclass = c.cCode)  \r\n      LEFT JOIN hr_tm_OriCardData d on a.cPsn_Num = d.cPsn_Num)  \r\n      LEFT JOIN HR_TM_SignCardReason e on d.vReason = e.cCode \r\n      LEFT JOIN hr_hi_jobInfo qq ON qq.cPsn_Num = d.cPsn_Num AND d.dDateTime>=qq.dbegindate and d.dDateTime>=qq.dbegindate and d.dDateTime<=(CASE when (qq.denddate IS NULL OR denddate='')then '9999-01-01' else qq.denddate end) \r\n      LEFT JOIN Department pp ON pp.cDepCode = isnull(qq.cDepCode,b.cDepCode) \r\n      LEFT JOIN \r\n\t\t\t\t(select convert(varchar(10),convert(datetime,hr_tm_OriCardData.dDateTime),120) as dDate,convert(varchar(5),convert(datetime,hr_tm_OriCardData.dDateTime),114) as dTime,uRecordid from hr_tm_OriCardData ) as s \r\n\t\t\t\t\ton s.uRecordid=d.uRecordid) \r\n\t\t\tLEFT JOIN UFSystem..UA_User g on d.cOptPsn_Num = g.cuser_id \r\n\t\t\tLEFT JOIN UFSystem..UA_User h on d.cAuditorNum = h.cuser_id \r\n\t\t\tLEFT JOIN hr_tm_mobilecardsite m on d.cMobileSiteCode = m.cMobileSiteCode\r\n\t\t\tLEFT JOIN hr_ct099 ON hr_ct099.ccodeid=d.cStatus\r\n\t\t\tleft join HR_CT277 on HR_CT277.ccodeid = d.cExamineApproveType\r\n UNION ALL \r\n  SELECT a.cPsn_Num, \r\n  d.jobnumber, \r\n  a.cPsn_Name, \r\n  isnull(qq.cDepCode,b.cDepCode) AS NewDeptCode, \r\n  pp.cDepName AS NewDeptName, \r\n  d.vCardNo, \r\n  s.dDate, \r\n  s.dTime, \r\n  g.cuser_name, \r\n  convert(varchar(16),convert(datetime,d.dSysTime),120) as dOptTime, \r\n  d.vRemark, \r\n  e.vName as vReason, \r\n  d.uRecordId, \r\n  Flag = '0', \r\n  d.cSource,\r\n   d.bEffect, \r\n   d.cMobileSiteCode,\r\n    m.cMobileSiteName, d.cMobileSiteAddress, d.cLongitude, d.cLatitude, \r\n   convert(varchar(16),convert(datetime,d.dOldDateTime),120) as dOldDateTime, \r\n   d.bAuditFlag, \r\n   d.cAuditorNum as cAuditorNum, \r\n   isnull(h.cuser_name,d.cAuditorNum) as cAuditor, \r\n   d.dAuditTime as dAuditTime, \r\n   d.nMachine_Num as nMachine_Num, \r\n   b.cDepCode, \r\n   c.cCode, \r\n   d.dDateTime, \r\n   a.btaketm, \r\n  a.rcheckinflag, \r\n  d.cOptPsn_Num, \r\n  d.vReason as vReasonCode, \r\n   a.jobnumber as perJobNumber, \r\n   isOricard = '0',\r\n   d.cCurrentAuditor, hr_ct099.vdescription as cStatusName,HR_CT277.vdescription as cExamineApproveTypeName,d.cSubmitBy as cSubmitBy,d.dSubmitOn as dSubmitOn ,d.VoucherID\r\n   FROM \r\n      ((((hr_hi_person a left join Department b on a.cDept_num = b.cDepCode) \r\n      LEFT JOIN hr_tm_DutyClass c on a.cDutyclass = c.cCode) \r\n      LEFT JOIN hr_tm_SignCardData d on a.cPsn_Num = d.cPsn_Num) \r\n      LEFT JOIN HR_TM_SignCardReason e on d.vReason = e.cCode \r\n      LEFT JOIN hr_hi_jobInfo qq ON qq.cPsn_Num = d.cPsn_Num AND d.dDateTime>=qq.dbegindate and d.dDateTime>=qq.dbegindate and d.dDateTime<=(CASE when (qq.denddate IS NULL OR denddate='')then '9999-01-01' else qq.denddate end) \r\n      LEFT JOIN Department pp ON pp.cDepCode = isnull(qq.cDepCode,b.cDepCode) \r\n      LEFT JOIN (select convert(varchar(10),convert(datetime,hr_tm_SignCardData.dDateTime),120) as dDate,convert(varchar(5),convert(datetime,hr_tm_SignCardData.dDateTime),114) as dTime,uRecordid from hr_tm_SignCardData ) as s \r\n      on s.uRecordid=d.uRecordid) \r\n\t\t\tLEFT JOIN UFSystem..UA_User g on d.cOptPsn_Num = g.cuser_id \r\n\t\t\tLEFT JOIN UFSystem..UA_User h on d.cAuditorNum = h.cuser_id \r\n\t\t\tLEFT JOIN hr_tm_mobilecardsite m on d.cMobileSiteCode = m.cMobileSiteCode\r\n\t\t\t left join hr_ct099 on hr_ct099.ccodeid=d.cStatus \r\n\t\t\t left join HR_CT277 on HR_CT277.ccodeid = d.cExamineApproveType \r\n\t\t\t \r\n\t\t--员工自助\r\n\t\tUNION ALL \r\n\t\t  SELECT a.cPsn_Num, \r\n  d.jobnumber, \r\n  a.cPsn_Name, \r\n  isnull(qq.cDepCode,b.cDepCode) AS NewDeptCode, \r\n  pp.cDepName AS NewDeptName, \r\n  d.vCardNo, \r\n  s.dDate, \r\n  s.dTime, \r\n  g.cuser_name, \r\n  convert(varchar(16),convert(datetime,d.dSysTime),120) as dOptTime, \r\n  d.vRemark, \r\n  e.vName as vReason, \r\n  d.uRecordId, \r\n  Flag = '0', \r\n  d.cSource,\r\n   d.bEffect, \r\n   d.cMobileSiteCode,\r\n    m.cMobileSiteName, d.cMobileSiteAddress, d.cLongitude, d.cLatitude, \r\n   convert(varchar(16),convert(datetime,d.dOldDateTime),120) as dOldDateTime, \r\n   d.bAuditFlag, \r\n   d.cAuditorNum as cAuditorNum, \r\n   isnull(h.cuser_name,d.cAuditorNum) as cAuditor, \r\n   d.dAuditTime as dAuditTime, \r\n   d.nMachine_Num as nMachine_Num, \r\n   b.cDepCode, \r\n   c.cCode, \r\n   d.dDateTime, \r\n   a.btaketm, \r\n  a.rcheckinflag, \r\n  d.cOptPsn_Num, \r\n  d.vReason as vReasonCode, \r\n   a.jobnumber as perJobNumber, \r\n   isOricard = '0',\r\n   d.cCurrentAuditor, hr_ct099.vdescription as cStatusName,HR_CT277.vdescription as cExamineApproveTypeName,d.cSubmitBy as cSubmitBy,d.dSubmitOn as dSubmitOn ,d.VoucherID\r\n\t\tFROM  ( SELECT  HR_TM_SignCard_App.PsnCode AS cPsn_Num ,\r\n          hr_hi_person.jobnumber AS jobnumber ,\r\n          hr_hi_person.vCardNo AS vCardNo ,\r\n          HR_TM_SignCard_App.CreateOn AS dSysTime ,\r\n          HR_TM_SignCard_App.Remark AS vRemark ,\r\n          HR_TM_SignCard_App_Items.PK_HR_TM_SignCard_App_Items AS uRecordId ,\r\n          ISNULL(HR_TM_SignCard_App.bEffect,1) AS bEffect ,\r\n          null AS dOldDateTime ,\r\n          CASE WHEN HR_TM_SignCard_App.Status IN ('1' ) THEN 0\r\n             ELSE 1\r\n          END AS bAuditFlag ,\r\n          UserHrPersonContro2.cUser_Id AS cAuditorNum ,\r\n          HR_TM_SignCard_App.AuditOn AS dAuditTime ,\r\n          '' AS nMachine_Num ,\r\n          '1' AS cSource ,--签卡\r\n          HR_TM_SignCard_App.Reason AS vReason ,\r\n          CASE WHEN HR_TM_SignCard_App.bManual = 1\r\n             THEN HR_TM_SignCard_App.BeginTime\r\n             ELSE HR_TM_SignCard_App_Items.dDateTime\r\n          END AS dDateTime ,\r\n          UserHrPersonContro1.cUser_Id AS cOptPsn_Num ,\r\n          HR_TM_SignCard_App.SubmitOn AS dSubmitOn ,\r\n          CASE WHEN ISNULL(HR_TM_SignCard_App.SubmitOn, '') = ''\r\n             THEN ''\r\n             ELSE UA_User1.cUser_Name\r\n          END AS cSubmitBy ,\r\n          CASE WHEN ISNULL(HR_TM_SignCard_App.cExtendField, '0') = '3'\r\n             THEN HR_TM_SignCard_App.cExtendField\r\n             ELSE HR_TM_SignCard_App.Role\r\n          END AS cExamineApproveType ,\r\n          HR_TM_SignCard_App.Status AS cStatus ,\r\n          HR_TM_SignCard_App.cMobileSiteCode AS cMobileSiteCode ,\r\n          HR_TM_SignCard_App.cMobileSiteAddress AS cMobileSiteAddress ,\r\n          HR_TM_SignCard_App.cLongitude AS cLongitude ,\r\n          HR_TM_SignCard_App.cLatitude AS cLatitude ,\r\n          HR_TM_SignCard_App.cCurrentAuditor AS cCurrentAuditor,\r\n          HR_TM_SignCard_App.VoucherCode as VoucherID\r\n     FROM   HR_TM_SignCard_App\r\n          INNER JOIN hr_hi_person ON hr_hi_person.cpsn_num = HR_TM_SignCard_App.PsnCode\r\n          LEFT JOIN UserHrPersonContro AS UserHrPersonContro1 ON HR_TM_SignCard_App.Creater = UserHrPersonContro1.cPsn_Num\r\n          LEFT JOIN UFSystem..UA_User AS UA_User1 ON UA_User1.cUser_Id = UserHrPersonContro1.cUser_Id\r\n          LEFT JOIN UserHrPersonContro AS UserHrPersonContro2 ON HR_TM_SignCard_App.Auditor = UserHrPersonContro2.cPsn_Num\r\n          LEFT JOIN UFSystem..UA_User AS UA_User2 ON UA_User2.cUser_Id = UserHrPersonContro2.cUser_Id\r\n          LEFT JOIN HR_TM_SignCard_App_Items ON HR_TM_SignCard_App.VoucherCode = HR_TM_SignCard_App_Items.VoucherId AND HR_TM_SignCard_App_Items.PsnCode=HR_TM_SignCard_App.PsnCode\r\n     WHERE   \r\n     --hr_hi_person.cDept_num IN (\r\n     --     SELECT cDepCode\r\n     --     FROM  tempdb..hr_tm_OriCardData_93cfc84d_c93c_43af_8609_f7700f4dbcf2 )\r\n     --     AND\r\n           HR_TM_SignCard_App.Status IN ( '-1', '1' )\r\n    ) AS d\r\n    JOIN hr_hi_person AS a ON a.cPsn_Num = d.cPsn_Num\r\n    LEFT JOIN Department b ON a.cDept_num = b.cDepCode\r\n    LEFT JOIN hr_tm_DutyClass c ON a.cDutyclass = c.cCode\r\n    LEFT JOIN HR_TM_SignCardReason e ON d.vReason = e.cCode\r\n    LEFT JOIN hr_hi_jobInfo qq ON qq.cPsn_Num = d.cPsn_Num AND d.dDateTime>=qq.dbegindate and d.dDateTime>=qq.dbegindate and d.dDateTime<=(CASE when (qq.denddate IS NULL OR denddate='')then '9999-01-01' else qq.denddate end) \r\n    LEFT JOIN Department pp ON pp.cDepCode = ISNULL(qq.cDepCode,\r\n                            b.cDepCode)\r\n    LEFT JOIN ufsystem..ua_user f ON d.cOptPsn_Num = f.cuser_ID\r\n    JOIN ( SELECT CONVERT(VARCHAR(10), CONVERT(DATETIME, case when HR_TM_SignCard_App.bManual=1 then HR_TM_SignCard_App.BeginTime else HR_TM_SignCard_App_Items.dDateTime end ), 120) AS dDate ,\r\n                       CONVERT(VARCHAR(5), CONVERT(DATETIME, case when HR_TM_SignCard_App.bManual=1 then HR_TM_SignCard_App.BeginTime else HR_TM_SignCard_App_Items.dDateTime end), 114) AS dTime ,\r\n                       HR_TM_SignCard_App_Items.PK_HR_TM_SignCard_App_Items AS uRecordid,HR_TM_SignCard_App.PsnCode,\r\n                       CASE WHEN HR_TM_SignCard_App.bManual = 1 THEN HR_TM_SignCard_App.BeginTime ELSE HR_TM_SignCard_App_Items.dDateTime END AS dDateTime\r\n                  FROM  HR_TM_SignCard_App left join HR_TM_SignCard_App_Items on HR_TM_SignCard_App.VoucherCode=HR_TM_SignCard_App_Items.VoucherId and HR_TM_SignCard_App.PsnCode=HR_TM_SignCard_App_Items.PsnCode where Status in('-1','1') \r\n                  ) AS s ON s.uRecordid = d.uRecordid and s.PsnCode=d.cpsn_num AND s.dDateTime=d.dDateTime\r\n    LEFT JOIN UFSystem..UA_User g ON d.cOptPsn_Num = g.cuser_id\r\n    LEFT JOIN UFSystem..UA_User h ON d.cAuditorNum = h.cuser_id\r\n    LEFT JOIN hr_ct099 ON hr_ct099.ccodeid = d.cStatus\r\n    LEFT JOIN HR_CT277 ON HR_CT277.ccodeid = d.cExamineApproveType\r\n\t\tLEFT JOIN hr_tm_mobilecardsite m on d.cMobileSiteCode = m.cMobileSiteCode\r\n--经理自助\r\nUNION ALL \r\nSELECT a.cPsn_Num, \r\n  d.jobnumber, \r\n  a.cPsn_Name, \r\n  isnull(qq.cDepCode,b.cDepCode) AS NewDeptCode, \r\n  pp.cDepName AS NewDeptName, \r\n  d.vCardNo, \r\n  s.dDate, \r\n  s.dTime, \r\n  g.cuser_name, \r\n  convert(varchar(16),convert(datetime,d.dSysTime),120) as dOptTime, \r\n  d.vRemark, \r\n  e.vName as vReason, \r\n  d.uRecordId, \r\n  Flag = '0', \r\n  d.cSource,\r\n   d.bEffect, \r\n   d.cMobileSiteCode,\r\n    m.cMobileSiteName, d.cMobileSiteAddress, d.cLongitude, d.cLatitude, \r\n   convert(varchar(16),convert(datetime,d.dOldDateTime),120) as dOldDateTime, \r\n   d.bAuditFlag, \r\n   d.cAuditorNum as cAuditorNum, \r\n   isnull(h.cuser_name,d.cAuditorNum) as cAuditor, \r\n   d.dAuditTime as dAuditTime, \r\n   d.nMachine_Num as nMachine_Num, \r\n   b.cDepCode, \r\n   c.cCode, \r\n   d.dDateTime, \r\n   a.btaketm, \r\n  a.rcheckinflag, \r\n  d.cOptPsn_Num, \r\n  d.vReason as vReasonCode, \r\n   a.jobnumber as perJobNumber, \r\n   isOricard = '0',\r\n   d.cCurrentAuditor, hr_ct099.vdescription as cStatusName,HR_CT277.vdescription as cExamineApproveTypeName,d.cSubmitBy as cSubmitBy,d.dSubmitOn as dSubmitOn ,d.VoucherID\r\n   \r\nFROM  ( SELECT  HR_TM_App_Items.PsnCode AS cPsn_Num ,\r\n          hr_hi_person.jobnumber AS jobnumber ,\r\n          hr_hi_person.vCardNo AS vCardNo ,\r\n          HR_TM_SignCard_App.CreateOn AS dSysTime ,\r\n          HR_TM_SignCard_App.Remark AS vRemark ,\r\n          HR_TM_SignCard_App_Items.PK_HR_TM_SignCard_App_Items AS uRecordid ,\r\n          ISNULL(HR_TM_SignCard_App.bEffect,1) AS bEffect ,\r\n          null AS dOldDateTime ,\r\n          CASE WHEN HR_TM_SignCard_App.Status IN ('1' ) THEN 0\r\n             ELSE 1\r\n          END AS bAuditFlag ,\r\n          UserHrPersonContro2.cUser_Id AS cAuditorNum ,\r\n          HR_TM_SignCard_App.AuditOn AS dAuditTime ,\r\n          '' AS nMachine_Num ,\r\n          '1' AS cSource ,\r\n          HR_TM_SignCard_App.Reason AS vReason ,\r\n          CASE WHEN HR_TM_SignCard_App.bManual = 1\r\n             THEN HR_TM_SignCard_App.BeginTime\r\n             ELSE HR_TM_SignCard_App_Items.dDateTime\r\n          END AS dDateTime ,\r\n          UserHrPersonContro1.cUser_Id AS cOptPsn_Num ,\r\n          HR_TM_SignCard_App.SubmitOn AS dSubmitOn ,\r\n          CASE WHEN ISNULL(HR_TM_SignCard_App.SubmitOn, '') = ''\r\n             THEN ''\r\n             ELSE UA_User1.cUser_Name\r\n          END AS cSubmitBy ,\r\n          CASE WHEN ISNULL(HR_TM_SignCard_App.cExtendField, '0') = '3'\r\n             THEN HR_TM_SignCard_App.cExtendField\r\n             ELSE HR_TM_SignCard_App.Role\r\n          END AS cExamineApproveType ,\r\n          HR_TM_SignCard_App.STATUS AS cStatus ,\r\n          HR_TM_SignCard_App.cMobileSiteCode AS cMobileSiteCode ,\r\n          HR_TM_SignCard_App.cMobileSiteAddress AS cMobileSiteAddress ,\r\n          HR_TM_SignCard_App.cLongitude AS cLongitude ,\r\n          HR_TM_SignCard_App.cLatitude AS cLatitude ,\r\n          HR_TM_SignCard_App.cCurrentAuditor AS cCurrentAuditor,\r\n          HR_TM_SignCard_App.VoucherCode as VoucherID\r\n     FROM   HR_TM_SignCard_App\r\n          INNER JOIN HR_TM_App_Items ON HR_TM_App_Items.VoucherId = HR_TM_SignCard_App.VoucherId\r\n          INNER JOIN hr_hi_person ON hr_hi_person.cpsn_num = HR_TM_App_Items.PsnCode\r\n          LEFT JOIN UserHrPersonContro AS UserHrPersonContro1 ON HR_TM_SignCard_App.Creater = UserHrPersonContro1.cPsn_Num\r\n          LEFT JOIN UFSystem..UA_User AS UA_User1 ON UA_User1.cUser_Id = UserHrPersonContro1.cUser_Id\r\n          LEFT JOIN UserHrPersonContro AS UserHrPersonContro2 ON HR_TM_SignCard_App.Auditor = UserHrPersonContro2.cPsn_Num\r\n          LEFT JOIN UFSystem..UA_User AS UA_User2 ON UA_User2.cUser_Id = UserHrPersonContro2.cUser_Id\r\n          LEFT JOIN HR_TM_SignCard_App_Items ON HR_TM_SignCard_App.VoucherCode=HR_TM_SignCard_App_Items.VoucherId AND  HR_TM_App_Items.PsnCode=HR_TM_SignCard_App_Items.PsnCode\r\n     WHERE   \r\n     --hr_hi_person.cDept_num IN (\r\n     --     SELECT cDepCode\r\n     --     FROM  tempdb..hr_tm_OriCardData_93cfc84d_c93c_43af_8609_f7700f4dbcf2 )\r\n     --     AND \r\n          HR_TM_SignCard_App.STATUS IN ( '-1', '1' )\r\n    ) AS d\r\n    JOIN hr_hi_person AS a ON a.cPsn_Num = d.cPsn_Num\r\n    LEFT JOIN Department b ON a.cDept_num = b.cDepCode\r\n    LEFT JOIN hr_tm_DutyClass c ON a.cDutyclass = c.cCode\r\n    LEFT JOIN HR_TM_SignCardReason e ON d.vReason = e.cCode\r\n    LEFT JOIN hr_hi_jobInfo qq ON qq.cPsn_Num = d.cPsn_Num AND d.dDateTime>=qq.dbegindate and d.dDateTime>=qq.dbegindate and d.dDateTime<=(CASE when (qq.denddate IS NULL OR denddate='')then '9999-01-01' else qq.denddate end) \r\n    LEFT JOIN Department pp ON pp.cDepCode = ISNULL(qq.cDepCode,\r\n                            b.cDepCode)\r\n    LEFT JOIN ufsystem..ua_user f ON d.cOptPsn_Num = f.cuser_ID\r\n    JOIN ( SELECT CONVERT(VARCHAR(10), CONVERT(DATETIME, CASE WHEN HR_TM_SignCard_App.bManual=1 THEN HR_TM_SignCard_App.BeginTime ELSE HR_TM_SignCard_App_Items.dDateTime END ), 120) AS dDate ,\r\n                       CONVERT(VARCHAR(5), CONVERT(DATETIME, CASE WHEN HR_TM_SignCard_App.bManual=1 THEN HR_TM_SignCard_App.BeginTime ELSE HR_TM_SignCard_App_Items.dDateTime END), 114) AS dTime ,\r\n                       HR_TM_SignCard_App_Items.PK_HR_TM_SignCard_App_Items AS uRecordid,HR_TM_App_Items.PsnCode,\r\n                       CASE WHEN HR_TM_SignCard_App.bManual = 1 THEN HR_TM_SignCard_App.BeginTime ELSE HR_TM_SignCard_App_Items.dDateTime END AS dDateTime\r\n                  FROM  HR_TM_SignCard_App INNER JOIN HR_TM_App_Items ON HR_TM_App_Items.VoucherId=HR_TM_SignCard_App.VoucherId LEFT JOIN HR_TM_SignCard_App_Items ON HR_TM_SignCard_App.VoucherCode=HR_TM_SignCard_App_Items.VoucherId WHERE HR_TM_SignCard_App.Status IN('-1','1') AND HR_TM_SignCard_App_Items.PsnCode=HR_TM_App_Items.PsnCode) AS s ON s.uRecordId = d.uRecordid AND d.cpsn_num=s.PsnCode AND s.dDateTime=d.dDateTime\r\n    LEFT JOIN UFSystem..UA_User g ON d.cOptPsn_Num = g.cuser_id\r\n    LEFT JOIN UFSystem..UA_User h ON d.cAuditorNum = h.cuser_id\r\n    LEFT JOIN hr_ct099 ON hr_ct099.ccodeid = d.cStatus\r\n    LEFT JOIN HR_CT277 ON HR_CT277.ccodeid = d.cExamineApproveType\r\n\t\tLEFT JOIN hr_tm_mobilecardsite m ON d.cMobileSiteCode = m.cMobileSiteCode","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"hr_v_tm_OriAndSignCard"},{"field":"Type","value":"View"}],"columns":[{"id":"column-227828","object_id":"column-227828","name":"cPsn_Num","name_without_path":"cPsn_Num","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227829","object_id":"column-227829","name":"jobnumber","name_without_path":"jobnumber","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227830","object_id":"column-227830","name":"cPsn_Name","name_without_path":"cPsn_Name","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227831","object_id":"column-227831","name":"NewDeptCode","name_without_path":"NewDeptCode","description":null,"is_pk":false,"is_identity":false,"data_type":"UFreference: nvarchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227832","object_id":"column-227832","name":"NewDeptName","name_without_path":"NewDeptName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227833","object_id":"column-227833","name":"vCardNo","name_without_path":"vCardNo","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227834","object_id":"column-227834","name":"dDate","name_without_path":"dDate","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"10","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227835","object_id":"column-227835","name":"dTime","name_without_path":"dTime","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"5","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227836","object_id":"column-227836","name":"cuser_name","name_without_path":"cuser_name","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227837","object_id":"column-227837","name":"dOptTime","name_without_path":"dOptTime","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"16","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227838","object_id":"column-227838","name":"vRemark","name_without_path":"vRemark","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227839","object_id":"column-227839","name":"vReason","name_without_path":"vReason","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227840","object_id":"column-227840","name":"uRecordId","name_without_path":"uRecordId","description":null,"is_pk":false,"is_identity":false,"data_type":"uniqueidentifier","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227841","object_id":"column-227841","name":"Flag","name_without_path":"Flag","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"1","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227842","object_id":"column-227842","name":"cSource","name_without_path":"cSource","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"2","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227843","object_id":"column-227843","name":"bEffect","name_without_path":"bEffect","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227844","object_id":"column-227844","name":"cMobileSiteCode","name_without_path":"cMobileSiteCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227845","object_id":"column-227845","name":"cMobileSiteName","name_without_path":"cMobileSiteName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227846","object_id":"column-227846","name":"cMobileSiteAddress","name_without_path":"cMobileSiteAddress","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227847","object_id":"column-227847","name":"cLongitude","name_without_path":"cLongitude","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"150","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227848","object_id":"column-227848","name":"cLatitude","name_without_path":"cLatitude","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"150","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227849","object_id":"column-227849","name":"dOldDateTime","name_without_path":"dOldDateTime","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"16","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227850","object_id":"column-227850","name":"bAuditFlag","name_without_path":"bAuditFlag","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227851","object_id":"column-227851","name":"cAuditorNum","name_without_path":"cAuditorNum","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227852","object_id":"column-227852","name":"cAuditor","name_without_path":"cAuditor","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227853","object_id":"column-227853","name":"dAuditTime","name_without_path":"dAuditTime","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227854","object_id":"column-227854","name":"nMachine_Num","name_without_path":"nMachine_Num","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"10","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227855","object_id":"column-227855","name":"cDepCode","name_without_path":"cDepCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227856","object_id":"column-227856","name":"cCode","name_without_path":"cCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227857","object_id":"column-227857","name":"dDateTime","name_without_path":"dDateTime","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227858","object_id":"column-227858","name":"btaketm","name_without_path":"btaketm","description":null,"is_pk":false,"is_identity":false,"data_type":"bit","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227859","object_id":"column-227859","name":"rcheckinflag","name_without_path":"rcheckinflag","description":null,"is_pk":false,"is_identity":false,"data_type":"UFreference: nvarchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227860","object_id":"column-227860","name":"cOptPsn_Num","name_without_path":"cOptPsn_Num","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227861","object_id":"column-227861","name":"vReasonCode","name_without_path":"vReasonCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227862","object_id":"column-227862","name":"perJobNumber","name_without_path":"perJobNumber","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227863","object_id":"column-227863","name":"isOricard","name_without_path":"isOricard","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"1","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227864","object_id":"column-227864","name":"cCurrentAuditor","name_without_path":"cCurrentAuditor","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227865","object_id":"column-227865","name":"cStatusName","name_without_path":"cStatusName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"100","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227866","object_id":"column-227866","name":"cExamineApproveTypeName","name_without_path":"cExamineApproveTypeName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"100","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227867","object_id":"column-227867","name":"cSubmitBy","name_without_path":"cSubmitBy","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227868","object_id":"column-227868","name":"dSubmitOn","name_without_path":"dSubmitOn","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-227869","object_id":"column-227869","name":"VoucherID","name_without_path":"VoucherID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};