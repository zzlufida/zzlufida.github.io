window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v11686","name":"NE_ExpenseReconciliationInfo_View","subtype":"VIEW","is_user_defined":false,"description":null,"script":"CREATE VIEW [dbo].[NE_ExpenseReconciliationInfo_View]\r\nAS\r\n  \r\n   select newid() as ID        \r\n      ,MainBalance.[IOType] as IOType        \r\n      ,MainBalance.[Currency] as Currency        \r\n      ,MainBalance.[ExchangeRate] as ExchangeRate        \r\n      ,MainBalance.[SettlementID] as SettlementID        \r\n      ,MainBalance.NoteRegisterID as NoteRegister      \r\n      ,MainBalance.[BillID] as BillID  \r\n\t  ,MainBalance.IsPrivatePay as IsPrivatePay  \r\n\t  ,MainBalanceID    \r\n      ,SubBalance.[BalanceMoney] as [BalanceMoney]        \r\n      ,ExpenVocuh.BalanceMoney as SumBalanceMoney      \r\n      ,CASE WHEN NE_ExpenVouch.IsRedVouch=0 THEN    \r\n      CASE WHEN MainBalance.IsCNPayBank = 1      \r\n      THEN case when CN_AcctInfoView.AcctType=1 then CN_AcctInfoView.BankAcct else CN_AcctInfoView.csAcctNum end --NE_CNAccountInfo_View.BankCode      \r\n      ELSE       \r\n      bank.cBAccount      \r\n      END     \r\n    ELSE     \r\n      MainBalance.[ReceiptBankAccount]    \r\n    END AS cBAccount    \r\n   ,CASE WHEN NE_ExpenVouch.IsRedVouch=0 THEN    \r\n      CASE WHEN MainBalance.IsCNPayBank = 1      \r\n      THEN case when CN_AcctInfoView.AcctType=1 then CN_AcctInfoView.BankName else CN_AcctInfoView.AcctName end --NE_CNAccountInfo_View.BankName      \r\n      ELSE       \r\n      bank.cBName      \r\n      END    \r\n    ELSE      \r\n            MainBalance.[ReceiptBankCode] END AS PayBankID       \r\n      ,CASE WHEN NE_ExpenVouch.IsRedVouch=0 THEN    \r\n          MainBalance.[ReceiptBankCode]     \r\n       ELSE    \r\n    CASE WHEN MainBalance.IsCNPayBank = 1      \r\n      THEN case when CN_AcctInfoView.AcctType=1 then CN_AcctInfoView.BankName else CN_AcctInfoView.AcctName end--NE_CNAccountInfo_View.BankName      \r\n      ELSE       \r\n      bank.cBName      \r\n      END    \r\n    END as ReceiptName    \r\n\t,MainBalance.ReceiptName as cAccName           \r\n      ,CASE WHEN NE_ExpenVouch.IsRedVouch=0 THEN    \r\n    MainBalance.[ReceiptBankAccount]        \r\n    ELSE    \r\n       CASE WHEN MainBalance.IsCNPayBank = 1      \r\n      THEN case when CN_AcctInfoView.AcctType=1 then CN_AcctInfoView.BankAcct else CN_AcctInfoView.csAcctNum end--NE_CNAccountInfo_View.BankCode      \r\n      ELSE       \r\n      bank.cBAccount      \r\n      END     \r\n    END as ReceiptBankAccount     \r\n      ,MainBalance.[IsNetPay] as IsNetPay    \r\n       ,CASE WHEN MainBalance.IOType = 1     \r\n       THEN 6    \r\n       ELSE MainBalance.[PayState]    \r\n       END AS PayState     \r\n      ,MainBalance.[PayerID] as PayerID        \r\n      ,MainBalance.[IsPaySuccess] as IsPaySuccess        \r\n      ,MainBalance.[RegisterCheckFlag] as RegisterCheckFlag        \r\n      ,MainBalance.[OperationTypeCode] as OperationTypeCode        \r\n      ,MainBalance.[IsUsed] as IsUsed        \r\n      ,MainBalance.[VouchID] as VouchID        \r\n      ,SubBalance.[ExpenseVouchID] as  ExpenseVouchID    \r\n      ,MainBalance.[InternetBankPayID] AS InternetBankPayID    \r\n      ,NE_ExpenVouch.PrePayMoney  \r\n      ,NE_ExpenVouch.PrePayLocalMoney\r\n      ,NE_ExpenVouch.Code as ExpenVouchID\r\n       \r\nfrom NE_BalanceInfo as MainBalance  with(nolock)       \r\ninner join       \r\n      (    \r\n    \r\n  select       \r\n    ExpenseBalance.MainBalanceID as MainBalanceID,      \r\n    ExpenseBalance.ExpenseVouchID as ExpenseVouchID,      \r\n    sum(ExpenseBalance.BalanceMoney)as BalanceMoney        \r\n  from   NE_ExpenseBalanceInfo ExpenseBalance with(nolock)      \r\n  group by ExpenseBalance.ExpenseVouchID,ExpenseBalance.MainBalanceID    \r\n   ) SubBalance  on MainBalance.ID=SubBalance.MainBalanceID  and MainBalance.IsVerify = 0      \r\n      inner join       \r\n      (      \r\n    select       \r\n    ExpenseBalance.ExpenseVouchID as ExpenseVouchID,      \r\n    sum(ExpenseBalance.BalanceMoney)as BalanceMoney        \r\n    from   NE_ExpenseBalanceInfo ExpenseBalance  with(nolock)    \r\n    group by       \r\n    ExpenseBalance.ExpenseVouchID     \r\n      ) ExpenVocuh on ExpenVocuh.ExpenseVouchID = SubBalance.ExpenseVouchID     \r\n      LEFT JOIN NE_ExpenVouch with(nolock) ON  ExpenVocuh.ExpenseVouchID=NE_ExpenVouch.ID    \r\n      left join  (select distinct DepositBankCode,DepositBank,BankAccount from NE_PersonAccount_View with(nolock))  NE_PersonAccount_View on NE_PersonAccount_View.BankAccount = MainBalance.[ReceiptBankAccount]      \r\n      --modify by panglh at 20200403 for当银行账号禁用后，网报无法显示付款银行,因为下面视图引用的其他视图有是否启用的条件\r\n\t  --LEFT JOIN NE_CNAccountInfo_View with(nolock) ON NE_CNAccountInfo_View.ID = MainBalance.PayBankID\r\n\t  left join CN_AcctInfoView on  CN_AcctInfoView.ID=MainBalance.PayBankID\r\n      LEFT JOIN bank with(nolock) ON bank.cBCode = MainBalance.PayBankID","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"NE_ExpenseReconciliationInfo_View"},{"field":"Type","value":"View"}],"columns":[{"id":"column-249216","object_id":"column-249216","name":"ID","name_without_path":"ID","description":null,"is_pk":false,"is_identity":false,"data_type":"uniqueidentifier","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249217","object_id":"column-249217","name":"IOType","name_without_path":"IOType","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249218","object_id":"column-249218","name":"Currency","name_without_path":"Currency","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249219","object_id":"column-249219","name":"ExchangeRate","name_without_path":"ExchangeRate","description":null,"is_pk":false,"is_identity":false,"data_type":"float","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249220","object_id":"column-249220","name":"SettlementID","name_without_path":"SettlementID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249221","object_id":"column-249221","name":"NoteRegister","name_without_path":"NoteRegister","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249222","object_id":"column-249222","name":"BillID","name_without_path":"BillID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249223","object_id":"column-249223","name":"IsPrivatePay","name_without_path":"IsPrivatePay","description":null,"is_pk":false,"is_identity":false,"data_type":"bit","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249224","object_id":"column-249224","name":"MainBalanceID","name_without_path":"MainBalanceID","description":null,"is_pk":false,"is_identity":false,"data_type":"uniqueidentifier","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249225","object_id":"column-249225","name":"BalanceMoney","name_without_path":"BalanceMoney","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 2","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249226","object_id":"column-249226","name":"SumBalanceMoney","name_without_path":"SumBalanceMoney","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 2","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249227","object_id":"column-249227","name":"cBAccount","name_without_path":"cBAccount","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"100","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249228","object_id":"column-249228","name":"PayBankID","name_without_path":"PayBankID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249229","object_id":"column-249229","name":"ReceiptName","name_without_path":"ReceiptName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249230","object_id":"column-249230","name":"cAccName","name_without_path":"cAccName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249231","object_id":"column-249231","name":"ReceiptBankAccount","name_without_path":"ReceiptBankAccount","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"100","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249232","object_id":"column-249232","name":"IsNetPay","name_without_path":"IsNetPay","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249233","object_id":"column-249233","name":"PayState","name_without_path":"PayState","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249234","object_id":"column-249234","name":"PayerID","name_without_path":"PayerID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249235","object_id":"column-249235","name":"IsPaySuccess","name_without_path":"IsPaySuccess","description":null,"is_pk":false,"is_identity":false,"data_type":"bit","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249236","object_id":"column-249236","name":"RegisterCheckFlag","name_without_path":"RegisterCheckFlag","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249237","object_id":"column-249237","name":"OperationTypeCode","name_without_path":"OperationTypeCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249238","object_id":"column-249238","name":"IsUsed","name_without_path":"IsUsed","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249239","object_id":"column-249239","name":"VouchID","name_without_path":"VouchID","description":null,"is_pk":false,"is_identity":false,"data_type":"uniqueidentifier","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249240","object_id":"column-249240","name":"ExpenseVouchID","name_without_path":"ExpenseVouchID","description":null,"is_pk":false,"is_identity":false,"data_type":"uniqueidentifier","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249241","object_id":"column-249241","name":"InternetBankPayID","name_without_path":"InternetBankPayID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249242","object_id":"column-249242","name":"PrePayMoney","name_without_path":"PrePayMoney","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"12, 2","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249243","object_id":"column-249243","name":"PrePayLocalMoney","name_without_path":"PrePayLocalMoney","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"12, 2","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249244","object_id":"column-249244","name":"ExpenVouchID","name_without_path":"ExpenVouchID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};