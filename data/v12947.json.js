window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v12947","name":"v_ex_cost_inhandcost","subtype":"VIEW","is_user_defined":false,"description":null,"script":"CREATE VIEW dbo.v_ex_cost_inhandcost\r\nas\r\nselect t.cinvcode , t.imonth , \r\n--(case when sum(isnull(t.inum,0)) = 0 then 0 else sum(isnull(t.iImoney,0))/sum(isnull(t.inum,0)) end) as fcost\r\ncase when sum(isnull(t.inum,0)) = 0 then 0 else sum(isnull(t.imoney,0))/sum(isnull(t.inum,0)) end as fcost \r\nfrom (select ia_summary.cinvcode ,\r\n\t(case when exists (select 1 from accinformation  where cname = N'cValueStyle'  and isnull(cvalue,cdefault)=N'按存货核算') then\r\n\t\tcase when inventory.cValueType= N'移动平均法' or inventory.cValueType= N'先进先出法' or inventory.cValueType= N'后进先出法' or inventory.cValueType= N'个别计价法' \r\n\t\t     then ia_summary.imonth\r\n\t\t     else ia_summary.imonth + 1\r\n\t\tend\r\n\telse \r\n\t\tcase when isnull(ia_summary.cwhcode,'')='' \r\n\t\t\tthen ia_summary.imonth\r\n\t\t\telse\r\n\t\t\t\tcase when warehouse.cWhValueStyle= N'移动平均法' or warehouse.cWhValueStyle= N'先进先出法' or warehouse.cWhValueStyle= N'后进先出法' or warehouse.cWhValueStyle= N'个别计价法' \r\n\t\t\t\t     then ia_summary.imonth\r\n\t\t\t\t     else ia_summary.imonth + 1\r\n\t\t\t\tend\r\n\t\t\tend\r\n\tend) as imonth ,inum , iimoney  ,imoney\r\n\tfrom ia_summary \r\n\tleft join inventory on ia_summary.cinvcode = inventory.cinvcode \r\n\tleft join warehouse on warehouse.cwhcode = ia_summary.cwhcode\r\n)t\r\ngroup by t.cinvcode , t.imonth","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"v_ex_cost_inhandcost"},{"field":"Type","value":"View"}],"columns":[{"id":"column-333246","object_id":"column-333246","name":"cinvcode","name_without_path":"cinvcode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-333247","object_id":"column-333247","name":"imonth","name_without_path":"imonth","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-333248","object_id":"column-333248","name":"fcost","name_without_path":"fcost","description":null,"is_pk":false,"is_identity":false,"data_type":"float","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};