window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v12818","name":"v_eb_ref_pos","subtype":"VIEW","is_user_defined":false,"description":null,"script":"create view v_eb_ref_pos as\r\n\r\nselect   '' as selcol,inv.cwhcode,w.cwhname,inv.cposcode,p.cposname,\r\ninv.cbatch,isnull(inv.cfree1,'') as cfree1,isnull(inv.cfree2,'') as cfree2,isnull(inv.cfree3,'') as cfree3,isnull(inv.cfree4,'') as cfree4,\r\nisnull(inv.cfree5,'') as cfree5,isnull(inv.cfree6,'') as cfree6,isnull(inv.cfree7,'') as cfree7,isnull(inv.cfree8,'') as cfree8,\r\nisnull(inv.cfree9,'') as cfree9,isnull(inv.cfree10,'') as cfree10,\r\nisnull(inv.cmassunit,'') as cmassunit,inv.imassdate,inv.dmadedate,inv.dvdate,inv.iexpiratdatecalcu,inv.cexpirationdate,inv.dexpirationdate,\r\n a.cbatchproperty1,a.cbatchproperty2,a.cbatchproperty3,a.cbatchproperty4,a.cbatchproperty5,a.cbatchproperty6,a.cbatchproperty7,a.cbatchproperty8,a.cbatchproperty9,a.cbatchproperty10  ,\r\n (case isnull(inv.cmassunit,0) when 0 then N'' when 1 then N'年' when 2 then N'月' when 3 then N'日' else null end) as cmassunit1,--保质期单位,\r\n v1.enumname iexpiratdatecalcu1,--as 有效期推算方式,\r\n inv.cinvcode ,(sum(inv.iQuantity) /max(ISNULL(cp.iChangRate ,1)) )  as 结存数量\r\n\r\n from invpositionsum inv inner join inventory i on inv.cinvcode=i.cinvcode inner join warehouse w on inv.cwhcode=w.cwhcode\r\n  left join invposcontrapose invpos on inv.cposcode=invpos.cposcode and invpos.cinvcode=inv.cinvcode\r\n  left join position p on p.cposcode=inv.cposcode\r\n left join vendor v on inv.cvmivencode=v.cvencode\r\n left join v_aa_enum v1 on v1.enumcode=inv.iexpiratdatecalcu and v1.enumtype=N'scm.expiratdatecalcu'\r\n left join computationunit c on i.cstcomunitcode=c.ccomunitcode and i.igrouptype=1\r\n left join aa_batchproperty a on a.cinvcode=inv.cinvcode and a.cbatch=inv.cbatch and a.cfree1=inv.cfree1 and  a.cfree2=inv.cfree2 and a.cfree3=inv.cfree3 and a.cfree4=inv.cfree4 and a.cfree5=inv.cfree5 and\r\na.cfree6=inv.cfree6 and a.cfree7=inv.cfree7 and a.cfree8=inv.cfree8 and a.cfree9=inv.cfree9 and a.cfree10=inv.cfree10\r\nleft join eb_item it on it.cInvCode =inv.cinvcode  and isnull(inv.cfree1,'')=isnull(it.cfree1,'')\r\nand isnull(inv.cfree2,'')=isnull(it.cfree2,'') and isnull(inv.cfree3,'')=isnull(it.cfree3,'')\r\nand isnull(inv.cfree4,'')=isnull(it.cfree4,'') and isnull(inv.cfree5,'')=isnull(it.cfree5,'') and\r\n isnull(inv.cfree6,'')=isnull(it.cfree6,'')\r\nand isnull(inv.cfree7,'')=isnull(it.cfree7,'') and isnull(inv.cfree8,'')=isnull(it.cfree8,'') and\r\nisnull(inv.cfree9,'')=isnull(it.cfree9,'')\r\nand isnull(inv.cfree10,'')=isnull(it.cfree10,'')\r\nleft join computationunit cp on cp.cComunitCode =it.cEBUnitID\r\n  where    (inv.iquantity>0 or (i.igrouptype =2 and inv.inum>0) )\r\ngroup by inv.cinvcode ,inv.cwhcode,w.cwhname,inv.cposcode,p.cposname,\r\ninv.cbatch,isnull(inv.cfree1,'') ,isnull(inv.cfree2,'') ,isnull(inv.cfree3,''),isnull(inv.cfree4,'') ,\r\nisnull(inv.cfree5,''),isnull(inv.cfree6,'') ,isnull(inv.cfree7,'') ,isnull(inv.cfree8,'') ,\r\nisnull(inv.cfree9,''),isnull(inv.cfree10,'') ,isnull(inv.cmassunit,'') ,inv.imassdate,inv.dmadedate,inv.dvdate,inv.iexpiratdatecalcu,v1.enumname,inv.cexpirationdate,inv.dexpirationdate,\r\n a.cbatchproperty1,a.cbatchproperty2,a.cbatchproperty3,a.cbatchproperty4,a.cbatchproperty5,a.cbatchproperty6,a.cbatchproperty7,a.cbatchproperty8,a.cbatchproperty9,a.cbatchproperty10","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"v_eb_ref_pos"},{"field":"Type","value":"View"}],"columns":[{"id":"column-320703","object_id":"column-320703","name":"selcol","name_without_path":"selcol","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"1","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320704","object_id":"column-320704","name":"cwhcode","name_without_path":"cwhcode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"10","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320705","object_id":"column-320705","name":"cwhname","name_without_path":"cwhname","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320706","object_id":"column-320706","name":"cposcode","name_without_path":"cposcode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320707","object_id":"column-320707","name":"cposname","name_without_path":"cposname","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320708","object_id":"column-320708","name":"cbatch","name_without_path":"cbatch","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320709","object_id":"column-320709","name":"cfree1","name_without_path":"cfree1","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320710","object_id":"column-320710","name":"cfree2","name_without_path":"cfree2","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320711","object_id":"column-320711","name":"cfree3","name_without_path":"cfree3","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320712","object_id":"column-320712","name":"cfree4","name_without_path":"cfree4","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320713","object_id":"column-320713","name":"cfree5","name_without_path":"cfree5","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320714","object_id":"column-320714","name":"cfree6","name_without_path":"cfree6","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320715","object_id":"column-320715","name":"cfree7","name_without_path":"cfree7","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320716","object_id":"column-320716","name":"cfree8","name_without_path":"cfree8","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320717","object_id":"column-320717","name":"cfree9","name_without_path":"cfree9","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320718","object_id":"column-320718","name":"cfree10","name_without_path":"cfree10","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320719","object_id":"column-320719","name":"cmassunit","name_without_path":"cmassunit","description":null,"is_pk":false,"is_identity":false,"data_type":"smallint","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320720","object_id":"column-320720","name":"imassdate","name_without_path":"imassdate","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320721","object_id":"column-320721","name":"dmadedate","name_without_path":"dmadedate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320722","object_id":"column-320722","name":"dvdate","name_without_path":"dvdate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320723","object_id":"column-320723","name":"iexpiratdatecalcu","name_without_path":"iexpiratdatecalcu","description":null,"is_pk":false,"is_identity":false,"data_type":"smallint","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320724","object_id":"column-320724","name":"cexpirationdate","name_without_path":"cexpirationdate","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"10","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320725","object_id":"column-320725","name":"dexpirationdate","name_without_path":"dexpirationdate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320726","object_id":"column-320726","name":"cbatchproperty1","name_without_path":"cbatchproperty1","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 8","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320727","object_id":"column-320727","name":"cbatchproperty2","name_without_path":"cbatchproperty2","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 8","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320728","object_id":"column-320728","name":"cbatchproperty3","name_without_path":"cbatchproperty3","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 8","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320729","object_id":"column-320729","name":"cbatchproperty4","name_without_path":"cbatchproperty4","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 8","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320730","object_id":"column-320730","name":"cbatchproperty5","name_without_path":"cbatchproperty5","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 8","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320731","object_id":"column-320731","name":"cbatchproperty6","name_without_path":"cbatchproperty6","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"120","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320732","object_id":"column-320732","name":"cbatchproperty7","name_without_path":"cbatchproperty7","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"120","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320733","object_id":"column-320733","name":"cbatchproperty8","name_without_path":"cbatchproperty8","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"120","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320734","object_id":"column-320734","name":"cbatchproperty9","name_without_path":"cbatchproperty9","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"120","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320735","object_id":"column-320735","name":"cbatchproperty10","name_without_path":"cbatchproperty10","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320736","object_id":"column-320736","name":"cmassunit1","name_without_path":"cmassunit1","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"1","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320737","object_id":"column-320737","name":"iexpiratdatecalcu1","name_without_path":"iexpiratdatecalcu1","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"150","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320738","object_id":"column-320738","name":"cinvcode","name_without_path":"cinvcode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-320739","object_id":"column-320739","name":"结存数量","name_without_path":"结存数量","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};