window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v14185","name":"vw_u8_im_operation_Cyc_analyse","subtype":"VIEW","is_user_defined":false,"description":null,"script":"create view vw_u8_im_operation_Cyc_analyse\r\nas \r\nselect\r\nv_im_invoice.ddate as invoicedate,--过滤条件使用\r\nV_IM_Credit.ccreditcode,--过滤条件使用\r\nV_IM_Credit.dcreditdate,--过滤条件使用\r\nRdRecord.ddate ,--过滤条件使用\r\nt.*,\r\nvw_u8_im_order.ccode,           --进口订单号\r\nvw_u8_im_order.ddate as orderdate ,      --订单日期\r\nvw_u8_im_order.ccloser,\r\nvw_u8_im_order.cmaker,\r\ninvoicedate.firstinvoicedate,\r\ninvoicedate.lastinvoicedate,\r\ncreditdate.firstcreditdate,\r\ncreditdate.lastcreditdate,\r\nRD_record.firstrddate,\r\nRD_record.lastrddate,\r\nDATEDIFF(day,vw_u8_im_order.ddate , \r\nRD_record.lastrddate)as workcyc, --操作周期\r\n(\tcase when t.orderstate>0 then( \r\n\t\tcase when isnull(vw_u8_im_order.ccloser,'')=''\r\n\t\tthen (select enumname from v_aa_enum where enumtype =N'IM.State' and enumcode ='1' )\r\n\t\telse (select enumname from v_aa_enum where enumtype =N'IM.State' and enumcode ='2' )\r\n\t\tend)\r\n\telse (select enumname from v_aa_enum where enumtype =N'IM.State' and enumcode ='0') \r\nend ) as  cstate\r\nfrom\r\n(\r\n\tselect\r\n\tVw_U8_im_orderdetail.id,\r\n\tsum(case when Vw_U8_im_orderdetail.fquantity*(1-Vw_U8_im_orderdetail.foverflowrange*0.01)<=Vw_U8_im_orderdetail.finqty then 0 else 1\r\n\tend) as orderstate,  \r\n\tmin(vw_u8_im_orderdetail.darrivedate) as dplanarrivaldate\t--要求到货日期\r\n\tfrom vw_u8_im_orderdetail\r\n\tinner join inventory  on Vw_U8_im_orderdetail.cinvcode=inventory.cinvcode and inventory.bservice=0 and inventory.binvtype=0\r\n\tgroup by Vw_U8_im_orderdetail.id\r\n)as t\r\ninner join vw_u8_im_order on vw_u8_im_order.id = t.id\r\nleft join v_im_invoice on v_im_invoice.cgeneralordercode=vw_u8_im_order.ccode\r\nleft join V_IM_Credit on V_IM_Credit.cgeneralordercode=vw_u8_im_order.ccode\r\nleft join RdRecord01 RdRecord  on RdRecord.cordercode=vw_u8_im_order.ccode and (RdRecord.csource= N'进口发票' or RdRecord.csource=N'进口订单')\r\nleft join (\r\n\tselect v_im_invoice.cgeneralordercode,  \r\n\tmin(v_im_invoice.ddate) as firstinvoicedate  ,--最早发票日期\r\n\tmax(v_im_invoice.ddate) as lastinvoicedate  --最晚发票日期\r\n\tfrom v_im_invoice group by cgeneralordercode\r\n\t\t) \r\ninvoicedate on invoicedate.cgeneralordercode=vw_u8_im_order.ccode\r\nleft join (\r\n\tselect v_im_credit.cgeneralordercode,  \r\n\tmin(v_im_credit.dcreditdate) as firstcreditdate  ,--最早开证日期\r\n\tmax(v_im_credit.dcreditdate) as lastcreditdate  --最晚开证日期\r\n\tfrom v_im_credit group by cgeneralordercode\r\n\t) \r\ncreditdate on creditdate.cgeneralordercode=vw_u8_im_order.ccode\r\nleft join (\r\n\tselect RdRecord.cordercode, \r\n\tmin(RdRecord.ddate) as firstRddate  ,--最早入库日期\r\n\tmax(RdRecord.ddate) as lastrddate  --最晚入库日期\r\n\tfrom RdRecord01 RdRecord \r\n\twhere (RdRecord.csource= N'进口发票' or RdRecord.csource=N'进口订单')\r\n\tgroup by cordercode\r\n\t)  \r\nRd_Record on Rd_Record.cordercode=vw_u8_im_order.ccode","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"vw_u8_im_operation_Cyc_analyse"},{"field":"Type","value":"View"}],"columns":[{"id":"column-419528","object_id":"column-419528","name":"invoicedate","name_without_path":"invoicedate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419529","object_id":"column-419529","name":"ccreditcode","name_without_path":"ccreditcode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419530","object_id":"column-419530","name":"dcreditdate","name_without_path":"dcreditdate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419531","object_id":"column-419531","name":"ddate","name_without_path":"ddate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419532","object_id":"column-419532","name":"id","name_without_path":"id","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419533","object_id":"column-419533","name":"orderstate","name_without_path":"orderstate","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419534","object_id":"column-419534","name":"dplanarrivaldate","name_without_path":"dplanarrivaldate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419535","object_id":"column-419535","name":"ccode","name_without_path":"ccode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419536","object_id":"column-419536","name":"orderdate","name_without_path":"orderdate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419537","object_id":"column-419537","name":"ccloser","name_without_path":"ccloser","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419538","object_id":"column-419538","name":"cmaker","name_without_path":"cmaker","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419539","object_id":"column-419539","name":"firstinvoicedate","name_without_path":"firstinvoicedate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419540","object_id":"column-419540","name":"lastinvoicedate","name_without_path":"lastinvoicedate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419541","object_id":"column-419541","name":"firstcreditdate","name_without_path":"firstcreditdate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419542","object_id":"column-419542","name":"lastcreditdate","name_without_path":"lastcreditdate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419543","object_id":"column-419543","name":"firstrddate","name_without_path":"firstrddate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419544","object_id":"column-419544","name":"lastrddate","name_without_path":"lastrddate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419545","object_id":"column-419545","name":"workcyc","name_without_path":"workcyc","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-419546","object_id":"column-419546","name":"cstate","name_without_path":"cstate","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"150","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};