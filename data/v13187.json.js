window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v13187","name":"v_fc_OpPlan","subtype":"VIEW","is_user_defined":false,"description":null,"script":"create view v_fc_OpPlan  \r\nas\r\nselect mom.MoCode,ord.SortSeq,inv.cInvCode,inv.cInvName,inv.cInvStd,a.Qty,inv.cEngineerFigNo,\r\n       --day(mor.duedate-mor.startdate) as MoDay,\r\n       DateDiff(day,coalesce(mo.StartDate,mor.FUSD),coalesce(mo.DueDate,mor.LUCD))+1 as MoDay,\r\n       b.OpSeq,b.Description,b.MoRoutingID,b.MoRoutingDId,\r\n       --(case ord.OrderType when 1 then '销售订单' when 3 then '出口订单' end) as OrderType,\r\n       OrderType = e.enumname,\r\n       ord.OrderCode,ord.OrderSeq,ord.MDeptCode,dep.cDepName as MDeptName,\r\n       (b.completeqty - b.BalRefusedQty - b.BalScrapQty - b.BalDeclareQty) as ProQty,\r\n       --mo.StartDate,mo.DueDate,\r\n\t   StartDate = coalesce(mo.StartDate,mor.FUSD),\r\n       DueDate=coalesce(mo.DueDate,mor.LUCD), \r\n       --(a.Qty-b.completeqty) as wProQty,\r\n       (a.Qty-b.completeqty + b.BalRefusedQty + b.BalScrapQty + b.BalDeclareQty) as wProQty,\r\n       isnull((select sum(qty) from sfc_moroutingshift where moroutingdid=b.moroutingdid),0) as PGQty,\r\n       day(b.DueDate-b.StartDate) as OpDay,(DateDiff(day,b.DueDate,getdate())) as NowDay       \r\n       ,d.AuxUnitCode,u.cComUnitname as AuxUnitname,d.ChangeRate\r\n       ,AuxProQty = case when isnull(d.ChangeRate,0)=0 then null else (b.completeqty - b.BalRefusedQty - b.BalScrapQty - b.BalDeclareQty)/d.ChangeRate end\r\n       ,AuxWProQty = case when isnull(d.ChangeRate,0)=0 then null else (a.Qty-b.completeqty + b.BalRefusedQty + b.BalScrapQty + b.BalDeclareQty)/d.ChangeRate end\r\nfrom sfc_morouting a left outer join\r\n     v_sfc_moroutingdetail b on a.moroutingid=b.moroutingid left outer join\r\n     mom_order mom on  a.moid=mom.moid left outer join \r\n     mom_orderdetail ord on ord.modid=a.modid left outer join \r\n     mom_morder mo on mo.modid=ord.modid left outer join \r\n     inventory inv on ord.invcode=inv.cinvcode left outer join\r\n     --mom_morder mor on mor.modid=ord.modid left outer join \r\n     mom_remorder mor on mor.modid=ord.modid left outer join \r\n     department dep on dep.cdepcode=ord.mdeptcode\r\n     left outer join aa_enum e on e.enumtype = 'MO.OrderType' and e.localeid = dbo.UDF_GetLocaleID() and  e.EnumIndex = ord.OrderType  \r\n     left outer join sfc_moroutingdetail d on b.moroutingdid =d.moroutingdid\r\n\t left outer join ComputationUnit as u with (nolock) on u.cComunitCode = d.AuxUnitCode","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"v_fc_OpPlan"},{"field":"Type","value":"View"}],"columns":[{"id":"column-355955","object_id":"column-355955","name":"MoCode","name_without_path":"MoCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355956","object_id":"column-355956","name":"SortSeq","name_without_path":"SortSeq","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355957","object_id":"column-355957","name":"cInvCode","name_without_path":"cInvCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355958","object_id":"column-355958","name":"cInvName","name_without_path":"cInvName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355959","object_id":"column-355959","name":"cInvStd","name_without_path":"cInvStd","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355960","object_id":"column-355960","name":"Qty","name_without_path":"Qty","description":null,"is_pk":false,"is_identity":false,"data_type":"Udt_QTY: decimal","data_length":"28, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355961","object_id":"column-355961","name":"cEngineerFigNo","name_without_path":"cEngineerFigNo","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355962","object_id":"column-355962","name":"MoDay","name_without_path":"MoDay","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355963","object_id":"column-355963","name":"OpSeq","name_without_path":"OpSeq","description":null,"is_pk":false,"is_identity":false,"data_type":"nchar","data_length":"4","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355964","object_id":"column-355964","name":"Description","name_without_path":"Description","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355965","object_id":"column-355965","name":"MoRoutingID","name_without_path":"MoRoutingID","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355966","object_id":"column-355966","name":"MoRoutingDId","name_without_path":"MoRoutingDId","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355967","object_id":"column-355967","name":"OrderType","name_without_path":"OrderType","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"150","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355968","object_id":"column-355968","name":"OrderCode","name_without_path":"OrderCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355969","object_id":"column-355969","name":"OrderSeq","name_without_path":"OrderSeq","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355970","object_id":"column-355970","name":"MDeptCode","name_without_path":"MDeptCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355971","object_id":"column-355971","name":"MDeptName","name_without_path":"MDeptName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355972","object_id":"column-355972","name":"ProQty","name_without_path":"ProQty","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"31, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355973","object_id":"column-355973","name":"StartDate","name_without_path":"StartDate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355974","object_id":"column-355974","name":"DueDate","name_without_path":"DueDate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355975","object_id":"column-355975","name":"wProQty","name_without_path":"wProQty","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"32, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355976","object_id":"column-355976","name":"PGQty","name_without_path":"PGQty","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 6","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355977","object_id":"column-355977","name":"OpDay","name_without_path":"OpDay","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355978","object_id":"column-355978","name":"NowDay","name_without_path":"NowDay","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355979","object_id":"column-355979","name":"AuxUnitCode","name_without_path":"AuxUnitCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"35","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355980","object_id":"column-355980","name":"AuxUnitname","name_without_path":"AuxUnitname","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355981","object_id":"column-355981","name":"ChangeRate","name_without_path":"ChangeRate","description":null,"is_pk":false,"is_identity":false,"data_type":"Udt_ChangeRate: decimal","data_length":"22, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355982","object_id":"column-355982","name":"AuxProQty","name_without_path":"AuxProQty","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 7","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-355983","object_id":"column-355983","name":"AuxWProQty","name_without_path":"AuxWProQty","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};