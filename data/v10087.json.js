window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v10087","name":"caq_coplan2","subtype":"VIEW","is_user_defined":false,"description":null,"script":"create view caq_coplan2 \r\nas\r\n\t--From工艺路线\r\n\tselect parentid=bom_parent.ParentId,\r\n\t\tBomId = bom_parent.BomId,\r\n\t\tWcCode=sfc_workcenter.WcCode,\r\n\t\tDept=sfc_workcenter.DeptCode,\r\n\t\tltrim(bom_bom.Version) Version,\r\n\t\tltrim(bom_bom.IdentCode) IdentCode\r\n\tfrom bom_parent,bom_bom,sfc_proutingpart,sfc_prouting,sfc_proutingdetail,sfc_workcenter\r\n\twhere bom_parent.BomId = bom_bom.BomId and\r\n\t\tsfc_proutingpart.PRoutingId = sfc_prouting.PRoutingId and\r\n\t\tbom_parent.ParentId = sfc_proutingpart.PartId and\r\n\t\t(bom_bom.VersionEffDate >= sfc_prouting.VersionEffDate and  bom_bom.VersionEffDate < sfc_prouting.VersionEndDate and bom_bom.BomType = 1) and\r\n\t\t--or (bom_bom.IdentCode = sfc_prouting.IdentCode and bom_bom.BomType = 2)) and\r\n\t\tsfc_proutingdetail.PRoutingId = sfc_prouting.PRoutingId and\r\n\t\tsfc_proutingdetail.WcId = sfc_workcenter.WcId\r\n\tunion\r\n\t---替代工艺路线与最近生效的BOM匹配\r\n\tselect T.parentid,bom_bom.BomId,WcCode,Dept,ltrim(bom_bom.Version) Version,ltrim(T.IdentCode) IdentCode\r\n\tfrom (\r\n\t\t\tselect A.ParentId as parentid, F.WcCode as WcCode, F.DeptCode as Dept,D.IdentCode,max(B.VersionEffDate) as VersionEffDate\r\n\t\t       --A.BomId as BomId ,  --B.Version,\r\n\t\t\tfrom bom_parent A\r\n\t\t\tinner join bom_bom B on A.Bomid=B.bomID \r\n\t\t\tinner join sfc_proutingpart C on A.ParentId = C.PartId\r\n\t\t\tinner join sfc_prouting D on C.PRoutingId = D.PRoutingId\r\n\t\t\tinner join sfc_proutingdetail E on D.PRoutingId=E.PRoutingId\r\n\t\t\tinner join sfc_workcenter F on E.WcId = F.WcId\r\n\t\t\twhere isnull(D.IdentCode,'') <> ''\r\n\t\t\tgroup by A.ParentId ,F.WcCode, F.DeptCode,D.IdentCode\r\n\t\t) T\r\n\t\tinner join  bom_parent  on T.ParentId=bom_parent.ParentId\r\n\t\tinner join bom_bom on bom_parent.Bomid=bom_bom.Bomid and T.VersionEffDate = bom_bom.VersionEffDate\r\n\r\n\tunion\r\n\t--From物料清单\r\n\t \tselect distinct a.parentid, b.bomid,''as Wccode,d.DrawDeptCode,ltrim(b.version) version,ltrim(b.identcode) identcode from bom_parent a, bom_bom b , bom_opcomponent c, bom_opcomponentopt d\r\n\t \twhere a.bomid=b.bomid and b.bomid=c.bomid and c.optionsid=d.optionsid --and c.byproductflag=0\r\n\t\tand a.parentid not in (select distinct partid from sfc_proutingpart)","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"caq_coplan2"},{"field":"Type","value":"View"}],"columns":[{"id":"column-173871","object_id":"column-173871","name":"parentid","name_without_path":"parentid","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173872","object_id":"column-173872","name":"BomId","name_without_path":"BomId","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173873","object_id":"column-173873","name":"WcCode","name_without_path":"WcCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"8","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173874","object_id":"column-173874","name":"Dept","name_without_path":"Dept","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173875","object_id":"column-173875","name":"Version","name_without_path":"Version","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173876","object_id":"column-173876","name":"IdentCode","name_without_path":"IdentCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};