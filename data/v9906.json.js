window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v9906","name":"AP_V_ApplyPayCal","subtype":"VIEW","is_user_defined":false,"description":null,"script":"CREATE VIEW [dbo].[AP_V_ApplyPayCal]   \r\nAS  \r\nSELECT Apps.cSource,iBVid,BalancesGuid,cDwCode,max(iTaxRate) as iTaxRate,sum(iSrcCancelAmt_f) as iSrcCancelAmt_f,sum(iSrcCancelAmt) as iSrcCancelAmt,\r\n  \r\n-- 以下2字段取消注释  \r\n  --QYF 付款申请单无税金额为负数 U82021102100047\r\n  --sum(case when Apps.cLineCloser is null then (case when iNotRateApplyAmt_f is null then iApplyAmt_f else ISNULL(iNotRateApplyAmt_f,0) end) else ISNULL (iNRSrcPayAmt_f,0) end) as iNRSrcApplyAmt_f,  \r\n  --sum(case when Apps.cLineCloser is null then (case when iNotRateApplyAmt is null then iApplyAmt_f else ISNULL(iNotRateApplyAmt,0) end)else ISNULL (iNRSrcPayAmt,0) end) as iNRSrcApplyAmt,\r\n  sum((case when Apps.cLineCloser is null then (case when iNotRateApplyAmt_f is null then iApplyAmt_f else ISNULL(iNotRateApplyAmt_f,0) end) else ISNULL (iNRSrcPayAmt_f,0) end)-isnull(iNRSrcCancelAmt_f,0)) as iNRSrcApplyAmt_f,  \r\n  sum((case when Apps.cLineCloser is null then (case when iNotRateApplyAmt is null then iApplyAmt else ISNULL(iNotRateApplyAmt,0) end) else ISNULL (iNRSrcPayAmt,0) end)-isnull(iNRSrcCancelAmt,0)) as iNRSrcApplyAmt,\r\n  \r\n  sum((case when Apps.cLineCloser is null then iSrcApplyAmt_f else ISNULL(iSrcPayAmt_f,0) end)) as iSrcApplyAmt_f,  \r\n  sum((case when Apps.cLineCloser is null then iSrcApplyAmt else ISNULL(iSrcPayAmt,0) end)) as iSrcApplyAmt,\r\n \r\n  sum((case when Apps.cLineCloser is null then iSrcApplyAmt_f else ISNULL(iSrcPayAmt_f,0) end)-ISNULL(iSrcCancelAmt_f,0)) as iBillAmt_f,  \r\n  sum((case when Apps.cLineCloser is null then iSrcApplyAmt else ISNULL(iSrcPayAmt,0) end)-ISNULL(iSrcCancelAmt,0)) as iBillAmt \r\n  \r\nFROM AP_ApplyPayVouchs Apps  \r\n  INNER JOIN AP_ApplyPayVouch App ON Apps.PID=App.PID   \r\n  LEFT JOIN (  \r\n    select PID,PIDs,sum(iSrcPayAmt_f) as iSrcPayAmt_f,sum(iSrcPayAmt) as iSrcPayAmt,\r\n    sum(iNotRatePayAmt_f) as iNRSrcPayAmt_f,sum(iNotRatePayAmt) as iNRSrcPayAmt,\r\n    sum(iSrcCancelAmt_f) as iSrcCancelAmt_f,sum(iSrcCancelAmt) as iSrcCancelAmt  \r\n    --QYF 付款申请单无税金额为负数 U82021102100047\r\n    ,convert(decimal(18,2),sum(Case when isnull(iDiscountTaxType,0)=0 then iSrcCancelAmt_f/(1 + iTaxRate / 100) else iSrcCancelAmt_f*(1 - iTaxRate / 100) end),2) as iNRSrcCancelAmt_f\r\n    ,convert(decimal(18,2),sum(Case when isnull(iDiscountTaxType,0)=0 then iSrcCancelAmt/(1 + iTaxRate / 100) else iSrcCancelAmt*(1 - iTaxRate / 100) end),2) as iNRSrcCancelAmt\r\n    from AP_PayDetail Group by PID,PIDs  \r\n  ) AS Pay ON Apps.AutoID=Pay.PIDs  \r\nWHERE ISNULL(Apps.cSource,'')<>''  \r\nGROUP BY Apps.cSource,iBVid,BalancesGuid,cDwCode","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"AP_V_ApplyPayCal"},{"field":"Type","value":"View"}],"columns":[{"id":"column-163509","object_id":"column-163509","name":"cSource","name_without_path":"cSource","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"10","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-163510","object_id":"column-163510","name":"iBVid","name_without_path":"iBVid","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-163511","object_id":"column-163511","name":"BalancesGuid","name_without_path":"BalancesGuid","description":null,"is_pk":false,"is_identity":false,"data_type":"uniqueidentifier","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-163512","object_id":"column-163512","name":"cDwCode","name_without_path":"cDwCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-163513","object_id":"column-163513","name":"iTaxRate","name_without_path":"iTaxRate","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"30, 10","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-163514","object_id":"column-163514","name":"iSrcCancelAmt_f","name_without_path":"iSrcCancelAmt_f","description":null,"is_pk":false,"is_identity":false,"data_type":"money","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-163515","object_id":"column-163515","name":"iSrcCancelAmt","name_without_path":"iSrcCancelAmt","description":null,"is_pk":false,"is_identity":false,"data_type":"money","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-163516","object_id":"column-163516","name":"iNRSrcApplyAmt_f","name_without_path":"iNRSrcApplyAmt_f","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 4","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-163517","object_id":"column-163517","name":"iNRSrcApplyAmt","name_without_path":"iNRSrcApplyAmt","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 4","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-163518","object_id":"column-163518","name":"iSrcApplyAmt_f","name_without_path":"iSrcApplyAmt_f","description":null,"is_pk":false,"is_identity":false,"data_type":"money","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-163519","object_id":"column-163519","name":"iSrcApplyAmt","name_without_path":"iSrcApplyAmt","description":null,"is_pk":false,"is_identity":false,"data_type":"money","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-163520","object_id":"column-163520","name":"iBillAmt_f","name_without_path":"iBillAmt_f","description":null,"is_pk":false,"is_identity":false,"data_type":"money","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-163521","object_id":"column-163521","name":"iBillAmt","name_without_path":"iBillAmt","description":null,"is_pk":false,"is_identity":false,"data_type":"money","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};