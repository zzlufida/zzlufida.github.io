window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v10349","name":"CM_V_ApCloseARs","subtype":"VIEW","is_user_defined":false,"description":null,"script":"--应收合同单阶跟踪 \r\nCREATE  VIEW CM_V_ApCloseARs as \r\n--核销或合同结算单审核后取应收明细账数据\r\nselect max(Ap_CloseBill.iID) as I_id,\r\nAp_VouchType.cTypeName as cVoucherType,\r\nAr_Detail.cVouchID,\r\nAr_Detail.cCoVouchID,\r\nmax(Ar_Detail.cContractID) as strContractID,\r\nsum(Ar_Detail.iCAmount_f) as iAmount_f,\r\nsum(Ar_Detail.iCAmount) as iAmount,\r\nMax(Ar_Detail.dVouchDate) as dVouchDate,\r\n'00000000-0000-0000-0000-000000000000' as ContractRowGUID \r\nfrom Ar_Detail\r\nLEFT JOIN Ap_VouchType ON Ar_Detail.cVouchType = Ap_VouchType.cTypeCode \r\nLeft Join Ap_CloseBill On Ar_Detail.cDwCode=Ap_CloseBill.cDwCode and Ar_Detail.cVouchType=Ap_CloseBill.cVouchType And Ar_Detail.cVouchID=Ap_CloseBill.cVouchID And Ar_Detail.cFlag=Ap_CloseBill.cFlag\r\nwhere (cprocstyle=N'9P' or cprocstyle=N'XJ') and (iFlag<3 or iFlag=5) and Ar_Detail.cFlag=N'AR'\r\nand Ar_Detail.cvouchtype like N'4%' and Ar_Detail.ccovouchtype IN ('26','27','28','29','60','60z')\r\ngroup by Ar_Detail.cdwcode,Ar_Detail.ccovouchtype,Ar_Detail.ccovouchid,\r\nAp_VouchType.cTypeName,Ar_Detail.cvouchid,Ar_Detail.cVouchType\r\nUnion\r\n--预付数据\r\nselect max(Ap_CloseBill.iID) as I_id,\r\nAp_VouchType.cTypeName as cVoucherType,\r\nAr_Detail.cVouchID,\r\ndbo.UDF_GetResourceMessageByID('U8.CW.CM.PreReceive') As cCoVouchID,\r\nAr_Detail.cContractID as strContractID,\r\nsum(Ar_Detail.iCAmount_f-Ar_Detail.iDAmount_f) As  iAmount_f,\r\nsum(Ar_Detail.iCAmount-Ar_Detail.iDAmount) as iAmount,\r\nMax(Ar_Detail.dVouchDate) as dVouchDate,\r\n'00000000-0000-0000-0000-000000000000' as ContractRowGUID \r\nfrom Ar_Detail\r\nLEFT JOIN Ap_VouchType ON Ar_Detail.cVouchType = Ap_VouchType.cTypeCode \r\nLeft Join Ap_CloseBill On Ar_Detail.cDwCode=Ap_CloseBill.cDwCode and Ar_Detail.cVouchType=Ap_CloseBill.cVouchType And Ar_Detail.cVouchID=Ap_CloseBill.cVouchID And Ar_Detail.cFlag=Ap_CloseBill.cFlag\r\nwhere Ar_Detail.cFlag=N'AR' and Ar_Detail.cvouchtype like N'4%' and iflag<3 and ISNULL(cexecID,'') <> ''and Ar_Detail.bPrePay=1\r\ngroup by Ar_Detail.cdwcode,Ap_VouchType.cTypeName,Ar_Detail.cvouchid,Ar_Detail.cContractID \r\n\r\nunion\r\n--应收合同现付生成的收款单\r\nselect Ap_CloseBill.iID as I_id,\r\nAp_VouchType.cTypeName as cVoucherType,\r\nAp_CloseBill.cVouchID,\r\nAp_CloseBill.cCoVouchID,\r\nAp_CloseBill.cContractID as strContractID,\r\nAp_CloseBill.iAmount_f as iAmount_f,\r\nAp_CloseBill.iAmount as iAmount,\r\nAp_CloseBill.dVouchDate as dVouchDate,\r\n'00000000-0000-0000-0000-000000000000' as ContractRowGUID \r\nfrom Ap_CloseBill\r\ninner join cm_balance on Ap_CloseBill.cCoVouchID=cm_balance.cbalanceid\r\nLEFT JOIN Ap_VouchType ON Ap_CloseBill.cVouchType = Ap_VouchType.cTypeCode \r\nwhere ccovouchtype like '60%' and cvouchtype='48'","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"CM_V_ApCloseARs"},{"field":"Type","value":"View"}],"columns":[{"id":"column-184266","object_id":"column-184266","name":"I_id","name_without_path":"I_id","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184267","object_id":"column-184267","name":"cVoucherType","name_without_path":"cVoucherType","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184268","object_id":"column-184268","name":"cVouchID","name_without_path":"cVouchID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184269","object_id":"column-184269","name":"cCoVouchID","name_without_path":"cCoVouchID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"2048","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184270","object_id":"column-184270","name":"strContractID","name_without_path":"strContractID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"64","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184271","object_id":"column-184271","name":"iAmount_f","name_without_path":"iAmount_f","description":null,"is_pk":false,"is_identity":false,"data_type":"money","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184272","object_id":"column-184272","name":"iAmount","name_without_path":"iAmount","description":null,"is_pk":false,"is_identity":false,"data_type":"money","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184273","object_id":"column-184273","name":"dVouchDate","name_without_path":"dVouchDate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184274","object_id":"column-184274","name":"ContractRowGUID","name_without_path":"ContractRowGUID","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"36","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};