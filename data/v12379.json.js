window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v12379","name":"sr_serviceFitems_RPT","subtype":"VIEW","is_user_defined":false,"description":null,"script":"CREATE view [dbo].[sr_serviceFitems_RPT] as        \r\n    \r\n        \r\n    \r\nselect sr_serviceFitems.cInvcode as 故障产品编码,inventory.cinvname as 产品名称,      \r\n    \r\ninventory.cinvstd as 规格型号,        \r\n    \r\n(case sr_servicebilldetail.SerModeID when '02' then '整机返厂' else '部件返厂' end) as 返厂标识,        \r\n    \r\nsr_serviceFitems.fquantity as 数量,sr_servicebilldetail.dArriveDate as 返厂时间,      \r\n    \r\n(case (select count(distinct mom_order.mocode) from mom_order inner join mom_orderdetail on mom_order.moid=mom_orderdetail.moid where mom_orderdetail.SourceSvcDid=sr_serviceFitems.oid )      \r\n    \r\nwhen 1 then (select distinct mom_order.mocode from mom_order inner join mom_orderdetail on mom_order.moid=mom_orderdetail.moid where mom_orderdetail.SourceSvcDid=sr_serviceFitems.oid ) when 0 then '' else '生产订单汇总' end ) as 生产订单号,      \r\n    \r\nsr_servicebill.dIntendDate as 预计解决日期,       \r\n    \r\n--mom_order.mocode as 生产订单号,        \r\n    \r\n--mom_morder.startdate as 开工日期,mom_morder.duedate as 预计完工日期,      \r\n    \r\n(case (select count(distinct mom_order.mocode) from mom_order inner join mom_orderdetail on mom_order.moid=mom_orderdetail.moid where mom_orderdetail.SourceSvcDid=sr_serviceFitems.oid )      \r\n    \r\nwhen 1 then (select mom_morder.startdate from mom_order inner join mom_orderdetail on mom_order.moid=mom_orderdetail.moid inner join mom_morder on mom_morder.modid =mom_orderdetail.modid   where mom_orderdetail.SourceSvcDid=sr_serviceFitems.oid ) else null end ) as 开工日期,      \r\n    \r\n      \r\n    \r\n(case (select count(distinct mom_order.mocode) from mom_order inner join mom_orderdetail on mom_order.moid=mom_orderdetail.moid where mom_orderdetail.SourceSvcDid=sr_serviceFitems.oid )  when 1   \r\nthen (select mom_morder.duedate from mom_order inner join mom_orderdetail on mom_order.moid=mom_orderdetail.moid inner join mom_morder on mom_morder.modid =mom_orderdetail.modid   where mom_orderdetail.SourceSvcDid=sr_serviceFitems.oid ) else null end ) as 预计完工日期,          \r\n      \r\n    \r\n(select max(ddate) from rdrecord10  inner join rdrecords10 on rdrecords10.id=rdrecord10.id       \r\n    \r\ninner join mom_orderdetail on rdrecords10.impoids=mom_orderdetail.Modid       \r\n    \r\n      \r\nwhere  mom_orderdetail.SourceSvcDid=sr_serviceFitems.oid and rdrecord10.cbustype='成品入库') as 实际完工日期,      \r\n    \r\n      \r\n    \r\nfFSumQuantity as 完成数量,      \r\n    \r\n      \r\n    \r\n(select max(ddate) from rdrecord09 inner join rdrecords09 on rdrecords09.id=rdrecord09.id       \r\n    \r\n      \r\n    \r\nwhere  rdrecords09.cbserviceoid=sr_serviceFitems.oid and rdrecord09.cbustype='服务维修产品发出')as 实际交付日期,      \r\n    \r\nfJSumQuantity as 交付数量,      \r\n    \r\n      \r\n    \r\n      \r\n    \r\n 超期天数=  case  when(CONVERT(Int,((select max(ddate) from rdrecord09 inner join rdrecords09 on rdrecords09.id=rdrecord09.id       \r\n    \r\nwhere  rdrecords09.cbserviceoid=sr_serviceFitems.oid and rdrecord09.cbustype='服务维修产品发出')-sr_servicebill.dIntendDate))>0)       \r\n    \r\nthen CONVERT(Int,((select max(ddate) from rdrecord09 inner join rdrecords09 on rdrecords09.id=rdrecord09.id       \r\n    \r\nwhere  rdrecords09.cbserviceoid=sr_serviceFitems.oid and rdrecord09.cbustype='服务维修产品发出')-sr_servicebill.dIntendDate))      \r\n    \r\nelse      \r\n    \r\n0      \r\n    \r\nend      \r\n    \r\n      \r\n    \r\n,      \r\n    \r\n      \r\n    \r\n      \r\n    \r\nisnull(sr_serviceFitems.fquantity,0)-isnull(fFSumQuantity,0) as 未完数量,       \r\n    \r\n       \r\n    \r\nsr_servicebill.cSerBillCode as 服务单号,sr_servicebill.cCusCode as 客户编码,      \r\n    \r\nserbodyoid,      \r\n    \r\n      \r\n    \r\ncustomer.ccusabbname as 客户,sr_servicebill.creqdepcode,sr_servicebill.creqpersoncode,sr_servicebilldetail.SerialNoid,        \r\n    \r\nCustomerClass.cCCName,customerrank.cCusRankName,TradeClass.cTradeCName,DistrictClass.cDCName,dReqDate as 请求时间,        \r\n    \r\nCustomerClass.cCCCode,customerrank.cCusRankCode,TradeClass.cTradeCCode,DistrictClass.cDCCode         \r\n    \r\nfrom sr_serviceFitems        \r\n    \r\ninner join sr_servicebilldetail on sr_serviceFitems.serbodyoid=sr_servicebilldetail.oid        \r\n    \r\ninner join sr_servicebill on sr_servicebill.oid=sr_servicebilldetail.SerBillid        \r\n    \r\n--left join mom_orderdetail on mom_orderdetail.SourceSvcDid=sr_serviceFitems.oid        \r\n   \r\n--left join mom_order on mom_order.moid=mom_orderdetail.moid        \r\n    \r\n--left outer join mom_morder  on mom_morder.modid =mom_orderdetail.modid         \r\n    \r\nleft join department on department.cdepcode=sr_servicebill.creqdepcode        \r\n    \r\nleft join person  on person.cpersoncode=sr_servicebill.creqpersoncode        \r\n    \r\n--客户档案     \r\n LEFT  JOIN SR_View_SR_ServiceUserAndCustomer as Customer ON SR_ServiceBill.cCusCode = Customer.cCusCode and SR_ServiceBill.cModType = Customer.cModType          \r\n--客户分类    \r\nLEFT JOIN SR_View_SR_ServiceUserAndCustomerClass as CustomerClass  ON CustomerClass.cCCCode= Customer.cCCCode      \r\n    \r\nLEFT JOIN TradeClass ON  TradeClass.cTradeCCode= Customer.cCusTradeCCode           \r\n    \r\nLEFT JOIN DistrictClass ON DistrictClass.cDCCode= Customer.cDCCode        \r\n    \r\nLEFT JOIN customerrank ON  customerrank.cCusRankCode=Customer.customerKcode        \r\n    \r\nleft join inventory on inventory.cinvcode=sr_serviceFitems.cinvcode","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"sr_serviceFitems_RPT"},{"field":"Type","value":"View"}],"columns":[{"id":"column-301663","object_id":"column-301663","name":"故障产品编码","name_without_path":"故障产品编码","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"120","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301664","object_id":"column-301664","name":"产品名称","name_without_path":"产品名称","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301665","object_id":"column-301665","name":"规格型号","name_without_path":"规格型号","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301666","object_id":"column-301666","name":"返厂标识","name_without_path":"返厂标识","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"8","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301667","object_id":"column-301667","name":"数量","name_without_path":"数量","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"30, 10","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301668","object_id":"column-301668","name":"返厂时间","name_without_path":"返厂时间","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301669","object_id":"column-301669","name":"生产订单号","name_without_path":"生产订单号","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301670","object_id":"column-301670","name":"预计解决日期","name_without_path":"预计解决日期","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301671","object_id":"column-301671","name":"开工日期","name_without_path":"开工日期","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301672","object_id":"column-301672","name":"预计完工日期","name_without_path":"预计完工日期","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301673","object_id":"column-301673","name":"实际完工日期","name_without_path":"实际完工日期","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301674","object_id":"column-301674","name":"完成数量","name_without_path":"完成数量","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"30, 10","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301675","object_id":"column-301675","name":"实际交付日期","name_without_path":"实际交付日期","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301676","object_id":"column-301676","name":"交付数量","name_without_path":"交付数量","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"30, 10","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301677","object_id":"column-301677","name":"超期天数","name_without_path":"超期天数","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301678","object_id":"column-301678","name":"未完数量","name_without_path":"未完数量","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"31, 10","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301679","object_id":"column-301679","name":"服务单号","name_without_path":"服务单号","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301680","object_id":"column-301680","name":"客户编码","name_without_path":"客户编码","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301681","object_id":"column-301681","name":"serbodyoid","name_without_path":"serbodyoid","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"80","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301682","object_id":"column-301682","name":"客户","name_without_path":"客户","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"200","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301683","object_id":"column-301683","name":"creqdepcode","name_without_path":"creqdepcode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301684","object_id":"column-301684","name":"creqpersoncode","name_without_path":"creqpersoncode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301685","object_id":"column-301685","name":"SerialNoid","name_without_path":"SerialNoid","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"80","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301686","object_id":"column-301686","name":"cCCName","name_without_path":"cCCName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"80","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301687","object_id":"column-301687","name":"cCusRankName","name_without_path":"cCusRankName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301688","object_id":"column-301688","name":"cTradeCName","name_without_path":"cTradeCName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301689","object_id":"column-301689","name":"cDCName","name_without_path":"cDCName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301690","object_id":"column-301690","name":"请求时间","name_without_path":"请求时间","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301691","object_id":"column-301691","name":"cCCCode","name_without_path":"cCCCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301692","object_id":"column-301692","name":"cCusRankCode","name_without_path":"cCusRankCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"4","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301693","object_id":"column-301693","name":"cTradeCCode","name_without_path":"cTradeCCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-301694","object_id":"column-301694","name":"cDCCode","name_without_path":"cDCCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};