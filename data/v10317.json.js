window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v10317","name":"CM_QTrackMulti_PU","subtype":"VIEW","is_user_defined":false,"description":null,"script":"CREATE View CM_QTrackMulti_PU\r\nAS\r\n----增加合同执行单\r\n--iMoney\t无税原币金额\r\n--iSum\t原币价税合计\r\n--iNatMoney\t无税本币金额\r\n--iNatSum\t本币价税合计\r\n\r\nSelect distinct C.strContractID,C.strCode, Null As cBalanceID,Null As cPbvCode,Null As VouchID,Null As BillType,\r\ndbo.UDF_GetResourceMessageByID('U8.CW.CM.ContractItem')  As VoucherType,C.strCode As VoucherCode,dblQuantity,\r\ndblUntaxSum As dblSum1,dblSum As dblSum2,dblUntaxSumRMB As dblSum3,dblSumRMB As dblSum4\r\nFrom CM_QTrackConItem C\r\nUnion --订单\r\nSelect distinct strContractID,strCode,cBalanceID,Null As cPbvCode,VouchID,Null As BillType,dbo.UDF_GetResourceMessageByID('U8.CW.CM.PUOrder') As VoucherType,\r\ncBalanceID As VoucherCode,dblQuantity,dblSum1,dblSum2,dblSum3,dblSum4\r\nFrom (Select cBalanceID,strContractID,strCode,VouchID,Sum(iQuantity) As dblQuantity,\r\n\tSum(iMoney) As dblSum1,Sum(iSum) As dblSum2,Sum(iNatMoney) As dblSum3,Sum(iNatSum) As dblSum4 \r\n\tFrom CM_QTrackPuOrder Group By strContractID,strCode,cBalanceID,VouchID) Bal\r\nUnion\t\t\t\t--到货单\r\nSelect distinct strContractID,strCode,cOrderCode As cBalanceID,Null As cPbvCode,VouchID,Null As BillType,dbo.UDF_GetResourceMessageByID('U8.CW.CM.PUGoods') As VoucherType,\r\nOtherCode As VoucherCode,dblQuantity,dblSum1,dblSum2,dblSum3,dblSum4\r\nFrom (Select OtherCode,cOrderCode,strContractID,strCode,VouchID,Sum(iQuantity) As dblQuantity,\r\n\tSum(iOriMoney) As dblSum1,Sum(iOriSum) As dblSum2,Sum(iMoney) As dblSum3,Sum(iSum) As dblSum4 \r\n\tFrom CM_QTrackPuArrival Group By strContractID,strCode,OtherCode,cOrderCode,VouchID) Other1\r\nUnion\t\t\t\t--发票\r\nSelect distinct strContractID,strCode,cOrderCode As cBalanceID,OtherCode As cPbvCode,VouchID,BillType,--dbo.UDF_GetResourceMessageByID('U8.CW.CM.PUInvoice') As VoucherType,\r\nVoucherType,OtherCode As VoucherCode,dblQuantity,dblSum1,dblSum2,dblSum3,dblSum4\r\nFrom (Select VoucherType,OtherCode,cOrderCode,strContractID,strCode,VouchID,BillType,Sum(iPbvQuantity) As dblQuantity,\r\n\tSum(iOriMoney) As dblSum1,Sum(iOriSum) As dblSum2,Sum(iMoney) As dblSum3,Sum(iSum) As dblSum4 \r\n\tFrom CM_QTrackPuBill Group By strContractID,strCode,OtherCode,cOrderCode,VouchID,BillType,VoucherType) Other2\r\nUnion\t\t\t\t--收付款单\r\nSelect distinct C.strContractID,C.strCode,P.cpoid As cBalanceID,B.cPbvCode As cSoCode,S.pbvid As VouchID,Null As BillType,C.cVoucherType As VoucherType,\r\nC.cVouchID As VoucherCode,Null As dblQuantity,Null As dblSum1,sum(iAmount_f) As dblSum2,Null As dblSum3,sum(iAmount) As dblSum4\r\nFrom CM_V_ApClosePurs C \r\nInner Join PurBillVouchs S On S.ID=C.ibvid\r\nInner Join PurBillVouch B ON B.pbvid=S.pbvid and B.cbustype<>N'委外加工'    \r\nLEFT JOIN Po_podetails D ON S.iposid=D.id \r\nLEFT JOIN Po_Pomain P ON D.POID=P.POID \r\nWhere IsNUll(C.cVoucherType,'')<>''\r\nGroup By cVoucherType,I_id,strContractID,strCode,cCoVouchID,cVouchID,S.pbvid,P.cpoid,B.cPbvCode\r\nUnion\t\t\t\t-- 入库单\r\nSelect distinct strContractID,strCode,cOrderCode As cBalanceID,Null As cPbvCode,VouchID,Null As BillType,dbo.UDF_GetResourceMessageByID('U8.CW.CM.PUStock') As VoucherType,\r\nOtherCode As VoucherCode,dblQuantity,dblSum1,dblSum2,dblSum3,dblSum4\r\nFrom (Select OtherCode,cOrderCode,strContractID,strCode,VouchID,Sum(iQuantity) As dblQuantity,\r\n\tSum(iOriMoney) As dblSum1,Sum(iOriSum) As dblSum2,Sum(iPrice) As dblSum3,Sum(iSum) As dblSum4 \r\n\tFrom CM_QTrackPuRecord Group By strContractID,strCode,OtherCode,cOrderCode,VouchID) Other3\r\nUnion \r\n\r\nSelect B.cContractID as strContractID,S.cContractObjectID as strCode,Null as cBalanceID,Null as cPBVCode,Null as VouchID,Null As BillType,dbo.UDF_GetResourceMessageByID('U8.CW.CM.ExecuteBill')  as  VoucherType,\r\nB.cExecID as VoucherCode,decCount as dblQuantity,decNoRateMoney as dblSum1,decRateMoney As dblSum2,decNoRateBenBiMoney As dblSum3,decRateBenBiMoney As dblSum4 \r\n from cm_executebill B inner join \r\n cm_executebills S on B.cExecID=S.cExecID","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"CM_QTrackMulti_PU"},{"field":"Type","value":"View"}],"columns":[{"id":"column-183633","object_id":"column-183633","name":"strContractID","name_without_path":"strContractID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"128","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-183634","object_id":"column-183634","name":"strCode","name_without_path":"strCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"150","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-183635","object_id":"column-183635","name":"cBalanceID","name_without_path":"cBalanceID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-183636","object_id":"column-183636","name":"cPbvCode","name_without_path":"cPbvCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-183637","object_id":"column-183637","name":"VouchID","name_without_path":"VouchID","description":null,"is_pk":false,"is_identity":false,"data_type":"bigint","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-183638","object_id":"column-183638","name":"BillType","name_without_path":"BillType","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"4","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-183639","object_id":"column-183639","name":"VoucherType","name_without_path":"VoucherType","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"2048","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-183640","object_id":"column-183640","name":"VoucherCode","name_without_path":"VoucherCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"150","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-183641","object_id":"column-183641","name":"dblQuantity","name_without_path":"dblQuantity","description":null,"is_pk":false,"is_identity":false,"data_type":"float","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-183642","object_id":"column-183642","name":"dblSum1","name_without_path":"dblSum1","description":null,"is_pk":false,"is_identity":false,"data_type":"float","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-183643","object_id":"column-183643","name":"dblSum2","name_without_path":"dblSum2","description":null,"is_pk":false,"is_identity":false,"data_type":"float","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-183644","object_id":"column-183644","name":"dblSum3","name_without_path":"dblSum3","description":null,"is_pk":false,"is_identity":false,"data_type":"float","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-183645","object_id":"column-183645","name":"dblSum4","name_without_path":"dblSum4","description":null,"is_pk":false,"is_identity":false,"data_type":"float","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};