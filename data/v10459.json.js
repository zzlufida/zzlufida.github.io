window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v10459","name":"CRM_V_PartApplySN3","subtype":"VIEW","is_user_defined":false,"description":null,"script":"create  view [dbo].[CRM_V_PartApplySN3]      \r\nas       \r\n select  \r\n pad.partapply_d_id,  \r\n pad.partapply_id as partapply_id,\r\n 0 as worksheet_d_id,\r\n pa.ufcode,\r\n pa.service_id,\r\n '' as ws_name,\r\n pad.sumoutqty,\r\n pad.sumrtnqty,\r\n pad.sumconsumeqty,       \r\n pa.finaluser_id,    \r\n fu.finaluser_name, \r\n pa.account_id,\r\n ta.account_name,   \r\n pa.dept_id,dt.dept_name,     \r\n  pa.owner_user_id,us.user_name,    \r\n pad.product_id,pd.prod_code,pd.cinvname,pd.cinvstd,    \r\n pd.ccomunitcode,unit.unit_name as ccomunitname,pad.saleunit_id,unit1.unit_name as saleunit_name,    \r\n pa.note as note,    \r\n 0 as asset_id,\r\n '' as asset_name,\r\n -- pa.crm_timestamp,    \r\n convert(nchar, convert(money,pa.crm_timestamp), 2)AS crm_timestamp,   \r\n '' as product_id_old, \r\n0 as qty_old,\r\n '' as prod_code_old,pdold.cinvname as cinvname_old,    \r\n pdold.cinvstd as cinvstd_old,\r\n '' as ccomunitcode_old,\r\n '' as ccomunitname_old,        \r\n pd.bInvBatch ,pd.bSerial ,    \r\n isnull(rdouts.iquantity,0)-isnull(pcs.consumeqty,0)-isnull(prt.rtnqty,0) as consumeqty ,    \r\n CAST(NULL  AS NVARCHAR( 255)) AS cbatch,CAST(NULL  AS NVARCHAR( 255)) AS oldcbatch,CAST(Null  AS NVARCHAR( 200)) AS cinvsn, \r\n CAST(rdouts.cInvSN  AS NVARCHAR( 200)) AS cinvsn_new, \r\n 1 as is_charge,  \r\n '' as ischargedesc,\r\n '' as out_service_date,\r\n tc_type.type_id,tc_type.type_name  \r\n from tc_partapply_d pad   \r\n left join tc_partapply pa on pa.partapply_id=pad.partapply_id \r\n left join tc_account ta on pa.account_id=ta.account_id\r\n --left join tc_worksheet_d wsd on wsd.ws_d_id=pad.ws_d_id \r\n --left JOIN tc_worksheet ws ON wsd.ws_id =ws.ws_id   \r\n left join tc_finaluser fu on pa.finaluser_id=fu.finaluser_id   \r\n left join tc_department dt on pa.dept_id=dt.dept_id   \r\n left join tc_user us on pa.owner_user_id=us.user_id   \r\n left join tc_product pd on pad.product_id=pd.prod_id   \r\n --LEFT JOIN tc_asset asset ON wsd.asset_id =asset.asset_id   \r\n left join tc_unit unit on pd.ccomunitcode=unit.unit_id   \r\n left join tc_unit unit1 on pad.saleunit_id=unit1.unit_id   \r\n left join tc_product pdold on pad.product_id=pdold.prod_id   \r\n left join tc_unit unitold on pdold.ccomunitcode=unitold.unit_id   \r\n --left join tc_enum_str tes on wsd.is_charge=tes.enum_key and tes.attr_name='PartConsume.IsCharge' and tes.lang_id=2   \r\n LEFT JOIN (select obj_type,max(type_id) as type_id,max(type_name) as type_name,count(*)as num from tc_type where obj_type in('550','1510','251') group by obj_type) tc_type ON tc_type.num =1 AND tc_type.obj_type ='550'  \r\n  join (select rds.icrmvouchids as partapply_d_id,rds.cinvcode,snd.cinvsn, snd.cBatch,   \r\n 1 as iquantity from rdrecords09 rds join RdRecord09 rd on rd.id=rds.ID     \r\n join ST_SNDetail_OtherOut snd on rds.autoid=snd.ivouchsid     \r\n where rd.cbustype=N'配件出库' and isnull(snd.cinvsn,N'')<>N'') rdouts     \r\n on pad.partapply_d_id=rdouts.partapply_d_id     \r\n   \r\n left join (select partapply_d_id,sn,sum(isnull(consumeqty,0)) as consumeqty from tc_partconsume_d     \r\n where isnull(sn,N'')<>N'' group by partapply_d_id,sn) pcs     \r\n on rdouts.partapply_d_id=pcs.partapply_d_id and rdouts.cinvsn=pcs.sn     \r\n left join (select partapply_d_id,sn,sum(isnull(rtnqty,0)) as rtnqty from tc_partrtn_d     \r\n where isnull(sn,N'')<>N'' group by partapply_d_id,sn) prt     \r\n on rdouts.partapply_d_id=prt.partapply_d_id and rdouts.cinvsn=prt.sn     \r\n WHERE  isnull(rdouts.iquantity,0)-isnull(pcs.consumeqty,0)-isnull(prt.rtnqty,0) >0  \r\n AND  isnull(pd.bSerial,0)=1","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"CRM_V_PartApplySN3"},{"field":"Type","value":"View"}],"columns":[{"id":"column-189742","object_id":"column-189742","name":"partapply_d_id","name_without_path":"partapply_d_id","description":null,"is_pk":false,"is_identity":false,"data_type":"numeric","data_length":"22, 0","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189743","object_id":"column-189743","name":"partapply_id","name_without_path":"partapply_id","description":null,"is_pk":false,"is_identity":false,"data_type":"numeric","data_length":"22, 0","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189744","object_id":"column-189744","name":"worksheet_d_id","name_without_path":"worksheet_d_id","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189745","object_id":"column-189745","name":"ufcode","name_without_path":"ufcode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"64","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189746","object_id":"column-189746","name":"service_id","name_without_path":"service_id","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"24","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189747","object_id":"column-189747","name":"ws_name","name_without_path":"ws_name","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"1","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189748","object_id":"column-189748","name":"sumoutqty","name_without_path":"sumoutqty","description":null,"is_pk":false,"is_identity":false,"data_type":"numeric","data_length":"24, 8","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189749","object_id":"column-189749","name":"sumrtnqty","name_without_path":"sumrtnqty","description":null,"is_pk":false,"is_identity":false,"data_type":"numeric","data_length":"24, 8","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189750","object_id":"column-189750","name":"sumconsumeqty","name_without_path":"sumconsumeqty","description":null,"is_pk":false,"is_identity":false,"data_type":"numeric","data_length":"24, 8","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189751","object_id":"column-189751","name":"finaluser_id","name_without_path":"finaluser_id","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"24","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189752","object_id":"column-189752","name":"finaluser_name","name_without_path":"finaluser_name","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"196","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189753","object_id":"column-189753","name":"account_id","name_without_path":"account_id","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"24","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189754","object_id":"column-189754","name":"account_name","name_without_path":"account_name","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"98","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189755","object_id":"column-189755","name":"dept_id","name_without_path":"dept_id","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189756","object_id":"column-189756","name":"dept_name","name_without_path":"dept_name","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189757","object_id":"column-189757","name":"owner_user_id","name_without_path":"owner_user_id","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189758","object_id":"column-189758","name":"user_name","name_without_path":"user_name","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189759","object_id":"column-189759","name":"product_id","name_without_path":"product_id","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189760","object_id":"column-189760","name":"prod_code","name_without_path":"prod_code","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189761","object_id":"column-189761","name":"cinvname","name_without_path":"cinvname","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189762","object_id":"column-189762","name":"cinvstd","name_without_path":"cinvstd","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189763","object_id":"column-189763","name":"ccomunitcode","name_without_path":"ccomunitcode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"35","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189764","object_id":"column-189764","name":"ccomunitname","name_without_path":"ccomunitname","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189765","object_id":"column-189765","name":"saleunit_id","name_without_path":"saleunit_id","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"24","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189766","object_id":"column-189766","name":"saleunit_name","name_without_path":"saleunit_name","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189767","object_id":"column-189767","name":"note","name_without_path":"note","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189768","object_id":"column-189768","name":"asset_id","name_without_path":"asset_id","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189769","object_id":"column-189769","name":"asset_name","name_without_path":"asset_name","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"1","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189770","object_id":"column-189770","name":"crm_timestamp","name_without_path":"crm_timestamp","description":null,"is_pk":false,"is_identity":false,"data_type":"nchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189771","object_id":"column-189771","name":"product_id_old","name_without_path":"product_id_old","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"1","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189772","object_id":"column-189772","name":"qty_old","name_without_path":"qty_old","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189773","object_id":"column-189773","name":"prod_code_old","name_without_path":"prod_code_old","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"1","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189774","object_id":"column-189774","name":"cinvname_old","name_without_path":"cinvname_old","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189775","object_id":"column-189775","name":"cinvstd_old","name_without_path":"cinvstd_old","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189776","object_id":"column-189776","name":"ccomunitcode_old","name_without_path":"ccomunitcode_old","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"1","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189777","object_id":"column-189777","name":"ccomunitname_old","name_without_path":"ccomunitname_old","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"1","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189778","object_id":"column-189778","name":"bInvBatch","name_without_path":"bInvBatch","description":null,"is_pk":false,"is_identity":false,"data_type":"bit","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189779","object_id":"column-189779","name":"bSerial","name_without_path":"bSerial","description":null,"is_pk":false,"is_identity":false,"data_type":"bit","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189780","object_id":"column-189780","name":"consumeqty","name_without_path":"consumeqty","description":null,"is_pk":false,"is_identity":false,"data_type":"numeric","data_length":"38, 8","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189781","object_id":"column-189781","name":"cbatch","name_without_path":"cbatch","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189782","object_id":"column-189782","name":"oldcbatch","name_without_path":"oldcbatch","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189783","object_id":"column-189783","name":"cinvsn","name_without_path":"cinvsn","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"200","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189784","object_id":"column-189784","name":"cinvsn_new","name_without_path":"cinvsn_new","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"200","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189785","object_id":"column-189785","name":"is_charge","name_without_path":"is_charge","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189786","object_id":"column-189786","name":"ischargedesc","name_without_path":"ischargedesc","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"1","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189787","object_id":"column-189787","name":"out_service_date","name_without_path":"out_service_date","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"1","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189788","object_id":"column-189788","name":"type_id","name_without_path":"type_id","description":null,"is_pk":false,"is_identity":false,"data_type":"numeric","data_length":"22, 0","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189789","object_id":"column-189789","name":"type_name","name_without_path":"type_name","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"32","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};