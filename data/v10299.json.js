window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v10299","name":"CM_QSFDateDetail","subtype":"VIEW","is_user_defined":false,"description":null,"script":"create View CM_QSFDateDetail AS\r\n\r\n--没启用阶段的销售采购类\r\nselect CE.cContractID,CE.dtAPARDate,Sum(isnull(CE.decRateMoneyAPAR,0)) as dblFactCurrency,sum(isnull(ce.decRateMoneyRMBAPAR,0)) as decRateMoneyRMBAPAR , '' as cstagecode\r\nfrom CM_ExecInterface CE\r\n inner join CM_QContractExecuted C on  CE.cContractID = C.strContractID and C.bUseStage=0\r\n Group by CE.cContractID,CE.dtAPARDate\r\nunion all\r\n--启用阶段的应收应付类\r\n Select cContractID,dtAPARDate,sum(isnull(dblFactCurrency,0)) as dblFactCurrency ,sum(isnull(decRateMoneyRMBAPAR,0)) as decRateMoneyRMBAPAR, e.cstagecode  as cstagecode\r\n from (\r\n  select  B.cContractID,BD.dtBalanceDate as dtAPARDate,\r\n   sum(isnull(BD.decMoney,0)) as dblFactCurrency,sum(isnull(BD.decRMB ,0)) as decRateMoneyRMBAPAR,bs.cstagecode\r\n   from CM_Balance B  inner join CM_Balances BS on BS.cBalanceID=B.cBalanceID\r\n   inner join  CM_BalanceDetail BD on BD.BalancesGUID=BS.BalancesGUID and IsNull(BD.cExecID,'') = ''\r\n   group by B.cContractID,BD.dtBalanceDate,BS.cstagecode\r\n  union all\r\n  Select E.cContractID,EB.dRPDate as dtAPARDate,Sum(EB.iRPMOney) as dblFactCurrency, sum(eb.iNatRPMoney ) as decRateMoneyRMBAPAR,e.cstagecode\r\n   from CM_Executebill E\r\n   inner join CM_ExecuteBills  EB on E.cExecID = EB.cExecID and IsNull(EB.dRPDate,'') <> ''\r\n   inner join CM_QContractExecuted C on  E.cContractID = C.strContractID and (C.strContractKind='应收类合同' or C.strContractKind='应付类合同')\r\n   Group by E.cContractID,EB.dRPDate ,e.cstagecode\r\n  ) E Group by E.cContractID,E.dtAPARDate ,e.cstagecode\r\nunion all\r\n---启用阶段的销售采购类\r\nSelect E.cContractID,EB.dRPDate as dtAPARDate,Sum(EB.iRPMOney) as dblFactCurrency ,sum(eb.iNatRPMoney ) as decRateMoneyRMBAPAR ,e.cstagecode\r\nfrom CM_Executebill E\r\n inner join CM_ExecuteBills  EB on E.cExecID = EB.cExecID and IsNull(EB.dRPDate,'') <> ''\r\n inner join CM_QContractExecuted C on  E.cContractID = C.strContractID and (C.strContractKind='销售类合同' or C.strContractKind='采购类合同')and C.bUseStage=1\r\n Group by E.cContractID,EB.dRPDate  ,e.cstagecode","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"CM_QSFDateDetail"},{"field":"Type","value":"View"}],"columns":[{"id":"column-183375","object_id":"column-183375","name":"cContractID","name_without_path":"cContractID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"64","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-183376","object_id":"column-183376","name":"dtAPARDate","name_without_path":"dtAPARDate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-183377","object_id":"column-183377","name":"dblFactCurrency","name_without_path":"dblFactCurrency","description":null,"is_pk":false,"is_identity":false,"data_type":"float","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-183378","object_id":"column-183378","name":"decRateMoneyRMBAPAR","name_without_path":"decRateMoneyRMBAPAR","description":null,"is_pk":false,"is_identity":false,"data_type":"float","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-183379","object_id":"column-183379","name":"cstagecode","name_without_path":"cstagecode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"64","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};