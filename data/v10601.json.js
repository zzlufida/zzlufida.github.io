window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v10601","name":"EQ_QInvItems","subtype":"VIEW","is_user_defined":false,"description":null,"script":"CREATE VIEW dbo.EQ_QInvItems\r\nAS\r\nSELECT w.备件编码, MAX(w.备件名称) AS 备件名称, MAX(w.规格型号) AS 规格型号, \r\n      MAX(w.备件属性) AS 备件属性, MAX(w.计量单位) AS 计量单位, MAX(w.仓库编码) \r\n      AS 仓库编码, MAX(w.仓库名称) AS 仓库名称, SUM(w.需要数量) AS 需要数量, \r\n      MIN(w.需要日期) AS 需要日期, SUM(ccs.fAvailQtty) AS 可用量, SUM(ccs.istopqtty) \r\n      AS 冻结量, SUM(ccs.iQtty) AS 库存现有量, SUM(ccs.fInQtty) AS 到货在检量, \r\n      SUM(ccs.fTransInQtty) AS 调拨在途量, SUM(ccs.fTransOutQtty) AS 调拨待发量, \r\n      SUM(ccs.fOutQtty) AS 待发货量, MIN(安全库存) AS 安全库存, MAX(采购员) \r\n      AS 采购员\r\nFROM (SELECT 备件编码 AS 备件编码, MAX(备件名称) AS 备件名称, MAX(规格型号) \r\n              AS 规格型号, MAX(备件属性) AS 备件属性, MAX(计量单位) AS 计量单位, \r\n              MAX(仓库编码) AS 仓库编码, MAX(仓库名称) AS 仓库名称, SUM(需要数量) \r\n              AS 需要数量, MIN(需要日期) AS 需要日期, MIN(安全库存) AS 安全库存, \r\n              MAX(采购员) AS 采购员\r\n        FROM (SELECT I.cInvCode AS 备件编码, MAX(Inv.cInvName) AS 备件名称, \r\n                      MAX(inv.cInvStd) AS 规格型号, \r\n                      MAX(CASE list.intInvType WHEN 1 THEN N'关键件' WHEN 2 THEN N'一般件'\r\n                       WHEN 3 THEN N'易损件' ELSE '' END) AS 备件属性, \r\n                      MAX(Com.cComUnitName) AS 计量单位, I.cWhCode AS 仓库编码, \r\n                      MAX(WH.cWhName) AS 仓库名称, SUM(isnull(i.fValue, 0) - i.fFactNum) \r\n                      AS 需要数量, MIN(eq_Qwork.dtPlanStart) AS 需要日期, \r\n                      MIN(CASE WHEN Inv.iSafeNum IS NULL \r\n                      THEN 0 ELSE Inv.iSafeNum END) AS 安全库存, \r\n                      MAX(person.cPersonName) AS 采购员\r\n                FROM EQ_WorkInventory I INNER JOIN\r\n                      EQ_QWork ON i.cbillcode = EQ_QWork.cWorkCode LEFT JOIN\r\n                      Inventory Inv ON I.cInvCode = Inv.cInvCode LEFT JOIN\r\n                      person ON Inv.cPurPersonCode = person.cPersonCode LEFT JOIN\r\n                      EQ_ListInventory AS list ON i.cInvCode = list.cInvCode AND \r\n                      EQ_qwork.cEQTypeCode = list.cEQTypeCode LEFT JOIN\r\n                      WareHouse WH ON I.cWhCode = WH.cWhCode LEFT JOIN\r\n                      ComputationUnit Com ON I.cJldw = Com.cComunitCode\r\n                WHERE isnull(EQ_QWork.cCloser, '') = ''\r\n                GROUP BY I.cInvCode, I.cWhCode\r\n                UNION ALL\r\n                SELECT I.cInvCode AS 备件编码, MAX(Inv.cInvName) AS 备件名称, \r\n                      MAX(inv.cInvStd) AS 规格型号, \r\n                      MAX(CASE list.intInvType WHEN 1 THEN N'关键件' WHEN 2 THEN N'一般件'\r\n                       WHEN 3 THEN N'易损件' ELSE '' END) AS 备件属性, \r\n                      MAX(Com.cComUnitName) AS 计量单位, I.cWhCode AS 仓库编码, \r\n                      MAX(WH.cWhName) AS 仓库名称, SUM(i.fValue) AS 需要数量, \r\n                      MIN(EQ_QWorkPlan.dtPlanStart) AS 需要日期, \r\n                      MIN(CASE WHEN Inv.iSafeNum IS NULL \r\n                      THEN 0 ELSE Inv.iSafeNum END) AS 安全库存, \r\n                      MAX(person.cPersonName) AS 采购员\r\n                FROM EQ_PlanInventory I INNER JOIN\r\n                      EQ_QWorkPlan ON i.cbillcode = EQ_QWorkPlan.cPlanCode LEFT JOIN\r\n                      Inventory Inv ON I.cInvCode = Inv.cInvCode LEFT JOIN\r\n                      person ON Inv.cPurPersonCode = person.cPersonCode LEFT JOIN\r\n                      EQ_ListInventory AS list ON i.cInvCode = list.cInvCode AND \r\n                      EQ_QWorkPlan.cEQTypeCode = list.cEQTypeCode LEFT JOIN\r\n                      WareHouse WH ON I.cWhCode = WH.cWhCode LEFT JOIN\r\n                      ComputationUnit Com ON I.cJldw = Com.cComunitCode\r\n                WHERE isnull(EQ_QWorkPlan.cChecker, '') <> '' AND \r\n                      isnull(EQ_QWorkPlan.cNext, '') = ''\r\n                GROUP BY I.cInvCode, I.cWhCode) AS v\r\n        GROUP BY 备件编码, 仓库编码) AS w LEFT JOIN\r\n      ccs ON w.备件编码 = ccs.cinvcode AND w.仓库编码 = ccs.cwhcode\r\nGROUP BY w.备件编码, w.仓库编码","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"EQ_QInvItems"},{"field":"Type","value":"View"}],"columns":[{"id":"column-197188","object_id":"column-197188","name":"备件编码","name_without_path":"备件编码","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197189","object_id":"column-197189","name":"备件名称","name_without_path":"备件名称","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197190","object_id":"column-197190","name":"规格型号","name_without_path":"规格型号","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197191","object_id":"column-197191","name":"备件属性","name_without_path":"备件属性","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"3","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197192","object_id":"column-197192","name":"计量单位","name_without_path":"计量单位","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197193","object_id":"column-197193","name":"仓库编码","name_without_path":"仓库编码","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197194","object_id":"column-197194","name":"仓库名称","name_without_path":"仓库名称","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197195","object_id":"column-197195","name":"需要数量","name_without_path":"需要数量","description":null,"is_pk":false,"is_identity":false,"data_type":"float","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197196","object_id":"column-197196","name":"需要日期","name_without_path":"需要日期","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197197","object_id":"column-197197","name":"可用量","name_without_path":"可用量","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197198","object_id":"column-197198","name":"冻结量","name_without_path":"冻结量","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197199","object_id":"column-197199","name":"库存现有量","name_without_path":"库存现有量","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197200","object_id":"column-197200","name":"到货在检量","name_without_path":"到货在检量","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197201","object_id":"column-197201","name":"调拨在途量","name_without_path":"调拨在途量","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197202","object_id":"column-197202","name":"调拨待发量","name_without_path":"调拨待发量","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197203","object_id":"column-197203","name":"待发货量","name_without_path":"待发货量","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197204","object_id":"column-197204","name":"安全库存","name_without_path":"安全库存","description":null,"is_pk":false,"is_identity":false,"data_type":"float","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-197205","object_id":"column-197205","name":"采购员","name_without_path":"采购员","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};