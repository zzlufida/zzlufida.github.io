window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v13667","name":"v_mom_reform","subtype":"VIEW","is_user_defined":false,"description":null,"script":"create view v_mom_reform\r\nas\r\nselect OrgMDeptCode=d1.MDeptCode,OrgMoCode=h1.MoCode,OrgSortSeq=d1.SortSeq,OrgVerIden=case when coalesce(v1.BomType,0) = 1 then str(v1.Version) when coalesce(v1.BomType,0) = 2 then  v1.IdentCode else null end,OrgPartid=d1.partid,d1.reformflag,Allreformflag = case when d1.qty - d1.QualifiedInQty = 0 then 1 else 0 end,d.DocDate,\r\n       d2.MDeptCode,h2.MoCode,d2.SortSeq,VerIden=case when coalesce(v2.BomType,0) = 1 then str(v2.Version) when coalesce(v2.BomType,0) = 2 then  v2.IdentCode else null end,d2.partid,reformqty=sum(d.reformqty),moveflag = case when (select count(1) from mom_reform f where f.OrgMoDId = d1.modid and f.reftype = 2) > 0 then 1 else 0 end\r\n  from mom_reform d with(nolock) inner join mom_orderdetail d1 with(nolock) on d1.modid = d.orgmodid\r\n                                 inner join mom_order h1 on h1.moid = d1.moid\r\n                                 inner join bom_bom v1 with(nolock) on v1.bomid = d1.bomid\r\n  \t\t\t\t inner join mom_orderdetail d2 with(nolock) on d2.modid = d.refmodid\r\n                                 inner join mom_order h2 on h2.moid = d2.moid\r\n\t\t\t\t inner join bom_bom v2 with(nolock) on v2.bomid = d2.bomid  \r\n    where  d.reftype = 1\r\ngroup by d1.MDeptCode,h1.MoCode,d1.SortSeq,d1.qty,d1.QualifiedInQty,case when coalesce(v1.BomType,0) = 1 then str(v1.Version) when coalesce(v1.BomType,0) = 2 then  v1.IdentCode else null end,d1.partid,d1.reformflag,\r\n       d2.MDeptCode,h2.MoCode,d2.SortSeq,case when coalesce(v2.BomType,0) = 1 then str(v2.Version) when coalesce(v2.BomType,0) = 2 then  v2.IdentCode else null end,d2.partid,d.DocDate,d1.modid","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"v_mom_reform"},{"field":"Type","value":"View"}],"columns":[{"id":"column-394113","object_id":"column-394113","name":"OrgMDeptCode","name_without_path":"OrgMDeptCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-394114","object_id":"column-394114","name":"OrgMoCode","name_without_path":"OrgMoCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-394115","object_id":"column-394115","name":"OrgSortSeq","name_without_path":"OrgSortSeq","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-394116","object_id":"column-394116","name":"OrgVerIden","name_without_path":"OrgVerIden","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-394117","object_id":"column-394117","name":"OrgPartid","name_without_path":"OrgPartid","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-394118","object_id":"column-394118","name":"reformflag","name_without_path":"reformflag","description":null,"is_pk":false,"is_identity":false,"data_type":"bit","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-394119","object_id":"column-394119","name":"Allreformflag","name_without_path":"Allreformflag","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-394120","object_id":"column-394120","name":"DocDate","name_without_path":"DocDate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-394121","object_id":"column-394121","name":"MDeptCode","name_without_path":"MDeptCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-394122","object_id":"column-394122","name":"MoCode","name_without_path":"MoCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-394123","object_id":"column-394123","name":"SortSeq","name_without_path":"SortSeq","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-394124","object_id":"column-394124","name":"VerIden","name_without_path":"VerIden","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-394125","object_id":"column-394125","name":"partid","name_without_path":"partid","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-394126","object_id":"column-394126","name":"reformqty","name_without_path":"reformqty","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-394127","object_id":"column-394127","name":"moveflag","name_without_path":"moveflag","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};