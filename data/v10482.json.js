window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v10482","name":"dlcr_DepTree","subtype":"VIEW","is_user_defined":false,"description":null,"script":"create view dlcr_DepTree as \r\nwith \r\nt as (select left(cdepcode,2) as ckey, cDepCode ccode,bDepEnd bend from Department),\r\n--t as (select left(ccode,4) as ckey, * from code where iyear =2014),\r\nt1 as(\r\nselect \r\n--DENSE_RANK () over (partition by ckey order by igrade desc) descGrade,\r\nccode ,bend\r\nfrom t \r\n)\r\nselect tp.ccode keycode,tc.* from t1 tp inner join \r\nt1 tc on( tc.bend=1 and tp.bend=0 and left(tc.ccode,LEN(tp.ccode))=tp.ccode)\r\nor (tc.bend=tp.bend and tp.bend=1 and tc.ccode=tp.ccode )\r\n--order by tp.ccode,tc.ccode","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"dlcr_DepTree"},{"field":"Type","value":"View"}],"columns":[{"id":"column-190952","object_id":"column-190952","name":"keycode","name_without_path":"keycode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-190953","object_id":"column-190953","name":"ccode","name_without_path":"ccode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-190954","object_id":"column-190954","name":"bend","name_without_path":"bend","description":null,"is_pk":false,"is_identity":false,"data_type":"bit","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};