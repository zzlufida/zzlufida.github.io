window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v10041","name":"BG_V_CaliberDatas","subtype":"VIEW","is_user_defined":false,"description":null,"script":"CREATE VIEW dbo.BG_V_CaliberDatas  \r\nAS  \r\n    SELECT  b.*  \r\n    FROM    ( SELECT    a.cKey ,  \r\n                        ( a.cSortCode + '''' + a.cItemCode + ''''  \r\n                          + b.cOrganCode ) cItemCode ,  \r\n                        a.cItemName ,  \r\n                        c.iLoginYear iyear  \r\n              FROM      dbo.BG_ArchiveData a  \r\n                        INNER JOIN bg_organ b ON b.bOwner = 1  \r\n                                                 AND a.cOrganCode = ''  AND a.cSortCode <> ''\r\n                        INNER JOIN dbo.BG_LoginToMakeYear c ON a.iMakeYear = c.iMakeYear  \r\n                                                              AND b.iMakeYear = c.iMakeYear  \r\n              UNION ALL  \r\n              SELECT    a.cKey ,  \r\n                        ( a.cSortCode + '''' + a.cItemCode + ''''  \r\n                          + a.cOrganCode ) cItemCode ,  \r\n                        a.cItemName ,  \r\n                        c.iLoginYear iyear  \r\n              FROM      dbo.BG_ArchiveData a  \r\n                        INNER JOIN dbo.BG_LoginToMakeYear c ON a.iMakeYear = c.iMakeYear  AND    a.cOrganCode <> ''   AND a.cSortCode <> ''\r\n             \r\n              UNION ALL  \r\n              SELECT     DISTINCT  \r\n                        a.cKey ,  \r\n                        b.cItemCode ,  \r\n                        b.cItemName ,  \r\n                        c.iLoginYear iyear  \r\n              FROM      dbo.BG_Archive AS a  \r\n                        INNER JOIN dbo.BG_ArchiveData AS b ON a.cSortKey = b.cKey  \r\n                        INNER JOIN dbo.BG_LoginToMakeYear AS c ON a.iMakeYear = c.iMakeYear  \r\n                                                              AND b.iMakeYear = c.iMakeYear  \r\n              UNION ALL  \r\n              SELECT    cKey ,  \r\n                        cItemCode ,  \r\n                        cItemName ,  \r\n                        c.iLoginYear iyear  \r\n              FROM      BG_ArchiveData AS a  \r\n                        INNER JOIN dbo.BG_LoginToMakeYear AS c ON a.iMakeYear = c.iMakeYear  AND a.cSortCode = '' AND a.cOrganCode=''\r\n \t          UNION ALL\r\n\t\t\t   SELECT   cKey ,\r\n\t\t\t\t\t\t( a.cItemCode + '''' + a.cOrganCode ) cItemCode ,\r\n\t\t\t\t\t\tcItemName ,\r\n\t\t\t\t\t\tc.iLoginYear iyear\r\n\t\t\t   FROM     BG_ArchiveData AS a\r\n\t\t\t\t\t\tINNER JOIN dbo.BG_LoginToMakeYear AS c ON a.iMakeYear = c.iMakeYear\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  AND a.cSortCode = ''\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  AND a.cOrganCode <> ''\r\n\r\n              UNION ALL  \r\n              SELECT    'Organ' cKey ,  \r\n                        cOrganCode ,  \r\n                        cOrganName ,  \r\n                        c.iLoginYear iyear  \r\n              FROM      BG_Organ AS a  \r\n                        INNER JOIN dbo.BG_LoginToMakeYear AS c ON a.iMakeYear = c.iMakeYear  \r\n            ) AS b  \r\n            INNER JOIN ( SELECT DISTINCT cCaliberKey1 ckey , cCaliberCode1 cItemCode,iYear\r\n                         FROM   dbo.BG_CtrlFactDatas WHERE  cCaliberKey1 <> '' AND cCaliberCode1 <> ''  \r\n                         UNION   \r\n                         SELECT DISTINCT cCaliberKey2 ckey , cCaliberCode2 cItemCode,iYear  \r\n                         FROM   dbo.BG_CtrlFactDatas WHERE  cCaliberKey2 <> '' AND cCaliberCode2 <> ''  \r\n                         UNION   \r\n                         SELECT DISTINCT cCaliberKey3 ckey , cCaliberCode3 cItemCode  ,iYear\r\n                         FROM   dbo.BG_CtrlFactDatas WHERE  cCaliberKey3 <> '' AND cCaliberCode3 <> ''  \r\n                         UNION   \r\n                         SELECT DISTINCT cCaliberKey4 ckey , cCaliberCode4 cItemCode  ,iYear\r\n                         FROM   dbo.BG_CtrlFactDatas WHERE  cCaliberKey4 <> '' AND cCaliberCode4 <> ''  \r\n                         UNION  \r\n                         SELECT DISTINCT cCaliberKey5 ckey , cCaliberCode5 cItemCode  ,iYear\r\n                         FROM   dbo.BG_CtrlFactDatas WHERE  cCaliberKey5 <> '' AND cCaliberCode5 <> ''  \r\n                         UNION   \r\n                         SELECT DISTINCT cCaliberKey6 ckey , cCaliberCode6 cItemCode  ,iYear\r\n                         FROM   dbo.BG_CtrlFactDatas WHERE  cCaliberKey6 <> '' AND cCaliberCode6 <> ''  \r\n                       ) AS a ON a.ckey = b.ckey  \r\n                                 AND a.citemcode = b.citemcode  \r\n                                 AND a.iyear=b.iyear","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"BG_V_CaliberDatas"},{"field":"Type","value":"View"}],"columns":[{"id":"column-173192","object_id":"column-173192","name":"cKey","name_without_path":"cKey","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173193","object_id":"column-173193","name":"cItemCode","name_without_path":"cItemCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"130","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173194","object_id":"column-173194","name":"cItemName","name_without_path":"cItemName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"100","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173195","object_id":"column-173195","name":"iyear","name_without_path":"iyear","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};