window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v12754","name":"v_CO_InvRpt","subtype":"VIEW","is_user_defined":false,"description":null,"script":"CREATE view v_CO_InvRpt(VouchType,iperiod,cDepId,cDepName,InvCode,InvName,invStd,Qty,ReceiveQuan,cType,AmId,AmName,\r\n                        ComUnit,StdQuan,DifQuan,StdCost,QuanDif,fQuanDifO,fPriceDifO,\r\n\t\t\t\t\t\tStdCostL,QuanDifL,MoCode,\r\n                        CreateDate,SortSeq,Closedate,CloseStatus)\r\nas\r\n\r\n-- 联副的材料和制造费用是否需要直接取主表完工数？\r\nselect R.VouchType,\r\n       R.iperiod as 期间,\r\n       R.cDeptId as 成本中心编码,\r\n       Q.cDepName as 成本中心,\r\n       Q.invCode as 产品编码,\r\n       Q.cinvName as 产品名称,\r\n       Q.cinvStd as 规格型号,\r\n       (CASE WHEN producttype = 1 THEN 0 ELSE D.Qty END) as 订单数量,\r\n       R.ReceiveQuan as 本期完工数量,\r\n       '直接材料' as 类型,\r\n       RTrim(Rs.cInvCode) as 项目编码,\r\n       I1.InvName as 项目名称,\r\n       Q.cInvM_Unit as 主计量,\r\n       isnull(Rs.stdquanOS,0)  as 标准数量,\r\n       isnull(Rs.stdquanOD,0)  as 超用数量,\r\n       Rs.stdCostO  as 标准成本,\r\n       Rs.quanDifO  as 量差,\r\n\t\t0,0,\r\n       0,\r\n       Rs.quanDifL,\r\n       Q.cMOCode as 生产订单,\r\n       M.CreateDate as 订单日期,\r\n       Q.iMOSubSN as 订单行号,\r\n       D.CloseDate as 关闭日期,\r\n       case when D.CloseDate is null  then '1' else '2' end as 关闭状态\r\nfrom pl_CO_CalResult R\r\n\t inner join caq_coreal Q on R.iRealCOID=Q.iRealCOID\r\n     inner join mom_orderdetail D on D.Modid=R.Modid\r\n     inner join mom_order M on D.Moid=M.Moid\r\n     inner join pl_CO_CalResults Rs on R.ID=Rs.ID\r\n     inner join v_bas_inventory I1 on I1.InvCode=Rs.cInvCode\r\n\t where R.VouchType = 0\r\n\r\nunion all \r\n\r\nselect R.VouchType,\r\n       R.iperiod as 期间,\r\n       R.cDeptId as 成本中心编码,\r\n       C.cName as 成本中心,\r\n       D.cinvCode as 产品编码,\r\n       I.invName as 产品名称,\r\n       ISNULL(I.invStd,'') as 规格型号,\r\n       D.iQuantity as 订单数量,\r\n       R.ReceiveQuan as 本期完工数量,\r\n       '直接材料' as 类型,\r\n       RTrim(Rs.cInvCode) as 项目编码,\r\n       I1.InvName as 项目名称,\r\n       I.ComUnitName as 主计量,\r\n       isnull(Rs.stdquanOS,0)  as 标准数量,\r\n       isnull(Rs.stdquanOD,0)  as 超用数量,\r\n       Rs.stdCostO  as 标准成本,\r\n       Rs.quanDifO  as 量差,\r\n\t\t0,0,\r\n       0,\r\n       Rs.quanDifL,\r\n       M.cCode as 生产订单,\r\n       M.dVerifyDate as 订单日期,\r\n       D.MODetailsID as 订单行号,\r\n       D.dbCloseDate as 关闭日期,\r\n       case when D.dbCloseDate is null  then '1' else '2' end as 关闭状态\r\nfrom pl_CO_CalResult R\r\n     inner join CA_CostCenter C on R.cDeptId=C.cCode\r\n     inner join OM_MODetails D on D.MODetailsID=R.Modid\r\n     inner join OM_MOMain M on D.Moid=M.Moid\r\n     inner join v_bas_inventory I on I.InvCode=D.cInvCode\r\n     left join pl_CO_CalResults Rs on R.ID=Rs.ID\r\n     inner join v_bas_inventory I1 on I1.InvCode=Rs.cInvCode\r\n\t where R.VouchType = 1\r\n\r\nunion all\r\n\r\nselect R.VouchType,\r\n       R.iperiod as 期间,\r\n       R.cDeptId as 成本中心编码,\r\n       Q.cDepName as 成本中心,\r\n       Q.invCode as 产品编码,\r\n       Q.cinvName as 产品名称,\r\n       Q.cinvStd as 规格型号,\r\n       (CASE WHEN producttype = 1 THEN 0 ELSE D.Qty END) as 订单数量,\r\n       R.ReceiveQuan as 本期完工数量,\r\n       '直接人工' as 类型,\r\n       '0' as 项目编码,\r\n       '直接人工' as 项目名称,\r\n       Q.cInvM_Unit as 主计量,\r\n       null as 标准数量,\r\n       null as 超用数量,\r\n       Rs.fstdcostO  as 标准成本,\r\n\t0,\r\n\tRs.fquanDifO,\r\n\tRs.fPriceDifO,\r\n       R.fLaborStdCostL,\r\n       0,\r\n       Q.cMOCode as 生产订单,\r\n       M.CreateDate as 订单日期,\r\n       Q.iMOSubSN as 订单行号,\r\n       D.CloseDate as 关闭日期,\r\n       case when D.CloseDate is null  then '1' else '2' end as 关闭状态\r\nfrom pl_CO_CalResult R\r\n\t inner join caq_coreal Q on R.iRealCOID=Q.iRealCOID\r\n     inner join mom_orderdetail D on D.Modid=R.Modid\r\n     inner join mom_order M on D.Moid=M.Moid\r\n     inner join pl_CO_CalResultCost Rs on R.ID=Rs.ID \r\n\t where R.VouchType = 0 and Rs.cAmoID = 0\r\n------------------------------------------------------------\r\nunion all\r\n\r\nselect R.VouchType,\r\n       R.iperiod as 期间,\r\n       R.cDeptId as 成本中心编码,\r\n       Q.cDepName as 成本中心,\r\n       Q.invCode as 产品编码,\r\n       Q.cinvName as 产品名称,\r\n       Q.cinvStd as 规格型号,\r\n       (CASE WHEN producttype = 1 THEN 0 ELSE D.Qty END) as 订单数量,\r\n       R.ReceiveQuan as 本期完工数量,\r\n       类型=case when Rs.iAttribute='1' then '固定制造费用' else '变动制造费用' end,\r\n       convert(nvarchar(20),Rs.iAttribute) as 项目编码,\r\n       项目名称=case when Rs.iAttribute='1' then '固定制造费用' else '变动制造费用' end,\r\n       Q.cInvM_Unit as 主计量,\r\n       null as 标准数量,\r\n       null as 超用数量,\r\n       Rs.fstdcostO  as 标准成本,\r\n       0  as 量差,\r\n       Rs.fquanDifO,\r\n       Rs.fPriceDifO,\r\n       (case when Rs.iAttribute='1' then R.fManuFixStdCostL else R.fManuVarStdCostL end),\r\n       0,\r\n       Q.cMOCode as 生产订单,\r\n       M.CreateDate as 订单日期,\r\n       Q.iMOSubSN as 订单行号,\r\n       D.CloseDate as 关闭日期,\r\n       case when D.CloseDate is null  then '1' else '2' end as 关闭状态\r\nfrom pl_CO_CalResult R\r\n\t inner join caq_coreal Q on R.iRealCOID=Q.iRealCOID\r\n     inner join mom_orderdetail D on D.Modid=R.Modid\r\n     inner join mom_order M on D.Moid=M.Moid\r\n     inner join (SELECT ID,iAttribute,\r\n\t\t\t\t\tSUM(fstdcostO) AS fstdcostO, SUM(fquanDifO) AS fquanDifO,SUM(fPriceDifO) AS fPriceDifO\r\n\t\t\t\t\t\tFROM pl_CO_CalResultCost WHERE cAmoID > 0 GROUP BY ID,iAttribute) Rs \r\n\t\t\tON R.ID=Rs.ID \r\nwhere R.VouchType = 0\r\n\r\nunion all\r\n\r\n-- 加工费\r\nselect R.VouchType,\r\n       R.iperiod as 期间,\r\n       R.cDeptId as 成本中心编码,\r\n       C.cName as 成本中心,\r\n       D.cinvCode as 产品编码,\r\n       I.invName as 产品名称,\r\n       ISNULL(I.invStd,'') as 规格型号,\r\n       D.iQuantity as 订单数量,\r\n       R.ReceiveQuan as 本期完工数量,\r\n       '加工费' as 类型,\r\n       '-1' as 项目编码,\r\n       '加工费' as 项目名称,\r\n       I.ComUnitName as 主计量,\r\n       null as 标准数量,\r\n       null as 超用数量,\r\n       fOmCostO  as 标准成本,\r\n\t\t0,\r\n       fOmCostDifO,\r\n\t\t0,\r\n       fOmCostL,\r\n       0,\r\n       M.cCode as 生产订单,\r\n       M.dVerifyDate as 订单日期,\r\n       D.MODetailsID as 订单行号,\r\n       D.dbCloseDate as 关闭日期,\r\n       case when D.dbCloseDate is null  then '1' else '2' end as 关闭状态\r\n\r\nfrom pl_CO_CalResult R\r\n     inner join CA_CostCenter C on R.cDeptId=C.cCode\r\n     inner join OM_MODetails D on D.MODetailsID=R.Modid\r\n     inner join OM_MOMain M on D.Moid=M.Moid\r\n     inner join v_bas_inventory I on I.InvCode=D.cInvCode\r\n\t where R.VouchType = 1","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"v_CO_InvRpt"},{"field":"Type","value":"View"}],"columns":[{"id":"column-318560","object_id":"column-318560","name":"VouchType","name_without_path":"VouchType","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"2","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318561","object_id":"column-318561","name":"iperiod","name_without_path":"iperiod","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318562","object_id":"column-318562","name":"cDepId","name_without_path":"cDepId","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318563","object_id":"column-318563","name":"cDepName","name_without_path":"cDepName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"100","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318564","object_id":"column-318564","name":"InvCode","name_without_path":"InvCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318565","object_id":"column-318565","name":"InvName","name_without_path":"InvName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318566","object_id":"column-318566","name":"invStd","name_without_path":"invStd","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318585","object_id":"column-318585","name":"Qty","name_without_path":"Qty","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"28, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318567","object_id":"column-318567","name":"ReceiveQuan","name_without_path":"ReceiveQuan","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318568","object_id":"column-318568","name":"cType","name_without_path":"cType","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"12","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318569","object_id":"column-318569","name":"AmId","name_without_path":"AmId","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318570","object_id":"column-318570","name":"AmName","name_without_path":"AmName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318571","object_id":"column-318571","name":"ComUnit","name_without_path":"ComUnit","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318572","object_id":"column-318572","name":"StdQuan","name_without_path":"StdQuan","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318573","object_id":"column-318573","name":"DifQuan","name_without_path":"DifQuan","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318574","object_id":"column-318574","name":"StdCost","name_without_path":"StdCost","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318575","object_id":"column-318575","name":"QuanDif","name_without_path":"QuanDif","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318576","object_id":"column-318576","name":"fQuanDifO","name_without_path":"fQuanDifO","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318577","object_id":"column-318577","name":"fPriceDifO","name_without_path":"fPriceDifO","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318578","object_id":"column-318578","name":"StdCostL","name_without_path":"StdCostL","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318579","object_id":"column-318579","name":"QuanDifL","name_without_path":"QuanDifL","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318580","object_id":"column-318580","name":"MoCode","name_without_path":"MoCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318581","object_id":"column-318581","name":"CreateDate","name_without_path":"CreateDate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318582","object_id":"column-318582","name":"SortSeq","name_without_path":"SortSeq","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318583","object_id":"column-318583","name":"Closedate","name_without_path":"Closedate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-318584","object_id":"column-318584","name":"CloseStatus","name_without_path":"CloseStatus","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"1","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};