window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v11709","name":"NE_LoanVouch_ExpenseOrReturn_View","subtype":"VIEW","is_user_defined":false,"description":null,"script":"CREATE  VIEW [dbo].[NE_LoanVouch_ExpenseOrReturn_View]  \r\nAS  \r\nSELECT NEWID() AS ID,* FROM \r\n(  \r\n    SELECT  --NEWID() AS ID ,  \r\n            Loan_sub.LoanVouchID ,  \r\n            Expense.OperationTypeCode AS TypeCode ,  \r\n            NE_OperationType.Name AS TypeName ,  \r\n            Expense.Code AS VouchCode ,  \r\n            Expense.name AS VouchName ,  \r\n            Info.VerificateMoney AS CurrentMoney ,  \r\n            '' AS BillNumber ,  \r\n            Expense.ExpenseDate AS CurrentDate ,  \r\n            [HR_HI_PersonEntity_人员档案].cPsn_Name AS PersonID ,  \r\n            Info.IsUsed AS IsUsed,\r\n\t\t\tInfo.ID  as ExpenseReturnID \r\n\t\t\t--add by zhuzx1 for U82021080600546 冲借款金额和人员相同时查出的数据相同，union时会被过滤掉，增加冲借款信息id加以区分\r\n    FROM    NE_ExpenseLoanInfo AS Info WITH ( NOLOCK )  \r\n            INNER JOIN NE_ExpenVouch AS Expense WITH ( NOLOCK ) ON Expense.ID = info.ExpenseVouchID  \r\n            INNER JOIN NE_LoanVouch_Sub AS Loan_sub WITH ( NOLOCK ) ON info.LoanVouchSubID = Loan_sub.ID  \r\n            INNER JOIN NE_OperationType WITH ( NOLOCK ) ON NE_OperationType.Code = Expense.OperationTypeCode  \r\n            LEFT JOIN [hr_hi_person] AS [HR_HI_PersonEntity_人员档案] WITH ( NOLOCK ) ON Expense.ExpenserID = [HR_HI_PersonEntity_人员档案].[cPsn_Num]  \r\n    --WHERE   Info.IsUsed = 0  --借款单报销还款联，在冲借款指定时就显示信息\r\n    UNION  \r\n    SELECT  --NEWID() AS ID ,  \r\n            LoanVouch.ID ,  \r\n            ReturnVouch.OperationTypeCode AS TypeCode ,  \r\n            NE_OperationType.Name AS TypeName ,  \r\n            ReturnVouch.Code AS VouchCode ,  \r\n            ReturnVouch.Name AS VouchName ,  \r\n            Info.ReturnMoney AS CurrentMoney ,  \r\n            '' AS BillNumber ,  \r\n            ReturnVouch.ReturnDate AS CurrentDate ,  \r\n            [HR_HI_PersonEntity_人员档案].cPsn_Name AS PersonID ,  \r\n            CASE WHEN ReturnInfo.IsUsed = '1' THEN '1'  \r\n                 ELSE '0'  \r\n            END AS IsUsed  ,\r\n\t\t\tInfo.ID  as ExpenseReturnID\r\n    FROM    NE_ReturnLoanInfo AS Info WITH ( NOLOCK )  \r\n            INNER JOIN NE_ReturnVouch AS ReturnVouch WITH ( NOLOCK ) ON ReturnVouch.ID = info.ReturnVouchID  \r\n            INNER JOIN NE_LoanVouch_Sub AS LoanVouch_Sub WITH ( NOLOCK ) ON info.LoanVouchSubID = LoanVouch_Sub.ID  \r\n            INNER JOIN NE_LoanVouch AS LoanVouch WITH ( NOLOCK ) ON LoanVouch_Sub.LoanVouchID = LoanVouch.ID  \r\n            INNER JOIN NE_OperationType WITH ( NOLOCK ) ON NE_OperationType.Code = ReturnVouch.OperationTypeCode  \r\n            LEFT JOIN [hr_hi_person] AS [HR_HI_PersonEntity_人员档案] WITH ( NOLOCK ) ON ReturnVouch.ReturnPersonID = [HR_HI_PersonEntity_人员档案].[cPsn_Num]  \r\n            LEFT JOIN NE_ReturnReceiptInfo AS ReturnInfo WITH ( NOLOCK ) ON LoanVouch_Sub.ID = ReturnInfo.LoanBalanceID AND ReturnInfo.ReturnVouchID =Info.ReturnVouchID  \r\n) AS a","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"NE_LoanVouch_ExpenseOrReturn_View"},{"field":"Type","value":"View"}],"columns":[{"id":"column-249785","object_id":"column-249785","name":"ID","name_without_path":"ID","description":null,"is_pk":false,"is_identity":false,"data_type":"uniqueidentifier","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249786","object_id":"column-249786","name":"LoanVouchID","name_without_path":"LoanVouchID","description":null,"is_pk":false,"is_identity":false,"data_type":"uniqueidentifier","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249787","object_id":"column-249787","name":"TypeCode","name_without_path":"TypeCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249788","object_id":"column-249788","name":"TypeName","name_without_path":"TypeName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249789","object_id":"column-249789","name":"VouchCode","name_without_path":"VouchCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249790","object_id":"column-249790","name":"VouchName","name_without_path":"VouchName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249791","object_id":"column-249791","name":"CurrentMoney","name_without_path":"CurrentMoney","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"12, 2","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249792","object_id":"column-249792","name":"BillNumber","name_without_path":"BillNumber","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"1","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249793","object_id":"column-249793","name":"CurrentDate","name_without_path":"CurrentDate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249794","object_id":"column-249794","name":"PersonID","name_without_path":"PersonID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249795","object_id":"column-249795","name":"IsUsed","name_without_path":"IsUsed","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-249796","object_id":"column-249796","name":"ExpenseReturnID","name_without_path":"ExpenseReturnID","description":null,"is_pk":false,"is_identity":false,"data_type":"uniqueidentifier","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};