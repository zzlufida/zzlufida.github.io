window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v10036","name":"BG_MKV_GroupBudgetQueryEx","subtype":"VIEW","is_user_defined":false,"description":null,"script":"CREATE VIEW [dbo].BG_MKV_GroupBudgetQueryEx\r\nAS\r\n    SELECT  t3.*, BG_GroupFormItemTargetGroup.iPeriodType,\r\n            CASE WHEN ( BG_GroupFormItemTargetGroup.bInput = 1\r\n                        AND ( BG_GroupFormInputCaliber.bInput = 1\r\n                              OR BG_GroupFormInputCaliber.bInput IS NULL\r\n                            )\r\n                      ) THEN 1\r\n                 ELSE 0\r\n            END AS bInput, NULL cVersionCode, 0 bDynamic\r\n    FROM    ( SELECT DISTINCT\r\n                        t1.cFormCode, t1.iPosition AS iRowPos,\r\n                        t2.iPosition AS iColPos,\r\n                        CASE WHEN t1.cItemCode = '' THEN t2.cItemCode\r\n                             ELSE t1.cItemCode\r\n                        END AS cItemCode,\r\n                        CASE WHEN t1.cTargetCode = '' THEN t2.cTargetCode\r\n                             ELSE t1.cTargetCode\r\n                        END AS cTargetCode,\r\n                        CASE WHEN t1.cColumnCode = '' THEN t2.cColumnCode\r\n                             ELSE t1.cColumnCode\r\n                        END AS cColumnCode,\r\n                        CASE WHEN t1.cCaliberKey1 = '' THEN t2.cCaliberKey1\r\n                             ELSE t1.cCaliberKey1\r\n                        END AS cCaliberKey1,\r\n                        CASE WHEN t1.cCaliberCode1 = '' THEN t2.cCaliberCode1\r\n                             ELSE t1.cCaliberCode1\r\n                        END AS cCaliberCode1,\r\n                        CASE WHEN t1.cCaliberKey2 = '' THEN t2.cCaliberKey2\r\n                             ELSE t1.cCaliberKey2\r\n                        END AS cCaliberKey2,\r\n                        CASE WHEN t1.cCaliberCode2 = '' THEN t2.cCaliberCode2\r\n                             ELSE t1.cCaliberCode2\r\n                        END AS cCaliberCode2,\r\n                        CASE WHEN t1.cCaliberKey3 = '' THEN t2.cCaliberKey3\r\n                             ELSE t1.cCaliberKey3\r\n                        END AS cCaliberKey3,\r\n                        CASE WHEN t1.cCaliberCode3 = '' THEN t2.cCaliberCode3\r\n                             ELSE t1.cCaliberCode3\r\n                        END AS cCaliberCode3,\r\n                        CASE WHEN t1.cCaliberKey4 = '' THEN t2.cCaliberKey4\r\n                             ELSE t1.cCaliberKey4\r\n                        END AS cCaliberKey4,\r\n                        CASE WHEN t1.cCaliberCode4 = '' THEN t2.cCaliberCode4\r\n                             ELSE t1.cCaliberCode4\r\n                        END AS cCaliberCode4,\r\n                        CASE WHEN t1.cCaliberKey5 = '' THEN t2.cCaliberKey5\r\n                             ELSE t1.cCaliberKey5\r\n                        END AS cCaliberKey5,\r\n                        CASE WHEN t1.cCaliberCode5 = '' THEN t2.cCaliberCode5\r\n                             ELSE t1.cCaliberCode5\r\n                        END AS cCaliberCode5,\r\n                        CASE WHEN t1.cCaliberKey6 = '' THEN t2.cCaliberKey6\r\n                             ELSE t1.cCaliberKey6\r\n                        END AS cCaliberKey6,\r\n                        CASE WHEN t1.cCaliberCode6 = '' THEN t2.cCaliberCode6\r\n                             ELSE t1.cCaliberCode6\r\n                        END AS cCaliberCode6,\r\n                        COALESCE(t1.iPeriod, t2.iPeriod) AS iPeriod, iYear\r\n              FROM      ( SELECT    BG_GroupForm.cFormCode, cItemGroup,\r\n                                    iPosition, cItemCode, iPeriod, cTargetCode,\r\n                                    cColumnCode,\r\n                                    BG_GroupFormCoordinateConstitute.cCaliberKey1,\r\n                                    BG_GroupFormCoordinateConstitute.cCaliberCode1,\r\n                                    BG_GroupFormCoordinateConstitute.cCaliberKey2,\r\n                                    BG_GroupFormCoordinateConstitute.cCaliberCode2,\r\n                                    BG_GroupFormCoordinateConstitute.cCaliberKey3,\r\n                                    BG_GroupFormCoordinateConstitute.cCaliberCode3,\r\n                                    BG_GroupFormCoordinateConstitute.cCaliberKey4,\r\n                                    BG_GroupFormCoordinateConstitute.cCaliberCode4,\r\n                                    BG_GroupFormCoordinateConstitute.cCaliberKey5,\r\n                                    BG_GroupFormCoordinateConstitute.cCaliberCode5,\r\n                                    BG_GroupFormCoordinateConstitute.cCaliberKey6,\r\n                                    BG_GroupFormCoordinateConstitute.cCaliberCode6,\r\n                                    iyear\r\n                          FROM      BG_GroupFormCoordinateConstitute\r\n                                    INNER JOIN BG_GroupForm ON BG_GroupFormCoordinateConstitute.cFormCode = BG_GroupForm.cFormCode\r\n                          WHERE     ( iDirection = N'0' )\r\n                        ) t1\r\n                        INNER JOIN ( SELECT BG_GroupForm.cFormCode, cItemGroup,\r\n                                            iPosition,\r\n                                            MAX(cItemCode) AS cItemCode,\r\n                                            MAX(iPeriod) AS iPeriod,\r\n                                            MAX(cTargetCode) AS cTargetCode,\r\n                                            MAX(cColumnCode) AS cColumnCode,\r\n                                            MAX(c.cCaliberKey1) AS cCaliberKey1,\r\n                                            MAX(c.cCaliberCode1) AS cCaliberCode1,\r\n                                            MAX(c.cCaliberKey2) AS cCaliberKey2,\r\n                                            MAX(c.cCaliberCode2) AS cCaliberCode2,\r\n                                            MAX(c.cCaliberKey3) AS cCaliberKey3,\r\n                                            MAX(c.cCaliberCode3) AS cCaliberCode3,\r\n                                            MAX(c.cCaliberKey4) AS cCaliberKey4,\r\n                                            MAX(c.cCaliberCode4) AS cCaliberCode4,\r\n                                            MAX(c.cCaliberKey5) AS cCaliberKey5,\r\n                                            MAX(cCaliberCode5) AS cCaliberCode5,\r\n                                            MAX(c.cCaliberKey6) AS cCaliberKey6,\r\n                                            MAX(c.cCaliberCode6) AS cCaliberCode6\r\n                                     FROM   BG_GroupFormCoordinateConstitute c\r\n                                            INNER JOIN BG_GroupForm ON c.cFormCode = BG_GroupForm.cFormCode\r\n                                     WHERE  ( iDirection = N'1' )\r\n                                     GROUP BY BG_GroupForm.cFormCode,\r\n                                            cItemGroup, iPosition\r\n                                   ) t2 ON t1.cItemGroup = t2.cItemGroup\r\n                                           AND t1.cFormCode = t2.cFormCode\r\n            ) t3\r\n            INNER JOIN BG_GroupFormItemTargetGroup ON t3.cItemCode = BG_GroupFormItemTargetGroup.cItemCode\r\n                                                      AND RIGHT(t3.cTargetCode,\r\n                                                              3) = BG_GroupFormItemTargetGroup.cTargetGroup\r\n                                                      AND t3.cFormCode = BG_GroupFormItemTargetGroup.cFormCode\r\n            LEFT JOIN BG_GroupFormInputCaliber ON t3.cFormCode = BG_GroupFormInputCaliber.cFormCode\r\n                                                  AND t3.cCaliberCode1 = BG_GroupFormInputCaliber.cCaliberCode1\r\n                                                  AND t3.cCaliberCode2 = BG_GroupFormInputCaliber.cCaliberCode2\r\n                                                  AND t3.cCaliberCode3 = BG_GroupFormInputCaliber.cCaliberCode3\r\n                                                  AND t3.cCaliberCode4 = BG_GroupFormInputCaliber.cCaliberCode4\r\n                                                  AND t3.cCaliberCode5 = BG_GroupFormInputCaliber.cCaliberCode5\r\n                                                  AND t3.cCaliberCode6 = BG_GroupFormInputCaliber.cCaliberCode6\r\n    UNION ALL\r\n    SELECT  *\r\n    FROM    BG_MKV_GroupBudgetQueryDynamic","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"BG_MKV_GroupBudgetQueryEx"},{"field":"Type","value":"View"}],"columns":[{"id":"column-173106","object_id":"column-173106","name":"cFormCode","name_without_path":"cFormCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"10","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173107","object_id":"column-173107","name":"iRowPos","name_without_path":"iRowPos","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173108","object_id":"column-173108","name":"iColPos","name_without_path":"iColPos","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173109","object_id":"column-173109","name":"cItemCode","name_without_path":"cItemCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173110","object_id":"column-173110","name":"cTargetCode","name_without_path":"cTargetCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173111","object_id":"column-173111","name":"cColumnCode","name_without_path":"cColumnCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173112","object_id":"column-173112","name":"cCaliberKey1","name_without_path":"cCaliberKey1","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"90","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173113","object_id":"column-173113","name":"cCaliberCode1","name_without_path":"cCaliberCode1","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"90","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173114","object_id":"column-173114","name":"cCaliberKey2","name_without_path":"cCaliberKey2","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"90","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173115","object_id":"column-173115","name":"cCaliberCode2","name_without_path":"cCaliberCode2","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"90","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173116","object_id":"column-173116","name":"cCaliberKey3","name_without_path":"cCaliberKey3","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"90","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173117","object_id":"column-173117","name":"cCaliberCode3","name_without_path":"cCaliberCode3","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"90","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173118","object_id":"column-173118","name":"cCaliberKey4","name_without_path":"cCaliberKey4","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"90","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173119","object_id":"column-173119","name":"cCaliberCode4","name_without_path":"cCaliberCode4","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"90","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173120","object_id":"column-173120","name":"cCaliberKey5","name_without_path":"cCaliberKey5","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"90","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173121","object_id":"column-173121","name":"cCaliberCode5","name_without_path":"cCaliberCode5","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"90","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173122","object_id":"column-173122","name":"cCaliberKey6","name_without_path":"cCaliberKey6","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"90","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173123","object_id":"column-173123","name":"cCaliberCode6","name_without_path":"cCaliberCode6","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"90","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173124","object_id":"column-173124","name":"iPeriod","name_without_path":"iPeriod","description":null,"is_pk":false,"is_identity":false,"data_type":"smallint","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173125","object_id":"column-173125","name":"iYear","name_without_path":"iYear","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173126","object_id":"column-173126","name":"iPeriodType","name_without_path":"iPeriodType","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173127","object_id":"column-173127","name":"bInput","name_without_path":"bInput","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173128","object_id":"column-173128","name":"cVersionCode","name_without_path":"cVersionCode","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-173129","object_id":"column-173129","name":"bDynamic","name_without_path":"bDynamic","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};