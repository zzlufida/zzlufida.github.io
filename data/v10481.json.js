window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v10481","name":"dlcr_CodeTree","subtype":"VIEW","is_user_defined":false,"description":null,"script":"create view dlcr_CodeTree as \r\nwith \r\n--t as (select left(cdepcode,2) as ckey, cDepCode ccode,bDepEnd bend from Department),\r\nt as (select left(ccode,4) as ckey, * from code ),\r\nt1 as(\r\nselect \r\n--DENSE_RANK () over (partition by ckey order by igrade desc) descGrade,\r\nccode ,bend,iyear\r\nfrom t \r\n)\r\nselect tp.ccode keycode,tc.* from t1 tp inner join \r\nt1 tc on( tc.bend=1 and tp.bend=0 and left(tc.ccode,LEN(tp.ccode))=tp.ccode and tc.iyear=tp.iyear)\r\nor (tc.bend=tp.bend and tp.bend=1 and tc.ccode=tp.ccode and tc.iyear=tp.iyear )\r\n--order by tp.ccode,tc.ccode","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"dlcr_CodeTree"},{"field":"Type","value":"View"}],"columns":[{"id":"column-190948","object_id":"column-190948","name":"keycode","name_without_path":"keycode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-190949","object_id":"column-190949","name":"ccode","name_without_path":"ccode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-190950","object_id":"column-190950","name":"bend","name_without_path":"bend","description":null,"is_pk":false,"is_identity":false,"data_type":"bit","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-190951","object_id":"column-190951","name":"iyear","name_without_path":"iyear","description":null,"is_pk":false,"is_identity":false,"data_type":"smallint","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};