window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v10446","name":"CRM_SALESPHASE_LIST","subtype":"VIEW","is_user_defined":false,"description":null,"script":"-- ============================\r\n-- kzy\r\n-- 2005.06.30\r\n-- 增加销售配额的公司编码\r\n-- ============================\r\n-- 列表\r\nCREATE VIEW DBO.CRM_SALESPHASE_LIST\r\nAS\r\nSELECT \r\n     quota.OID, quota.AutoID as id, [cSPQuotaCode] as cSPQuotaCode,\r\n[SalesModeID] as SalesModeID,[cSalModeCode] as SalModeCode ,[cSalModeName] as SalModeName,\r\n[cQuotaObject] as cQuotaObject,     \r\nbaseCodeQuotaType.cName  as cQuotaTag\r\n     ,cDepName as cQuotaObjectName,\r\n[fAdjustRate] as fAdjustRate, \r\n[mSaleroomPerMonth] as mSaleroomPerMonth, [fSPQuotaGene] as fSPQuotaGene, \r\nquota.cRevisor, quota.cCreator, quota.dCreatDate,\r\nquota.dModifyDate,[cSPQuotaMemo] as cSPQuotaMemo,\r\n--replace(cast(coalesce(sum(mPerfectSaleroom),0.00) as decimal(20,2)),N'.0',N'.0') as PerfectSaleroom,\r\ncast(coalesce(sum(mPerfectSaleroom),0.00) as decimal(20,2)) as PerfectSaleroom,\r\ncast(coalesce(sum(fPerfectCusQuan),0) as decimal(20,0)) as PerfectCusQuan\r\nFROM [Crm_SalPhaseQuota] quota \r\nleft join department  dept on quota.cQuotaObject = dept.cDepCode\r\nleft join crm_salesmode salmode on quota.SalesModeID = salmode.OID\r\nleft join crm_salphasequota_s quotaItem on quota.OID = quotaItem.quotaid\r\nleft join crm_basecode baseCodeQuotaType on quota.cQuotaTag = baseCodeQuotaType.cCode and baseCodeQuotaType.cType = N'QuotaType'\r\nwhere cQuotaTag = N'D'\r\ngroup by  quota.OID, quota.AutoID,cSPQuotaCode,SalesModeID,cSalModeCode,cSalModeName,\r\ncQuotaObject,cQuotaTag,cDepName,fAdjustRate,mSaleroomPerMonth,fSPQuotaGene,\r\nquota.cRevisor, quota.cCreator,quota.dCreatDate,quota.dModifyDate,cSPQuotaMemo,baseCodeQuotaType.cName\r\nunion all\r\nSELECT \r\n         quota.OID, quota.AutoID as id, [cSPQuotaCode] as cSPQuotaCode,\r\n[SalesModeID] as SalesModeID,[cSalModeCode] as SalModeCode ,[cSalModeName] as SalModeName,\r\n[cQuotaObject] as cQuotaObject,   \r\n baseCodeQuotaType.cName  as cQuotaTag \r\n      ,cPersonName as cQuotaObjectName,\r\n[fAdjustRate] as fAdjustRate, \r\n[mSaleroomPerMonth] as mSaleroomPerMonth, [fSPQuotaGene] as fSPQuotaGene, \r\n     quota.cRevisor, quota.cCreator, quota.dCreatDate, quota.dModifyDate, [cSPQuotaMemo] as cSPQuotaMemo,\r\n--replace(cast(coalesce(sum(mPerfectSaleroom),0.00) as decimal(20,0)),N'.0',N'.0') as PerfectSaleroom,\r\ncast(coalesce(sum(mPerfectSaleroom),0.00) as decimal(20,2)) as PerfectSaleroom,\r\ncast(coalesce(sum(fPerfectCusQuan),0) as decimal(20,0)) as PerfectCusQuan\r\nFROM [Crm_SalPhaseQuota] quota \r\nleft join person psn on quota.cQuotaObject = psn.cPersonCode\r\nleft join crm_salesmode salmode on quota.SalesModeID = salmode.OID\r\nleft join crm_salphasequota_s quotaItem on quota.OID = quotaItem.quotaid\r\nleft join crm_basecode baseCodeQuotaType on quota.cQuotaTag = baseCodeQuotaType.cCode and baseCodeQuotaType.cType = N'QuotaType'\r\nwhere cQuotaTag = N'P'\r\ngroup by  quota.OID, quota.AutoID,cSPQuotaCode,SalesModeID,cSalModeCode,cSalModeName,\r\ncQuotaObject,cQuotaTag,cPersonName,fAdjustRate,mSaleroomPerMonth,fSPQuotaGene,\r\nquota.cRevisor, quota.cCreator,quota.dCreatDate,quota.dModifyDate,cSPQuotaMemo,baseCodeQuotaType.cName\r\nunion all\r\nSELECT \r\n         quota.OID, quota.AutoID as id, [cSPQuotaCode] as cSPQuotaCode,\r\n[SalesModeID] as SalesModeID,[cSalModeCode] as SalModeCode ,[cSalModeName] as SalModeName,\r\ncQuotaObject as cQuotaObject, \r\n baseCodeQuotaType.cName  as cQuotaTag \r\n      ,cUnitName as cQuotaObjectName,\r\n[fAdjustRate] as fAdjustRate, \r\n[mSaleroomPerMonth] as mSaleroomPerMonth, [fSPQuotaGene] as fSPQuotaGene, \r\n     quota.cRevisor, quota.cCreator, quota.dCreatDate, quota.dModifyDate, [cSPQuotaMemo] as cSPQuotaMemo,\r\n--replace(cast(coalesce(sum(mPerfectSaleroom),0.00) as decimal(20,2)),N'.0',N'.0') as PerfectSaleroom,\r\ncast(coalesce(sum(mPerfectSaleroom),0.00) as decimal(20,2)) as PerfectSaleroom,\r\ncast(coalesce(sum(fPerfectCusQuan),0) as decimal(20,0)) as PerfectCusQuan\r\nFROM [Crm_SalPhaseQuota] quota \r\nleft join crm_salesmode salmode on quota.SalesModeID = salmode.OID\r\nleft join crm_salphasequota_s quotaItem on quota.OID = quotaItem.quotaid\r\nleft join crm_basecode baseCodeQuotaType on quota.cQuotaTag = baseCodeQuotaType.cCode and baseCodeQuotaType.cType = N'QuotaType'\r\ninner join [ufsystem].[dbo].[ua_account] on [cAcc_iD]=cQuotaObject\r\nwhere cQuotaTag = N'C'\r\ngroup by  quota.OID, quota.AutoID,cSPQuotaCode,SalesModeID,cSalModeCode,cSalModeName,\r\ncUnitName,cQuotaObject,cQuotaTag,cQuotaTag,fAdjustRate,mSaleroomPerMonth,fSPQuotaGene,\r\nquota.cRevisor, quota.cCreator,quota.dCreatDate,quota.dModifyDate,cSPQuotaMemo,baseCodeQuotaType.cName","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"CRM_SALESPHASE_LIST"},{"field":"Type","value":"View"}],"columns":[{"id":"column-189428","object_id":"column-189428","name":"OID","name_without_path":"OID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189429","object_id":"column-189429","name":"id","name_without_path":"id","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189430","object_id":"column-189430","name":"cSPQuotaCode","name_without_path":"cSPQuotaCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189431","object_id":"column-189431","name":"SalesModeID","name_without_path":"SalesModeID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189432","object_id":"column-189432","name":"SalModeCode","name_without_path":"SalModeCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189433","object_id":"column-189433","name":"SalModeName","name_without_path":"SalModeName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189434","object_id":"column-189434","name":"cQuotaObject","name_without_path":"cQuotaObject","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"140","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189435","object_id":"column-189435","name":"cQuotaTag","name_without_path":"cQuotaTag","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"500","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189436","object_id":"column-189436","name":"cQuotaObjectName","name_without_path":"cQuotaObjectName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189437","object_id":"column-189437","name":"fAdjustRate","name_without_path":"fAdjustRate","description":null,"is_pk":false,"is_identity":false,"data_type":"float","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189438","object_id":"column-189438","name":"mSaleroomPerMonth","name_without_path":"mSaleroomPerMonth","description":null,"is_pk":false,"is_identity":false,"data_type":"money","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189439","object_id":"column-189439","name":"fSPQuotaGene","name_without_path":"fSPQuotaGene","description":null,"is_pk":false,"is_identity":false,"data_type":"float","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189440","object_id":"column-189440","name":"cRevisor","name_without_path":"cRevisor","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189441","object_id":"column-189441","name":"cCreator","name_without_path":"cCreator","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189442","object_id":"column-189442","name":"dCreatDate","name_without_path":"dCreatDate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189443","object_id":"column-189443","name":"dModifyDate","name_without_path":"dModifyDate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189444","object_id":"column-189444","name":"cSPQuotaMemo","name_without_path":"cSPQuotaMemo","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"512","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189445","object_id":"column-189445","name":"PerfectSaleroom","name_without_path":"PerfectSaleroom","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"20, 2","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-189446","object_id":"column-189446","name":"PerfectCusQuan","name_without_path":"PerfectCusQuan","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"20, 0","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};