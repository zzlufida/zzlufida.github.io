window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v12401","name":"SR_View_IncomeRpt","subtype":"VIEW","is_user_defined":false,"description":null,"script":"CREATE           VIEW  SR_View_IncomeRpt AS\r\nSELECT \r\n\r\n--报表用展示数据项\r\n--部门\r\nN'服务单' AS cSource,\r\nDepartment.cDepName,\r\n--人员\r\nPerson.cPersonName,\r\n--客户\r\nCustomer.cCusAbbName AS cCustName,\r\n'EX' AS cCustType,\r\n--存货分类\r\nInventoryClass.cInvCName,\r\n--存货\r\nInventory.cInvName,\r\n--存货规格型号\r\nInventory.cInvStd,\r\n\r\nCOMPUTATIONUNIT.cComUnitName,\r\n\r\nSR_ServiceItems.fQuantity,\r\n\r\n--行业\r\nTradeClass.cTradeCName,\r\n--地区\r\nDistrictClass.cDCName,\r\n--客户分类\r\nCustomerClass.cCCName,\r\n--应收金额\r\nSR_ServiceItems.mNatTotalSum as mTotalSum,\r\n--折扣金额\r\n(Select sum(mNatTotalSum) from SR_AGJSSerItems where cSourceOid=SR_ServiceItems.OiD) as fDrawJSSum,\r\n--累计收款\r\n(Select sum(mNatfJSSum) from SR_AGJSSerItems where cSourceOid=SR_ServiceItems.OiD) as fHKSum,\r\n--报表查询数据项\r\n\r\nSR_ServiceBill.dReqDate as dDate,\r\nDepartment.cDepCode,\r\nPerson.cPersonCode,\r\nCustomer.cCusCode AS cCusCode,Customer.cCusAbbName,\r\nCustomerClass.cCCCode,--CustomerClass.iCCGrade,CustomerClass.bCCEnd,\r\nTradeClass.cTradeCCode,--TradeClass.iTradeCGrade,TradeClass.bTradeCEnd,\r\nDistrictClass.cDCCode,--DistrictClass.iDCGrade,DistrictClass.bDCEnd,\r\nInventoryClass.cInvCCode,--InventoryClass.iInvCGrade,InventoryClass.bInvCEnd,\r\nInventory.cInvCode\r\n\r\n\r\n--其他高级查询条件中的查询项\r\n--...\r\n\r\nFROM   SR_ServiceItems\r\n\r\nLEFT JOIN SR_ServiceBill ON SR_ServiceBill.OID = SR_ServiceItems.SerBillID\r\n--部门\r\nLEFT JOIN Department ON Department.cDepCode = SR_ServiceBill.cSerDepCode\r\n--人员\r\nLEFT JOIN Person ON Person.cPersonCode = SR_ServiceBill.cSerPrincipalCode\r\n--服务类型\r\n--存货\r\nLEFT JOIN Inventory  ON Inventory.cInvCode = SR_ServiceItems.cInvCode\r\n--存货分类\r\nLEFT JOIN InventoryClass ON InventoryClass.cInvCCode= Inventory.cInvCCode\r\n--客户档案\r\nLEFT JOIN Customer  ON Customer.cCusCode=SR_ServiceBill.cCusCode\r\n--客户分类\r\nLEFT JOIN CustomerClass  ON CustomerClass.cCCCode= Customer.cCCCode\r\n--行业\r\nLEFT JOIN TradeClass ON  TradeClass.cTradeCCode= Customer.cCusTradeCCode   \r\n--地区\r\nLEFT JOIN DistrictClass ON DistrictClass.cDCCode= Customer.cDCCode\r\n\r\nLEFT JOIN COMPUTATIONUNIT  ON INVENTORY.CCOMUNITCODE=COMPUTATIONUNIT.CCOMUNITCODE\r\n\r\nWhere  SR_ServiceItems.cTypeClass=N'02' and SR_ServiceBill.SerStateID<>N'01'\r\n\r\nUNION ALL\r\n\r\nSELECT \r\n\r\n--报表用展示数据项\r\n--部门\r\nN'服务协议' AS cSource,\r\nDepartment.cDepName,\r\n--人员\r\nPerson.cPersonName,\r\n--客户\r\nCustomer.cCusAbbName AS cCustName,\r\n'EX' AS cCustType,\r\n--存货分类\r\nInventoryClass.cInvCName,\r\n--存货\r\nInventory.cInvName,\r\n--存货规格型号\r\nInventory.cInvStd,\r\n\r\nCOMPUTATIONUNIT.cComUnitName,\r\n\r\nSR_AGSerItems.fQuantity,\r\n\r\n--行业\r\nTradeClass.cTradeCName,\r\n--地区\r\nDistrictClass.cDCName,\r\n--客户分类\r\nCustomerClass.cCCName,\r\n--应收金额\r\nSR_AGSerItems.mNatTotalSum as mTotalSum,\r\n--折扣金额\r\n(Select sum(mNatTotalSum) from SR_AGJSSerItems where cSourceOid=SR_AGSerItems.OiD) as fDrawJSSum,\r\n--累计收款\r\n(Select sum(mNatfJSSum) from SR_AGJSSerItems where cSourceOid=SR_AGSerItems.OiD) as fHKSum,\r\n--报表查询数据项\r\nSR_AGBill.dAgrDate as dDate,\r\nDepartment.cDepCode,\r\nPerson.cPersonCode,\r\nCustomer.cCusCode AS cCusCode,Customer.cCusAbbName,\r\nCustomerClass.cCCCode,--CustomerClass.iCCGrade,CustomerClass.bCCEnd,\r\nTradeClass.cTradeCCode,--TradeClass.iTradeCGrade,TradeClass.bTradeCEnd,\r\nDistrictClass.cDCCode,--DistrictClass.iDCGrade,DistrictClass.bDCEnd,\r\nInventoryClass.cInvCCode,--InventoryClass.iInvCGrade,InventoryClass.bInvCEnd,\r\nInventory.cInvCode\r\n\r\n\r\n--其他高级查询条件中的查询项\r\n--...\r\n\r\nFROM   SR_AGSerItems\r\n\r\nLEFT JOIN SR_AGBill ON SR_AGBill.OID = SR_AGSerItems.cAgrCodeID\r\n--部门\r\nLEFT JOIN Department ON Department.cDepCode = SR_AGBill.cDepCode\r\n--人员\r\nLEFT JOIN Person ON Person.cPersonCode = SR_AGBill.cPersonCode\r\n--服务类型\r\n--存货\r\nLEFT JOIN Inventory  ON Inventory.cInvCode = SR_AGSerItems.cInvCode\r\n\r\n\r\n--存货分类\r\nLEFT JOIN InventoryClass ON InventoryClass.cInvCCode= Inventory.cInvCCode\r\n--客户档案\r\nLEFT JOIN Customer  ON Customer.cCusCode=SR_AGBill.cCusCode\r\n--客户分类\r\nLEFT JOIN CustomerClass  ON CustomerClass.cCCCode= Customer.cCCCode\r\n--行业\r\nLEFT JOIN TradeClass ON  TradeClass.cTradeCCode= Customer.cCusTradeCCode   \r\n--地区\r\nLEFT JOIN DistrictClass ON DistrictClass.cDCCode= Customer.cDCCode\r\n\r\nLEFT JOIN COMPUTATIONUNIT  ON Inventory.CCOMUNITCODE = COMPUTATIONUNIT.CCOMUNITCODE\r\n\r\nWhere SR_AGBill.cState<>N'01'","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"SR_View_IncomeRpt"},{"field":"Type","value":"View"}],"columns":[{"id":"column-303065","object_id":"column-303065","name":"cSource","name_without_path":"cSource","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"4","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303066","object_id":"column-303066","name":"cDepName","name_without_path":"cDepName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303067","object_id":"column-303067","name":"cPersonName","name_without_path":"cPersonName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303068","object_id":"column-303068","name":"cCustName","name_without_path":"cCustName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303069","object_id":"column-303069","name":"cCustType","name_without_path":"cCustType","description":null,"is_pk":false,"is_identity":false,"data_type":"varchar","data_length":"2","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303070","object_id":"column-303070","name":"cInvCName","name_without_path":"cInvCName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"100","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303071","object_id":"column-303071","name":"cInvName","name_without_path":"cInvName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303072","object_id":"column-303072","name":"cInvStd","name_without_path":"cInvStd","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303073","object_id":"column-303073","name":"cComUnitName","name_without_path":"cComUnitName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303074","object_id":"column-303074","name":"fQuantity","name_without_path":"fQuantity","description":null,"is_pk":false,"is_identity":false,"data_type":"float","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303075","object_id":"column-303075","name":"cTradeCName","name_without_path":"cTradeCName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303076","object_id":"column-303076","name":"cDCName","name_without_path":"cDCName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303077","object_id":"column-303077","name":"cCCName","name_without_path":"cCCName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303078","object_id":"column-303078","name":"mTotalSum","name_without_path":"mTotalSum","description":null,"is_pk":false,"is_identity":false,"data_type":"money","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303079","object_id":"column-303079","name":"fDrawJSSum","name_without_path":"fDrawJSSum","description":null,"is_pk":false,"is_identity":false,"data_type":"money","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303080","object_id":"column-303080","name":"fHKSum","name_without_path":"fHKSum","description":null,"is_pk":false,"is_identity":false,"data_type":"money","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303081","object_id":"column-303081","name":"dDate","name_without_path":"dDate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303082","object_id":"column-303082","name":"cDepCode","name_without_path":"cDepCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303083","object_id":"column-303083","name":"cPersonCode","name_without_path":"cPersonCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303084","object_id":"column-303084","name":"cCusCode","name_without_path":"cCusCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303085","object_id":"column-303085","name":"cCusAbbName","name_without_path":"cCusAbbName","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303086","object_id":"column-303086","name":"cCCCode","name_without_path":"cCCCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303087","object_id":"column-303087","name":"cTradeCCode","name_without_path":"cTradeCCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303088","object_id":"column-303088","name":"cDCCode","name_without_path":"cDCCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303089","object_id":"column-303089","name":"cInvCCode","name_without_path":"cInvCCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-303090","object_id":"column-303090","name":"cInvCode","name_without_path":"cInvCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};