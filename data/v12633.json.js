window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v12633","name":"v_arrivalcurrentstock","subtype":"VIEW","is_user_defined":false,"description":null,"script":"CREATE VIEW [dbo].[v_arrivalcurrentstock]     \r\nAS    \r\nSELECT Pu_ArrivalVouch.ddate,Pu_ArrivalVouchs.cinvcode,Pu_ArrivalVouchs.cfree1,Pu_ArrivalVouchs.cfree2,Pu_ArrivalVouchs.cfree3,Pu_ArrivalVouchs.cfree4,Pu_ArrivalVouchs.cfree5,Pu_ArrivalVouchs.cfree6,Pu_ArrivalVouchs.cfree7,Pu_ArrivalVouchs.cfree8,Pu_ArrivalVouchs.cfree9,Pu_ArrivalVouchs.cfree10,cwhcode,    \r\ncase when Pu_ArrivalVouchs.iquantity>0 then \r\n\tcase when \r\n\t\t(case  when isnull(Pu_ArrivalVouchs.bgsp,0)=0 then CONVERT(DECIMAL(28,6),(Pu_ArrivalVouchs.iquantity-ISNULL(fRefuseQuantity,0)-ISNULL(fInValidInQuan,0)-ISNULL(fValidInQuan,0)))     \r\n\telse\r\n\t\t(case when isnull(QmArrCheckSrv.SOURCEAUTOID,0)=0 then --如果没有找到检验单则按原有方式计算，不考虑抽检及降级入得量，只考虑合格入和不合格入\r\n\t\tisnull(Pu_ArrivalVouchs.iquantity,0) - ISNULL(fRefuseQuantity,0)- ISNULL(fValidInQuan,0) - isnull(Pu_ArrivalVouchs.finvalidinquan,0)\r\n\telse \r\n\t\tisnull(Pu_ArrivalVouchs.iquantity,0) - ISNULL(fRefuseQuantity,0)- isnull(QmArrCheckSrv.FMinQty,0) - isnull(Pu_ArrivalVouchs.fdegradeinquantity,0) - isnull(Pu_ArrivalVouchs.finvalidinquan,0) - isnull(Pu_ArrivalVouchs.fdtquantity,0) \r\n\tend)\t\r\n\tend) >=0 then\r\n(case  when isnull(Pu_ArrivalVouchs.bgsp,0)=0 then CONVERT(DECIMAL(28,6),(Pu_ArrivalVouchs.iquantity-ISNULL(fRefuseQuantity,0)-ISNULL(fInValidInQuan,0)-ISNULL(fValidInQuan,0)))     \r\n else \r\n\t(case when isnull(QmArrCheckSrv.SOURCEAUTOID,0)=0 then --如果没有找到检验单则按原有方式计算，不考虑抽检及降级入得量，只考虑合格入和不合格入\r\n\t\tisnull(Pu_ArrivalVouchs.iquantity,0) - ISNULL(fRefuseQuantity,0)- ISNULL(fValidInQuan,0) - isnull(Pu_ArrivalVouchs.finvalidinquan,0)\r\n\telse \r\n\t\tisnull(Pu_ArrivalVouchs.iquantity,0) - ISNULL(fRefuseQuantity,0)- isnull(QmArrCheckSrv.FMinQty,0) - isnull(Pu_ArrivalVouchs.fdegradeinquantity,0) - isnull(Pu_ArrivalVouchs.finvalidinquan,0) - isnull(Pu_ArrivalVouchs.fdtquantity,0) \r\n\tend)\r\n end)\r\nelse\r\n0 end\r\nelse\r\ncase when (case  when isnull(Pu_ArrivalVouchs.bgsp,0)=0 then CONVERT(DECIMAL(28,6),(Pu_ArrivalVouchs.iquantity-ISNULL(fRefuseQuantity,0)-ISNULL(fInValidInQuan,0)-ISNULL(fValidInQuan,0)))     \r\n else \r\n\t(case when isnull(QmArrCheckSrv.SOURCEAUTOID,0)=0 then --如果没有找到检验单则按原有方式计算，不考虑抽检及降级入得量，只考虑合格入和不合格入\r\n\t\tisnull(Pu_ArrivalVouchs.iquantity,0) - ISNULL(fRefuseQuantity,0)- ISNULL(fValidInQuan,0) - isnull(Pu_ArrivalVouchs.finvalidinquan,0)\r\n\telse \r\n\t\tisnull(Pu_ArrivalVouchs.iquantity,0) - ISNULL(fRefuseQuantity,0)- isnull(QmArrCheckSrv.FMinQty,0) - isnull(Pu_ArrivalVouchs.fdegradeinquantity,0) - isnull(Pu_ArrivalVouchs.finvalidinquan,0) - isnull(Pu_ArrivalVouchs.fdtquantity,0) \r\n\tend)\r\n  end) <=0 then\r\n(case  when isnull(Pu_ArrivalVouchs.bgsp,0)=0 then CONVERT(DECIMAL(28,6),(Pu_ArrivalVouchs.iquantity-ISNULL(fRefuseQuantity,0)-ISNULL(fInValidInQuan,0)-ISNULL(fValidInQuan,0)))     \r\n   else \r\n   \t(case when isnull(QmArrCheckSrv.SOURCEAUTOID,0)=0 then --如果没有找到检验单则按原有方式计算，不考虑抽检及降级入得量，只考虑合格入和不合格入\r\n\t\tisnull(Pu_ArrivalVouchs.iquantity,0) - ISNULL(fRefuseQuantity,0)- ISNULL(fValidInQuan,0) - isnull(Pu_ArrivalVouchs.finvalidinquan,0)\r\n\telse \r\n\t\tisnull(Pu_ArrivalVouchs.iquantity,0) - ISNULL(fRefuseQuantity,0)- isnull(QmArrCheckSrv.FMinQty,0) - isnull(Pu_ArrivalVouchs.fdegradeinquantity,0) - isnull(Pu_ArrivalVouchs.finvalidinquan,0) - isnull(Pu_ArrivalVouchs.fdtquantity,0) \r\n\tend)\r\n   end) \r\nelse \r\n0\r\nend\r\nend\r\nAS iquantity,    \r\n  (case when isnull(inventory.iGroupType,0)=0 then null when isnull(inventory.iGroupType,0)=1 \r\n\tthen (case  when isnull(Pu_ArrivalVouchs.bgsp,0)=0 \r\n\t\tthen CONVERT(DECIMAL(28,6),(Pu_ArrivalVouchs.iquantity-ISNULL(fRefuseQuantity,0)-ISNULL(fInValidInQuan,0)-ISNULL(fValidInQuan,0)))     \r\n\t\telse \r\n   \t\t\t(case when isnull(QmArrCheckSrv.SOURCEAUTOID,0)=0 then --如果没有找到检验单则按原有方式计算，不考虑抽检及降级入得量，只考虑合格入和不合格入\r\n\t\t\t\tisnull(Pu_ArrivalVouchs.iquantity,0) - ISNULL(fRefuseQuantity,0)- ISNULL(fValidInQuan,0) - isnull(Pu_ArrivalVouchs.finvalidinquan,0)\r\n\t\t\telse \r\n\t\t\t\tisnull(Pu_ArrivalVouchs.iquantity,0) - ISNULL(fRefuseQuantity,0)- isnull(QmArrCheckSrv.FMinQty,0) - isnull(Pu_ArrivalVouchs.fdegradeinquantity,0) - isnull(Pu_ArrivalVouchs.finvalidinquan,0) - isnull(Pu_ArrivalVouchs.fdtquantity,0) \r\n\t\t\tend)\r\n    end)/Unit1.iChangRate else     \r\n  (case  when isnull(Pu_ArrivalVouchs.bgsp,0)=0 then CONVERT(DECIMAL(28,6),(Pu_ArrivalVouchs.inum-ISNULL(fRefuseNum,0)-ISNULL(fInValidInNum,0)-ISNULL(fValidInNum,0)))     \r\n else \r\n\t(case when isnull(QmArrCheckSrv.SOURCEAUTOID,0)=0 then --如果没有找到检验单则按原有方式计算，不考虑抽检及降级入得量，只考虑合格入和不合格入\r\n\t\tisnull(Pu_ArrivalVouchs.inum,0) -ISNULL(fRefuseNum,0)- ISNULL(fValidInNum,0) - isnull(Pu_ArrivalVouchs.finvalidinnum,0) \r\n\t else\r\n\t\tisnull(Pu_ArrivalVouchs.inum,0) -ISNULL(fRefuseNum,0)- isnull(QmArrCheckSrv.FMinNum,0) - isnull(Pu_ArrivalVouchs.fdegradeinnum,0) - isnull(Pu_ArrivalVouchs.finvalidinnum,0) - (case when isnull(Pu_ArrivalVouchs.inum,0)>0 then isnull(Pu_ArrivalVouchs.fdtquantity,0)/(Pu_ArrivalVouchs.iquantity/Pu_ArrivalVouchs.inum) else 0 end) \r\n\t end)\r\n\tend) end) AS inum,SoType,SoDId,  \r\nirowno,        \r\ncsocode,\r\ncfactorycode --13.0 工厂编码    \r\n FROM Pu_ArrivalVouchs LEFT JOIN Pu_ArrivalVouch ON Pu_ArrivalVouchs.ID=Pu_ArrivalVouch.ID    \r\n LEFT JOIN Inventory ON Pu_ArrivalVouchs.cInvCode=Inventory.cInvCode    \r\n Left Join QmArrCheckSrv on QmArrCheckSrv.SOURCEAUTOID=Pu_ArrivalVouchs.autoid     \r\n LEFT JOIN ComputationUnit as Unit1 on Inventory.cPUComUnitCode=Unit1.cComUnitCode  \r\n left join PurchaseType on Pu_ArrivalVouch.cPTCode =PurchaseType.cPTCode\r\n WHERE (isnull(Pu_ArrivalVouchs.cwhcode,N'')=N'' OR (inventory.bInvBatch=1 and ISNULL(Pu_ArrivalVouchs.cbatch,N'')=N''))     \r\n AND ( (isnull(Pu_ArrivalVouch.bnegative,0)<>1 AND isnull(Pu_ArrivalVouchs.cbcloser,N'') = N'' ) or    \r\n (isnull(Pu_ArrivalVouchs.bgsp,0)=0 AND  isnull(Pu_ArrivalVouch.bnegative,0)=1 AND isnull(Pu_ArrivalVouchs.cbcloser,N'') = N'' and Pu_ArrivalVouch.iBillType = '1'))    \r\n  and isnull(bptmps_mrp,0)=1","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"v_arrivalcurrentstock"},{"field":"Type","value":"View"}],"columns":[{"id":"column-314663","object_id":"column-314663","name":"ddate","name_without_path":"ddate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314664","object_id":"column-314664","name":"cinvcode","name_without_path":"cinvcode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314665","object_id":"column-314665","name":"cfree1","name_without_path":"cfree1","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314666","object_id":"column-314666","name":"cfree2","name_without_path":"cfree2","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314667","object_id":"column-314667","name":"cfree3","name_without_path":"cfree3","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314668","object_id":"column-314668","name":"cfree4","name_without_path":"cfree4","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314669","object_id":"column-314669","name":"cfree5","name_without_path":"cfree5","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314670","object_id":"column-314670","name":"cfree6","name_without_path":"cfree6","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314671","object_id":"column-314671","name":"cfree7","name_without_path":"cfree7","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314672","object_id":"column-314672","name":"cfree8","name_without_path":"cfree8","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314673","object_id":"column-314673","name":"cfree9","name_without_path":"cfree9","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314674","object_id":"column-314674","name":"cfree10","name_without_path":"cfree10","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314675","object_id":"column-314675","name":"cwhcode","name_without_path":"cwhcode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"10","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314676","object_id":"column-314676","name":"iquantity","name_without_path":"iquantity","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314677","object_id":"column-314677","name":"inum","name_without_path":"inum","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314678","object_id":"column-314678","name":"SoType","name_without_path":"SoType","description":null,"is_pk":false,"is_identity":false,"data_type":"tinyint","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314679","object_id":"column-314679","name":"SoDId","name_without_path":"SoDId","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314680","object_id":"column-314680","name":"irowno","name_without_path":"irowno","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314681","object_id":"column-314681","name":"csocode","name_without_path":"csocode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-314682","object_id":"column-314682","name":"cfactorycode","name_without_path":"cfactorycode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};