window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v13267","name":"v_HR_TM_DocDeductDeal","subtype":"VIEW","is_user_defined":false,"description":null,"script":"CREATE view  [dbo].[v_HR_TM_DocDeductDeal]\r\nas \r\nSELECT  OvD.cPsn_Num ,\r\n        p.cPsn_Name ,\r\n        OvD.dJbDate ,\r\n        OvD.dValidityDate ,\r\n        OvD.dDutyTime ,\r\n        OvD.dOffTime ,\r\n        OvD.nOvertimeHours ,--实际加班时间\r\n        OvD.vJbCode ,\r\n        T.vName AS cOverTimeType , --加班类别\r\n        ovd.iRowNo AS iRecordId ,  --加班单行号\r\n        rT.vDescription AS rDealType , --加班处置方式\r\n        CONVERT(NVARCHAR(16),OvDD.dLeaveBeginDate,120) AS dLeaveBeginDate ,\r\n        CONVERT(NVARCHAR(16),OvDD.dLeaveEndDate,120) AS dLeaveEndDate ,\r\n        CASE WHEN OvDD.rDealType =1 OR OvDD.rDealType=2  THEN OvDD.nDealTime ELSE 0 END AS dLeaveOwedHours  ,--欠班时  \r\n        CASE OvD.rdealtype\r\n          WHEN 2 THEN 0\r\n          ELSE OvD.nAvailableOverHours\r\n        END AS nAvailableOverHours , --可休\r\n        OvDD.rDealType AS rLeaveDealTypeCode , --处理方式 1:调休抵扣 2：欠班抵扣 3:作废 4:结算  \r\n        Dl.vdescription AS rLeaveDealType , --处理方式 1:调休抵扣 2：欠班抵扣 3:作废 4:结算 \r\n        p.cdept_num ,\r\n        p.JobNumber ,\r\n        p.rPersonType ,\r\n        p.dEnterUnitDate ,\r\n        p.dLeaveDate ,\r\n        OvD.VoucherID AS VoucherCode , --Ovm.VoucherCode,\r\n        OvD.uRecordId ,\r\n        OvD.bOverDate ,\r\n        OvD.bOverDate2 ,\r\n        OvDD.cLeaveID ,\r\n        OvDD.iLeaveLineNum ,  --请假单行号(调休/欠班单行号)\r\n        dept.cdepcode ,\r\n        dept.cdepname ,  --部门 \r\n\t--rDealType=4时,已结算=nDealTime的值,同理处理 已作废  1:调休抵扣 2：欠班抵扣 3:作废 4:结算\r\n\t--CASE OVDD.rDealType WHEN 1 THEN OVDD.nDealTime WHEN 2 THEN OVDD.nDealTime ELSE OvD.nDeductedTime END AS nDeductedTime,  --已抵扣\r\n        OvD.nDeductedTime ,  --已抵扣\r\n        OvD.nCanceledTime AS nCanceledTime ,  --已作废\r\n        OvD.nBalancedTime AS nBalancedTime ,  --已结算\r\n        OvDD.vDeductedPeriod AS DealPriod,   --处理期间 \r\n        OvD.rDealType AS rDealTypeID--加班处置方式Code\r\nFROM    hr_tm_overtimeresult OvD WITH ( NOLOCK )        \r\n        LEFT JOIN hr_tm_overtimeResultDeduct OvDD WITH ( NOLOCK ) ON OvD.uRecordId = OvDD.FK_PK_hr_tm_OverTimeresult       \r\n        JOIN hr_hi_person p WITH ( NOLOCK ) ON OvD.cPsn_Num = p.cPsn_Num\r\n                                               AND p.bTakeTM = 1\r\n        JOIN hr_tm_OverTimeType T WITH ( NOLOCK ) ON OvD.vJbCode = T.cCode\r\n        JOIN hr_tm_personparameters PP WITH ( NOLOCK ) ON P.rPersonParameters = pp.cCode\r\n                                                          AND pp.rManHourSystem = '00'\r\n        LEFT JOIN HR_CT272 rT WITH ( NOLOCK ) ON OvD.rdealtype = rt.CCODEID\r\n        LEFT JOIN HR_CT274 Dl WITH ( NOLOCK ) ON OvDD.rDealType = Dl.ccodeid\r\n        LEFT JOIN department dept WITH ( NOLOCK ) ON p.cdept_num = dept.cdepcode\r\n        WHERE ovd.bAuditFlag=1","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"v_HR_TM_DocDeductDeal"},{"field":"Type","value":"View"}],"columns":[{"id":"column-359666","object_id":"column-359666","name":"cPsn_Num","name_without_path":"cPsn_Num","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359667","object_id":"column-359667","name":"cPsn_Name","name_without_path":"cPsn_Name","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359668","object_id":"column-359668","name":"dJbDate","name_without_path":"dJbDate","description":null,"is_pk":false,"is_identity":false,"data_type":"UFDate: nchar","data_length":"10","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359669","object_id":"column-359669","name":"dValidityDate","name_without_path":"dValidityDate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359670","object_id":"column-359670","name":"dDutyTime","name_without_path":"dDutyTime","description":null,"is_pk":false,"is_identity":false,"data_type":"UFTime: nchar","data_length":"8","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359671","object_id":"column-359671","name":"dOffTime","name_without_path":"dOffTime","description":null,"is_pk":false,"is_identity":false,"data_type":"UFTime: nchar","data_length":"8","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359672","object_id":"column-359672","name":"nOvertimeHours","name_without_path":"nOvertimeHours","description":null,"is_pk":false,"is_identity":false,"data_type":"numeric","data_length":"6, 2","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359673","object_id":"column-359673","name":"vJbCode","name_without_path":"vJbCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"4","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359674","object_id":"column-359674","name":"cOverTimeType","name_without_path":"cOverTimeType","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"500","is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359675","object_id":"column-359675","name":"iRecordId","name_without_path":"iRecordId","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359676","object_id":"column-359676","name":"rDealType","name_without_path":"rDealType","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"100","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359677","object_id":"column-359677","name":"dLeaveBeginDate","name_without_path":"dLeaveBeginDate","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"16","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359678","object_id":"column-359678","name":"dLeaveEndDate","name_without_path":"dLeaveEndDate","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"16","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359679","object_id":"column-359679","name":"dLeaveOwedHours","name_without_path":"dLeaveOwedHours","description":null,"is_pk":false,"is_identity":false,"data_type":"numeric","data_length":"6, 2","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359680","object_id":"column-359680","name":"nAvailableOverHours","name_without_path":"nAvailableOverHours","description":null,"is_pk":false,"is_identity":false,"data_type":"numeric","data_length":"6, 2","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359681","object_id":"column-359681","name":"rLeaveDealTypeCode","name_without_path":"rLeaveDealTypeCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359682","object_id":"column-359682","name":"rLeaveDealType","name_without_path":"rLeaveDealType","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"100","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359683","object_id":"column-359683","name":"cdept_num","name_without_path":"cdept_num","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359684","object_id":"column-359684","name":"JobNumber","name_without_path":"JobNumber","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359685","object_id":"column-359685","name":"rPersonType","name_without_path":"rPersonType","description":null,"is_pk":false,"is_identity":false,"data_type":"UFreference: nvarchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359686","object_id":"column-359686","name":"dEnterUnitDate","name_without_path":"dEnterUnitDate","description":null,"is_pk":false,"is_identity":false,"data_type":"nchar","data_length":"10","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359687","object_id":"column-359687","name":"dLeaveDate","name_without_path":"dLeaveDate","description":null,"is_pk":false,"is_identity":false,"data_type":"nchar","data_length":"10","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359688","object_id":"column-359688","name":"VoucherCode","name_without_path":"VoucherCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359689","object_id":"column-359689","name":"uRecordId","name_without_path":"uRecordId","description":null,"is_pk":false,"is_identity":false,"data_type":"UFUID: uniqueidentifier","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359690","object_id":"column-359690","name":"bOverDate","name_without_path":"bOverDate","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359691","object_id":"column-359691","name":"bOverDate2","name_without_path":"bOverDate2","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359692","object_id":"column-359692","name":"cLeaveID","name_without_path":"cLeaveID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"50","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359693","object_id":"column-359693","name":"iLeaveLineNum","name_without_path":"iLeaveLineNum","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359694","object_id":"column-359694","name":"cdepcode","name_without_path":"cdepcode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"12","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359695","object_id":"column-359695","name":"cdepname","name_without_path":"cdepname","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359696","object_id":"column-359696","name":"nDeductedTime","name_without_path":"nDeductedTime","description":null,"is_pk":false,"is_identity":false,"data_type":"numeric","data_length":"6, 2","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359697","object_id":"column-359697","name":"nCanceledTime","name_without_path":"nCanceledTime","description":null,"is_pk":false,"is_identity":false,"data_type":"numeric","data_length":"6, 2","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359698","object_id":"column-359698","name":"nBalancedTime","name_without_path":"nBalancedTime","description":null,"is_pk":false,"is_identity":false,"data_type":"numeric","data_length":"6, 2","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359699","object_id":"column-359699","name":"DealPriod","name_without_path":"DealPriod","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"6","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-359700","object_id":"column-359700","name":"rDealTypeID","name_without_path":"rDealTypeID","description":null,"is_pk":false,"is_identity":false,"data_type":"nchar","data_length":"1","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};