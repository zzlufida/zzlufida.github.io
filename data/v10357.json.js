window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v10357","name":"CM_V_ApCloseSales","subtype":"VIEW","is_user_defined":false,"description":null,"script":"CREATE  VIEW CM_V_ApCloseSales as   \r\nselect max(Ap_CloseBill.iID) as I_id,  \r\nAp_VouchType.cTypeName as cVoucherType,  \r\nAr_Detail.cVouchID,  \r\nAr_Detail.cCoVouchID,    --结算单号，销售发票号  \r\nSaleBillVouch.cVouchType As cCoVoucherType, --发票类型  \r\nmax(case when Ar_Detail.cCoVouchType like N'60%' then Ar_Detail.cContractID   \r\n  else SaleBillVouchs.cContractID end) as strContractID,  -- 合同号  \r\n(case when Ar_Detail.cCoVouchType like N'60%'Then CI.RowGUID   \r\n  else SaleBillVouchs.cContractRowGuid end) as ContractRowGuid, --合同标的RowGUID  \r\n(case when Ar_Detail.cCoVouchType like N'60%' Then CI.strCode   \r\n  else SaleBillVouchs.cContractTagCode end) as strCode, --合同标的strCode  \r\nAr_Detail.balancesguid,  \r\nAr_Detail.ibvid,    --销售发票子表ID  \r\n--Max(Ar_Detail.cOrderNo) as cOrderNo,  --销售订单号  \r\nmax(SaleBillVouchs.iSOsID) as iSOsID,  --销售订单子表ID  \r\nsum(Ar_Detail.iCAmount_f) as iAmount_f,  --原币  \r\nsum(Ar_Detail.iCAmount) as iAmount,  --本币  \r\nmax(Ar_Detail.cCode) as cCode,  \r\nMax(Ar_Detail.cItemCode) as cItemCode,  \r\nMax(Ar_Detail.dVouchDate) as dVouchDate  \r\nfrom Ar_Detail  \r\nLEFT JOIN Ap_VouchType ON Ar_Detail.cVouchType = Ap_VouchType.cTypeCode   \r\nLeft Join Ap_CloseBill On Ar_Detail.cDwCode=Ap_CloseBill.cDwCode and Ar_Detail.cVouchType=Ap_CloseBill.cVouchType And Ar_Detail.cVouchID=Ap_CloseBill.cVouchID And Ar_Detail.cFlag=Ap_CloseBill.cFlag  \r\nLeft Join SaleBillVouchs On Ar_Detail.ibvid=SaleBillVouchs.AutoID  \r\nLeft Join SaleBillVouch On SaleBillVouch.sbvid=SaleBillVouchs.sbvid  \r\nLeft Join (select V.RowGUID,V.strCode,S.balancesguid from CM_QContractItemView V  \r\n INNER JOIN CM_Balance B On V.strContractID=B.cContractID  \r\n INNER JOIN CM_Balances S On B.cBalanceID=S.cBalanceID And V.strCode=S.cCode)  \r\n CI On Ar_Detail.balancesguid =CI.balancesguid  \r\nwhere (cprocstyle=N'9P' or cprocstyle=N'XJ') and (iFlag<3 or iFlag=5) and Ar_Detail.cFlag=N'AR'  \r\nand Ar_Detail.cvouchtype like N'4%' and Ar_Detail.ccovouchtype IN ('26','27','28','29','60','60z')  \r\ngroup by Ar_Detail.cdwcode,Ar_Detail.ccovouchtype,Ar_Detail.ccovouchid,Ar_Detail.ibvid,  \r\nAp_VouchType.cTypeName,Ar_Detail.cvouchid,Ar_Detail.balancesguid,cContractRowGuid,CI.RowGUID,CI.strCode,cContractTagCode,Ar_Detail.cVouchType,SaleBillVouch.cVouchType  \r\nUnion  \r\nselect max(Ap_CloseBill.iID) as I_id,  \r\nAp_VouchType.cTypeName as cVoucherType,  \r\nAr_Detail.ccovouchid,  \r\ndbo.UDF_GetResourceMessageByID('U8.CW.CM.PreReceive') As cCoVouchID,    --结算单号，销售发票号  \r\nNull As cCoVoucherType,  \r\nAr_Detail.cContractID as strContractID,  -- 合同号  \r\nNull as ContractRowGuid, --合同标的RowGUID  \r\nNull As strCode,  \r\nNull as balancesguid,  \r\nNull As ibvid,    --销售发票子表ID  \r\nNull As iSOsID,  --销售订单子表ID  \r\nsum(Ar_Detail.iCAmount_f-Ar_Detail.iDAmount_f) As  iAmount_f,  \r\nsum(Ar_Detail.iCAmount-Ar_Detail.iDAmount) as iAmount,  --本币  \r\nNull As cCode,  \r\nNull As cItemCode,  \r\nMax(Ar_Detail.dVouchDate) as dVouchDate  \r\nfrom Ar_Detail  \r\nLEFT JOIN Ap_VouchType ON Ar_Detail.cVouchType = Ap_VouchType.cTypeCode   \r\nLeft Join Ap_CloseBill On Ar_Detail.cDwCode=Ap_CloseBill.cDwCode and Ar_Detail.cVouchType=Ap_CloseBill.cVouchType And Ar_Detail.cVouchID=Ap_CloseBill.cVouchID And Ar_Detail.cFlag=Ap_CloseBill.cFlag  \r\nwhere Ar_Detail.cFlag=N'AR' and Ar_Detail.ccovouchtype like N'4%' and iflag<3   \r\n--and ISNULL(cexecID,'') <> '' and Ar_Detail.bPrePay=1 --v10.0支持问题 201108210004   \r\ngroup by Ar_Detail.cdwcode,Ap_VouchType.cTypeName,Ar_Detail.ccovouchid,Ar_Detail.cContractID","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"CM_V_ApCloseSales"},{"field":"Type","value":"View"}],"columns":[{"id":"column-184390","object_id":"column-184390","name":"I_id","name_without_path":"I_id","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184391","object_id":"column-184391","name":"cVoucherType","name_without_path":"cVoucherType","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184392","object_id":"column-184392","name":"cVouchID","name_without_path":"cVouchID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184393","object_id":"column-184393","name":"cCoVouchID","name_without_path":"cCoVouchID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"2048","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184405","object_id":"column-184405","name":"cCoVoucherType","name_without_path":"cCoVoucherType","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"2","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184394","object_id":"column-184394","name":"strContractID","name_without_path":"strContractID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"64","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184395","object_id":"column-184395","name":"ContractRowGuid","name_without_path":"ContractRowGuid","description":null,"is_pk":false,"is_identity":false,"data_type":"uniqueidentifier","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184396","object_id":"column-184396","name":"strCode","name_without_path":"strCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"150","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184397","object_id":"column-184397","name":"balancesguid","name_without_path":"balancesguid","description":null,"is_pk":false,"is_identity":false,"data_type":"uniqueidentifier","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184398","object_id":"column-184398","name":"ibvid","name_without_path":"ibvid","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184399","object_id":"column-184399","name":"iSOsID","name_without_path":"iSOsID","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184400","object_id":"column-184400","name":"iAmount_f","name_without_path":"iAmount_f","description":null,"is_pk":false,"is_identity":false,"data_type":"money","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184401","object_id":"column-184401","name":"iAmount","name_without_path":"iAmount","description":null,"is_pk":false,"is_identity":false,"data_type":"money","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184402","object_id":"column-184402","name":"cCode","name_without_path":"cCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184403","object_id":"column-184403","name":"cItemCode","name_without_path":"cItemCode","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-184404","object_id":"column-184404","name":"dVouchDate","name_without_path":"dVouchDate","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};