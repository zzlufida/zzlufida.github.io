window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v11732","name":"NE_RedExpenseVerifyMoney_View","subtype":"VIEW","is_user_defined":false,"description":null,"script":"create view [dbo].[NE_RedExpenseVerifyMoney_View]\r\nas\r\n\tSELECT DISTINCT\r\n            ExpenseVouch.ID AS ExpenseVouchID ,\r\n            ROUND(SUM(( ABS(ExpenseVouch.ExpenseMoney)\r\n                        - ABS(ISNULL(tempBalance.BalanceMoney, 0)) )), 2) AS VerifyMoney ,\r\n            SUM(ISNULL(ExpenseLoanInfo.LocalMoney, 0)) AS LocalVerifyMoney\r\n    FROM    NE_ExpenVouch AS ExpenseVouch\r\n            INNER JOIN ( SELECT ExpenseVouchID ,\r\n                                SUM(ABS(LocalMoney)) AS LocalMoney\r\n                         FROM   NE_ExpenseLoanInfo\r\n                         WHERE  ISNULL(IsUsed, 1) = 0\r\n                         GROUP BY ExpenseVouchID\r\n                       ) AS ExpenseLoanInfo ON ExpenseVouch.ID = ExpenseLoanInfo.ExpenseVouchID\r\n            LEFT JOIN ( SELECT  expenseBalanece.ExpenseVouchID ,\r\n                                SUM(expenseBalanece.BalanceMoney) AS BalanceMoney\r\n                        FROM    NE_ExpenseBalanceInfo AS expenseBalanece\r\n                                INNER JOIN NE_BalanceInfo AS balanceInfo ON balanceInfo.ID = expenseBalanece.MainBalanceID\r\n                        WHERE   balanceInfo.IsVerify = 1\r\n                                AND balanceInfo.IsMidCurrency = 0\r\n                                AND balanceInfo.IOType = 1\r\n                        GROUP BY ExpenseVouchID\r\n                        UNION ALL\r\n                        SELECT  expenseBalanece.ExpenseVouchID ,\r\n                                SUM(CASE WHEN foreigncurrency.bcal = 1\r\n                                         THEN expenseBalanece.MidCurrencyMoney\r\n                                              / ISNULL(midRate.MidExchangeRate,\r\n                                                       1)\r\n                                         ELSE expenseBalanece.MidCurrencyMoney\r\n                                              * ISNULL(midRate.MidExchangeRate,\r\n                                                       1)\r\n                                    END) AS BalanceMoney\r\n                        FROM    NE_ExpenseBalanceInfo AS expenseBalanece\r\n                                INNER JOIN NE_ExpenVouch AS expenVouch ON expenseBalanece.ExpenseVouchID = expenVouch.ID\r\n                                INNER JOIN NE_BalanceInfo AS balanceInfo ON balanceInfo.ID = expenseBalanece.MainBalanceID\r\n                                INNER JOIN foreignCurrency ON expenVouch.Currency = foreignCurrency.cExch_name\r\n                                LEFT JOIN ( SELECT  MidCurrency ,\r\n                                                    Currency ,\r\n                                                    MidExchangeRate\r\n                                            FROM    NE_MidExchangeRate\r\n                                            WHERE   IsDefault = 1\r\n                                          ) AS midRate ON expenVouch.Currency = midRate.Currency\r\n                        WHERE   balanceInfo.IsVerify = 1\r\n                                AND balanceInfo.IsMidCurrency = 1\r\n                                AND balanceInfo.IOType = 1\r\n                        GROUP BY expenseBalanece.ExpenseVouchID\r\n                      ) AS tempBalance ON ExpenseVouch.ID = tempBalance.ExpenseVouchID\r\n    GROUP BY ExpenseVouch.ID","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"NE_RedExpenseVerifyMoney_View"},{"field":"Type","value":"View"}],"columns":[{"id":"column-250570","object_id":"column-250570","name":"ExpenseVouchID","name_without_path":"ExpenseVouchID","description":null,"is_pk":false,"is_identity":false,"data_type":"uniqueidentifier","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-250571","object_id":"column-250571","name":"VerifyMoney","name_without_path":"VerifyMoney","description":null,"is_pk":false,"is_identity":false,"data_type":"float","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-250572","object_id":"column-250572","name":"LocalVerifyMoney","name_without_path":"LocalVerifyMoney","description":null,"is_pk":false,"is_identity":false,"data_type":"decimal","data_length":"38, 2","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};