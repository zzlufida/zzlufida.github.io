window.repositoryObject = {"columns_custom_fields":[],"relations_custom_fields":[],"triggers_custom_fields":[],"object_id":"v12392","name":"SR_VIEW_COMPONENTASCEND","subtype":"VIEW","is_user_defined":false,"description":null,"script":"--服务产品子件追溯\r\n\r\nCREATE  VIEW SR_VIEW_COMPONENTASCEND  \r\n  \r\nAS  \r\n SELECT     CONVERT(CHAR, CONVERT(MONEY, SR_FITTINGS.UFTS), 2) AS UFTS, SR_FITTINGS.IFATHERID AS IFATHERID, SR_FITTINGS.CINVCODE, SR_FITTINGS.CINVSN,     \r\n                      SR_FITTINGS.CSERVICEOID AS CSERVICEOID, SR_FITTINGS.DDATE AS DDATE, INVENTORY.CINVNAME, INVENTORY.CINVSTD AS CINVSTD,     \r\n                      UNIT2.CCOMUNITCODE, UNIT2.CCOMUNITNAME, 1 AS CTYPE,SR_FITTINGS. ID AS ID, case cSource when  1 then  \r\n  \r\n SR_ServiceBilldetail.cInvCode else  SR_SERVICEPRODUCTS.CINVCODE end   \r\n  \r\nAS FATHERCODE,\r\n\r\ncase cSource when  1 then  \r\nINVENTORY_C.CINVNAME  \r\nelse  \r\n  \r\nINVENTORY_B.CINVNAME end AS FATHERNAME, \r\n \r\ncase cSource when  1 then  \r\nSR_ServiceBilldetail.serialnoid  \r\nelse  \r\n  \r\nSR_SERVICEPRODUCTS.CSERPRODUCTCODE end AS FATHERSN,\r\n\r\nSR_ServiceBilldetail.cBatch as FATHERcBatch ,\r\nSR_FITTINGS.cBatch as cBatch   \r\nFROM         SR_FITTINGS LEFT JOIN    \r\n                      INVENTORY ON INVENTORY.CINVCODE = SR_FITTINGS.CINVCODE LEFT JOIN    \r\n                      COMPUTATIONUNIT AS UNIT2 ON INVENTORY.CCOMUNITCODE = UNIT2.CCOMUNITCODE    \r\n                      LEFT JOIN SR_SERVICEPRODUCTS ON SR_FITTINGS.CSERVICEOID =SR_SERVICEPRODUCTS.OID    \r\n                      LEFT JOIN  INVENTORY AS INVENTORY_B ON INVENTORY_B.CINVCODE = SR_SERVICEPRODUCTS.CINVCODE    \r\n\t\t      \r\n        left join SR_ServiceBilldetail on  SR_ServiceBilldetail.oid= SR_FITTINGS.cServiceCode    \r\n         left join SR_ServiceBill on SR_ServiceBill.oid=   SR_ServiceBilldetail.serbillid \r\n\tLEFT JOIN  INVENTORY AS INVENTORY_C ON INVENTORY_C.CINVCODE = SR_ServiceBilldetail.cInvCode      \r\n  \r\nUNION ALL    \r\nSELECT     CONVERT(CHAR, CONVERT(MONEY, INVENTORY.PUBUFTS), 2) AS UFTS, ST_SNARCHIVES_SNDETAILS.IFATHERID,     \r\n                      ST_SNARCHIVES_SNDETAILS.CINVCODE, ST_SNARCHIVES_SNDETAILS.CINVSN, N'' AS CSERVICEOID, NULL AS DDATE, INVENTORY.CINVNAME,     \r\n                      INVENTORY.CINVSTD AS CINVSTD, UNIT2.CCOMUNITCODE, UNIT2.CCOMUNITNAME, 2 AS CTYPE, '' AS ID,INVENTORY_B.CINVCODE AS FATHERCODE,INVENTORY_B.CINVNAME AS FATHERNAME,B.CINVSN AS FATHERSN ,   \r\n\t\tST_SNARCHIVES_SNDETAILS.cBatch as FATHERcBatch,\t\r\n\t\tB.cBatch as cBatch\r\nFROM         ST_SNARCHIVES_SNDETAILS LEFT JOIN    \r\n                      INVENTORY ON INVENTORY.CINVCODE = ST_SNARCHIVES_SNDETAILS.CINVCODE LEFT JOIN    \r\n                      COMPUTATIONUNIT AS UNIT2 ON INVENTORY.CCOMUNITCODE = UNIT2.CCOMUNITCODE    \r\n              LEFT JOIN ST_SNARCHIVES_SNDETAILS AS B ON B.ICHILDID=ST_SNARCHIVES_SNDETAILS.IFATHERID     \r\n              LEFT JOIN INVENTORY AS INVENTORY_B ON INVENTORY_B.CINVCODE = B.CINVCODE    \r\n              WHERE ST_SNARCHIVES_SNDETAILS.ICHILDID<>ST_SNARCHIVES_SNDETAILS.IFATHERID    \r\n                  \r\nUNION ALL    \r\nSELECT     CONVERT(CHAR, CONVERT(MONEY, INVENTORY.PUBUFTS), 2) AS UFTS, N'' AS IFATHERID, ST_SNDETAIL_OTHEROUT.CINVCODE,     \r\n                      ST_SNDETAIL_OTHEROUT.CINVSN, RDRECORDS.CSERVICEOID, RDRECORD.DDATE AS DDATE, INVENTORY.CINVNAME,     \r\n                      INVENTORY.CINVSTD AS CINVSTD, UNIT2.CCOMUNITCODE, UNIT2.CCOMUNITNAME, 3 AS CTYPE, '' AS ID,    \r\n                      INVENTORY_B.CINVCODE AS FATHERCODE,INVENTORY_B.CINVNAME AS FATHERNAME,SR_SERVICEBILLDETAIL.SERIALNOID AS FATHERSN ,   \r\n\t\tSR_SERVICEBILLDETAIL.cBatch as FATHERcBatch,\r\n\t\tST_SNDETAIL_OTHEROUT.cBatch\t\r\n\t\t\r\nFROM         RDRECORD09 RDRECORD LEFT JOIN    \r\n                      RDRECORDS09 RDRECORDS ON RDRECORDS.ID = RDRECORD.ID INNER JOIN    \r\n                      ST_SNDETAIL_OTHEROUT ON RDRECORDS.AUTOID = ST_SNDETAIL_OTHEROUT.IVOUCHSID LEFT JOIN    \r\n                      ST_SNSTATE ON ST_SNDETAIL_OTHEROUT.CINVSN = ST_SNSTATE.CINVSN AND     \r\n                      ST_SNDETAIL_OTHEROUT.CINVCODE = ST_SNSTATE.CINVCODE AND     \r\n                      ST_SNDETAIL_OTHEROUT.ISNOPERATECOUNT = ST_SNSTATE.ISNOPERATECOUNT LEFT JOIN    \r\n                      INVENTORY ON INVENTORY.CINVCODE = ST_SNDETAIL_OTHEROUT.CINVCODE LEFT JOIN    \r\n                      COMPUTATIONUNIT AS UNIT2 ON INVENTORY.CCOMUNITCODE = UNIT2.CCOMUNITCODE    \r\n       \r\n           \r\n       LEFT JOIN SR_SERVICEITEMS ON  SR_SERVICEITEMS.OID= RDRECORDS.CBSERVICEOID    \r\n   LEFT JOIN SR_SERVICEBILLDETAIL ON SR_SERVICEITEMS.SERBODYOID = SR_SERVICEBILLDETAIL.OID     \r\n       LEFT JOIN INVENTORY AS INVENTORY_B ON INVENTORY_B.CINVCODE = SR_SERVICEBILLDETAIL.CINVCODE    \r\nWHERE     RDRECORD.CBUSTYPE = '服务配件领用' AND ST_SNSTATE.ISNSTATE = 4 AND  ST_SNDETAIL_OTHEROUT.CINVSN NOT IN (SELECT SR_FITTINGS.CINVSN FROM SR_FITTINGS WHERE SR_FITTINGS.CINVCODE=ST_SNDETAIL_OTHEROUT.CINVCODE)","summary":[{"field":"Documentation","value":{"_type":"link","name":"U8V16.5数据字典","id":"d6"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"SR_VIEW_COMPONENTASCEND"},{"field":"Type","value":"View"}],"columns":[{"id":"column-302736","object_id":"column-302736","name":"UFTS","name_without_path":"UFTS","description":null,"is_pk":false,"is_identity":false,"data_type":"char","data_length":"30","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-302737","object_id":"column-302737","name":"IFATHERID","name_without_path":"IFATHERID","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-302738","object_id":"column-302738","name":"CINVCODE","name_without_path":"CINVCODE","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"120","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-302739","object_id":"column-302739","name":"CINVSN","name_without_path":"CINVSN","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"400","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-302740","object_id":"column-302740","name":"CSERVICEOID","name_without_path":"CSERVICEOID","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"40","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-302741","object_id":"column-302741","name":"DDATE","name_without_path":"DDATE","description":null,"is_pk":false,"is_identity":false,"data_type":"datetime","data_length":null,"is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-302742","object_id":"column-302742","name":"CINVNAME","name_without_path":"CINVNAME","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-302743","object_id":"column-302743","name":"CINVSTD","name_without_path":"CINVSTD","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-302744","object_id":"column-302744","name":"CCOMUNITCODE","name_without_path":"CCOMUNITCODE","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"35","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-302745","object_id":"column-302745","name":"CCOMUNITNAME","name_without_path":"CCOMUNITNAME","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"20","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-302746","object_id":"column-302746","name":"CTYPE","name_without_path":"CTYPE","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-302747","object_id":"column-302747","name":"ID","name_without_path":"ID","description":null,"is_pk":false,"is_identity":false,"data_type":"int","data_length":null,"is_nullable":false,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-302748","object_id":"column-302748","name":"FATHERCODE","name_without_path":"FATHERCODE","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"120","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-302749","object_id":"column-302749","name":"FATHERNAME","name_without_path":"FATHERNAME","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"255","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-302750","object_id":"column-302750","name":"FATHERSN","name_without_path":"FATHERSN","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"200","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-302751","object_id":"column-302751","name":"FATHERcBatch","name_without_path":"FATHERcBatch","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]},{"id":"column-302752","object_id":"column-302752","name":"cBatch","name_without_path":"cBatch","description":null,"is_pk":false,"is_identity":false,"data_type":"nvarchar","data_length":"60","is_nullable":true,"computed_formula":null,"default_value":null,"path":null,"level":1,"item_type":"COLUMN","is_user_defined":false,"custom_fields":{},"linked_terms":[],"references":[]}],"relations":[],"triggers":[],"unique_keys":[],"dependencies":null,"imported_at":"2024-07-15 13:47"};